
// =================================================================================================
// eModbus: Copyright 2020 by Michael Harwerth, Bert Melis and the contributors to ModbusClient
//               MIT license - see license.md for details
// =================================================================================================
// Includes: <Arduino.h> for Serial etc., WiFi.h for WiFi support
// Client, der Server sucht
// Master der Slave sucht

  // TXD  Programmport  GPIO1  Pin41  TXD
  // RXD  Programmport  GPIO3  Pin40  RXD


  // SERIAL2_RXPIN 16     RXD2     GPIO16  PIN25  RXD2     gelb 
  // SERIAL2_TXPIN 17     TXD2     GPIO17  PIN27  TXD2     grün 

  // SCL  GPIO22 PIN39
  // SDA  GPIO21 PIN42

  // RXD GPIO10  RXD1
  // TXD GPIO 9  TXD1

  // LED Pin32

//-----------------------------------------



//#define OTA_on_NMDS_off     // OTA oder NMDS
#define CO2_on                // CO2 Sensor
//#define MB_Gateway          // aktiv ist Gateway  0= Server Client
#define lib_folder 
#define lib_pase            // Parse HTML
#define led_on 
//-----------------------------------------


//#define BLE_DEBUG
#define WIFI_DEBUG  
       
//#define MBDebug
//#define DataDebug
//#define NVS_DEBUG   
#define WEB_DEBUG     
#define MQTT_DEBUG     
#define RADONCLOUD_DEBUG
//#define CO2_DEBUG
//#define LEDDebug
#define PushDebug
//#define MeshDebug
//#define NTPDebug
#define TimeDebug

//---------------------------------------------


#include <Arduino.h>
//#include "Arduino.h"

//#include "HardwareSerial.h"
#include <HardwareSerial.h>

//#include "SoftwareSerial.h"

#include <WiFi.h>

#include <EEPROM.h>
//Constants
#define EEPROM_SIZE 12

//#include "PushoverESP32.h"
#include "Pushsafer.h"
//#define PushsaferKey "XqLUBNqaO1oaRpggaX0h"   // Private Key: http://pushsafer.com


//#include "esp_vfs_fat.h"

#include <DNSServer.h>

//#include <WebServer.h>
//#include <WiFiManager.h>         //https://github.com/tzapu/WiFiManager

//#include "WebServer.h"
#include "WiFiManager.h"         //https://github.com/tzapu/WiFiManager
//#include <WiFiManager.h> 

#ifdef OTA_on_NMDS_off
#include <ArduinoOTA.h>
#else
#include <ESPmDNS.h>
#endif

#include <Preferences.h>
//#include "esp_system.h"
//#include "nvs_flash.h"
//#include "nvs.h"


#include "PubSubClient.h"


#include "FS.h"           // Include the SPIFFS library
#include "SPIFFS.h"

#ifdef lib_folder
#include <AsyncTCP.h>
#include <ESPAsyncWebServer.h>
#else
#include "AsyncTCP.h"
#include "ESPAsyncWebServer.h"
#endif

//#include "time.h"
#include "ESPDateTime.h"
#include "TCPstub.h"
//unsigned long mb_response_size_rtu = 0;
#include "NTPClient.h"

#ifndef Push2
#include "WiFiUdp.h"
#endif
#ifdef Push2
//#include <WiFiClientSecure.h>
#endif

// Modbus bridge include
#ifdef MB_Gateway
#include "ModbusBridgeWiFi.h"
#endif

// Modbus server TCP
#ifndef MB_Gateway
#include "ModbusServerTCPasync.h"
#endif

#include <ModbusClientRTU.h>

#ifdef CO2_on
#include <Wire.h>    // I2C library
#include "ccs811.h"  // CCS811 library
// Wiring for ESP8266 NodeMCU boards: VDD to 3V3, GND to GND, SDA to D2, SCL to D1, nWAKE to D3 (or GND)
CCS811 ccs811(23); // nWAKE on D3   //SCL D22        SDA  D21

uint16_t eco2val1;
uint16_t etvocval2;
bool gCO2UpdateFlag = true;
#endif

bool gRADONupdateFlag = true;
bool gRADONupdateSinifferFlag = false;


 
#ifdef led_on 
  // esp.c muss auch mit rein in den Libordner
  #include "Adafruit_NeoPixel.h"
  #define STRIP_1_PIN 32  // GPIO the LEDs are connected to
  #define LED_COUNT 4  // Number of LEDs
  #define BRIGHTNESS 255  // NeoPixel brightness, 0 (min) to 255 (max)
  Adafruit_NeoPixel strip1(LED_COUNT, STRIP_1_PIN, NEO_GRB + NEO_KHZ800); // NEO_KHZ800

#endif
bool gLedSearchFlag = false;
bool gLedDeleteFlag = false;
bool gGraphDeleteFlag = false;
bool gMESHUpdateFlag = true;
bool gMESHUpdateFlag2 = true;
bool gMESHUpdateFlag3 = true;
bool gMESHUpdateFlag4 = true;
bool gMESHUpdateFlag5 = true;


bool gNTPupdateFlag = true;

////#include <esp_task_wdt.h>
//3 seconds WDT
//#define WDT_TIMEOUT 8

/*
#include <stdio.h>
#include <esp_system.h>
#include <esp_system.h>
#include <esp_err.h>

void app_main(void)
{
        
        
        printf("Simply give ok code to check function and see whats happend\n");        
        ESP_ERROR_CHECK(ESP_OK);
        
        printf("And hopefully you see nothing between this and the last output\n");
        
                
        printf(esp_err_to_name(0x106));
         
        char text[30];
        esp_err_to_name_r(0x105,text,30);
        printf(text);
        
        
        // undocument this to produce an error
        //ESP_ERROR_CHECK(ESP_ERR_INVALID_MAC);
        
}
*/



//char ssid[] = "FRITZ!Box 6490 Holger";                     // SSID and ...
//char pass[] = "15400240614617116002";                     // password for the WiFi network used

  int incoming1Byte = 0; // Für eingehende serielle Daten
  const int BUFFER_SIZE1 = 18;
  char buf1[BUFFER_SIZE1];

byte f_buffer[BUFFER_SIZE1];
byte ser_val_01[2];
byte ser_val_02[2];
byte ser_val_03[2];
byte ser_val_04;
byte ser_val_05[2];
byte ser_val_06[2];
byte ser_val_07;
byte ser_val_08;
byte ser_val_09;
byte ser_val_10;
byte ser_val_11;
byte ser_val_12;
uint16_t f_check_rec = 0;


uint16_t f_filterRemaining = 0;
uint8_t f_min = 0;
uint8_t f_pwm = 0;
uint16_t f_alarmlevl = 0;
uint8_t f_alarm = 0;
uint16_t f_software = 0;
uint16_t f_opHour = 0;
uint8_t f_filterMonitor = 0;
uint8_t f_checksum = 0;

String inputString = "";         // a String to hold incoming data
bool stringComplete = false;  // whether the string is complete


        uint16_t vent_min_stufe = 1;
        uint16_t vent_max_stufe = 2;
        uint16_t pwm_radon_min = 0;
        uint16_t pwm_radon_max = 0;
        uint16_t pwm_radon_range = 0;
        uint16_t pwm_faktor = 0;
        uint16_t pwm_raster = 0;
        uint16_t pwm_radon_value = 0;



//default custom static IP
char static_ip[16] = "192.168.178.251";
char static_gw[16] = "192.168.178.1";
char static_sn[16] = "255.255.255.0";
char static_dns[16] = "8.8.8.8";

bool shouldSaveConfig = false;

uint16_t port = 502;                      // port of modbus server
uint16_t aWebPort = 80;                      // port of Web server
// Create a ModbusRTU client instance
ModbusClientRTU MB(Serial2);

#ifdef MB_Gateway
// Create server
ModbusBridgeWiFi MBbridge;
#endif

#define STRINGIFY(x) #x
#define LNO(x) "line " STRINGIFY(x) " "

#include "Logging.h"

#define PIN_RESET_BUTTON 4   
#define PIN_BOOT_BUTTON 0       
int b_RESET = 0; 
int b_BOOT = 1; 

char incomingByte [16];
String myValue [16];
String stringOne = "";
char* buf2 = 0;
uint8_t Expec_b[] = {0, 4, 2, 0, 0};
uint8_t slaveid[] = {2, 3, 2, 0, 3};
//char dataString[50] = {0};
//int mbbytestart = 0;



uint16_t  ee_var_01 = 0; 
uint16_t  ee_var_02 = 0; 
uint16_t  ee_wifires = 0; 
uint16_t  ee_portalTimeout = 320; 
uint16_t  reset_timer_wlan = 30;
uint16_t  ipchangeandreeboot = 0;

byte count_in = 0;
byte count_out = 0;
uint16_t  scan_server = 0;
uint16_t  Async_WebServer_start = 0;

uint16_t testsExecuted = 0;            // Global test cases counter. Incremented in testOutput().
uint16_t testsPassed = 0;              // Global passed test cases counter. Incremented in testOutput().
bool printPassed = true;               // If true, testOutput will print passed tests as well.
bool mb_Acknowledge = false;
String mb_Acknowledge_s = "";

    uint16_t ledRedVal;
    uint16_t ledOrangeVal;
    uint16_t ledGreenVal;
    uint16_t ledgammaVal;

float val1, val2;
uint16_t val3, val4;
uint16_t fval1, fval2, fval3, fval4, fval5, fval6, fval7, fval8, fval9, fval10;
String f_alarm_s = "        ";

uint32_t val4max;
uint32_t val3max;
uint32_t val1max;
uint32_t val2max;

uint32_t vredFrom;
uint32_t vredTo;
uint32_t vyellowFrom;
uint32_t vyellowTo;
uint32_t vgreenFrom;
uint32_t vgreenTo;

uint32_t vredFrom2;
uint32_t vredTo2;
uint32_t vyellowFrom2;
uint32_t vyellowTo2;
uint32_t vgreenFrom2;
uint32_t vgreenTo2;

uint32_t vredFrom3;
uint32_t vredTo3;
uint32_t vyellowFrom3;
uint32_t vyellowTo3;
uint32_t vgreenFrom3;
uint32_t vgreenTo3;

String val1_color = "0, 0, 0, 0.3";
String val2_color = "0, 0, 0, 0.3";
String val3_color = "0, 0, 0, 0.3";


String r0_val1, r0_val2, r0_val3;
String r1_val1, r1_val2, r1_val3;
String r2_val1, r2_val2, r2_val3;
String r3_val1, r3_val2, r3_val3;
String r4_val1, r4_val2, r4_val3;
String r5_val1, r5_val2, r5_val3;

byte mb_low = 0;
byte mb_high = 0;
//uint16_t mb_word = word(mb_high, mb_low);
uint32_t mb_long = 0;
byte mb_arry_byte[20];
byte i_loop = 0;
uint16_t mb_byte_size = 0;
uint16_t mb_byte_header = 4;
uint16_t mb_byte_resault = 2;
uint16_t mb_byte_header_t = 3;
byte responsegetFunctionCode = 0;

uint32_t mb_radon_ist_long = 0;
uint16_t  mb_radon_ist_word = 0;
uint32_t mb_radon_long = 0;
uint16_t  mb_radon_int = 0;
uint16_t  mb_radon_eintrarge = 0;

uint32_t radon_tag = 0;
uint32_t radon_temp = 0;
uint16_t  radonTagCount = 0;
uint16_t  radonTagEintrCount = 0;
uint16_t  radonTagCountvorgabe = 96;
uint16_t  radonMore14Day = 0;

uint32_t radon_tag00 = 0;
uint32_t radon_tag01 = 0;
uint32_t radon_tag02 = 0;
uint32_t radon_tag03 = 0;
uint32_t radon_tag04 = 0;
uint32_t radon_tag05 = 0;
uint32_t radon_tag06 = 0;
uint32_t radon_tag07 = 0;
uint32_t radon_tag08 = 0;
uint32_t radon_tag09 = 0;
uint32_t radon_tag10 = 0;
uint32_t radon_tag11 = 0;
uint32_t radon_tag12 = 0;
uint32_t radon_tag13 = 0;
uint32_t radon_tag14 = 0;

uint16_t  mb_radon_ist_word_long0;
uint16_t  mb_radon_ist_word_long1;

uint16_t  mb_radon_word_long0;
uint16_t  mb_radon_word_long1;

uint32_t received_size = 0;
uint32_t received_count = 0;
uint32_t response_size = 0;
uint32_t received_response_size = 0;
uint32_t received_response_size_k = 0;
uint32_t received_response_size_m = 0;
uint32_t received_response_size_g = 0;
uint16_t  received_response__g = 0;

uint16_t dataRequest =0;

String s_response_size = "";
String s_received_size = "";

String MBbridge_localRequest = "";



int measurement = 0;
uint16_t measurement_lage = 0;
uint16_t measurement_temp = 0;
boolean sensor_vals_read = true;


  // Öffnen der von uns definierten Datei nur mit Leserechten
  // r - Read - nur Leserechte
  // w - Write - Schreibrechte
  const char* dateiGr01 = "/graph01.txt"; // tvoc            charInts4[42]     dateiGr01   /chartdiv4.js
  const char* dateiGr02 = "/graph02.txt"; // co2 Daten       charInts3[42]     dateiGr02   /chartdiv3.js
  const char* dateiGr03 = "/graph03.txt"; // radon Daten      charInts[42]     dateiGr03   /chartdiv.js
  const char* dateiGr05 = "/graph05.txt";//  Hz              charInts5[42]     dateiGr05   /chartdiv5.js
  



byte toggle_client = 0; 

  WiFiClient wifiClient;
  PubSubClient client(wifiClient);

  long lastMsg = 0;
  char msg[50];
  int value = 0;
  int ledState2 = 0;
  uint8_t mqttReconCount = 0;
  bool mqtt_con_err = false;
 //**************************************************************************************




// testOutput:  takes the test function name called, the test case name and expected and recieved messages,
// compares both and prints out the result.
// If the test passed, true is returned - else false.
bool testOutput2(ModbusMessage expected, ModbusMessage received) {
  testsExecuted++;

  if (expected == received) {
    testsPassed++;
    //if (printPassed) Serial.printf("%s, %s - passed.\n");
    return true;
  } 

  //Serial.printf("%s, %s - failed:\n");
  //Serial.print("   Expected:");
  //for (auto& b : expected) {
    //Serial.printf(" %02X", b);
  //}

  if (expected.size() == 1) {
    ModbusError me((Error)expected[0]);
   // Serial.printf(" %s", (const char *)me);
  }
  //Serial.println();
  //Serial.print("   Received:");
  //for (auto& b : received) {
    //Serial.printf(" %02X", b);
  //}

  if (received.size() == 1) {
    ModbusError me((Error)received[0]);
   // Serial.printf(" %s", (const char *)me);
  }
 // Serial.println();
  
  return false;
}




  // mb_response_size_rtu = mb_response_size_rtu + MM_data.size();
  //  Serial.println(String(mb_response_size_rtu));
  //Serial.println(mb_response_size_rtu);

// testOutput:  takes the test function name called, the test case name and expected and recieved messages,
// compares both and prints out the result.
// If the test passed, true is returned - else false.
uint8_t bb;
bool testOutput( ModbusMessage expected, ModbusMessage received) {
  
  //Serial.println("------testOutput------");
  testsExecuted++;
  count_in = 0;
  count_out = 0;
  mb_Acknowledge = false;
  
   //if (expected == received) { }
  
   //Serial.print("   Expected:");
  for (auto& b : expected) {
    //Serial.printf(" %02X", b);
    bb = b;
    count_out ++;
  }

  if (expected.size() == 1) {
    ModbusError me((Error)expected[0]);
    //Serial.printf(" %s", (const char *)me);
  }
  
   //Serial.println();
   //Serial.print("   Received:");
  for (auto& b : received) {
   // Serial.printf(" %02X", b);
    bb = b;
    count_in ++;
  }

  // Serial.println("received.size() " + received.size());
  
  received_size = received_size + received.size();
 // s_received_size = String(received_size);
  

  if (expected == received || received.size() == 1 || count_out == count_in) {  
    ModbusError me((Error)received[0]);
   // Serial.printf(" %s", (const char *)me);
    mb_Acknowledge = true;
    mb_Acknowledge_s = (const char *)me;
  }
 
  return false;
}


int Tokenb = 1;
uint8_t mb_idscan = 1;
bool gModbusValupdateFlag = false;
uint8_t mb_afrg_Radon = 0;

// Helper function to convert hexadecimal ([0-9A-F]) digits in a char array into a vector of bytes
ModbusMessage makeVector(const char *text) {
  ModbusMessage rv;            // The vector to be returned
  uint8_t byte = 0;
  uint8_t nibble = 0;
  bool tick = false;             // Counting nibbles
  bool useIt = false;            // true, if a hex digit was read
  const char *cp = text;
  //Serial.println("-------makeVector-------");
  // Loop the char array
  while (*cp) {
    // Is it a decimal digit?
    if ((*cp >= '0' && *cp <= '9')) {
      // Yes. Convert it to a number 0-9
      nibble = (*cp - '0');
      // Flag to use the digit
      useIt = true;
    // No decimal, but a hex digit A-F?
    } else if (*cp >= 'A' && *cp <= 'F') {
      // Yes. Convert it to a number 10-15
      nibble = (*cp - 'A' + 10);
      // Flag to use the digit
      useIt = true;
    // No hexadecimal digit, ignore it.
    } else {
      useIt = false;
    }
    // Shall we use the digit?
    if (useIt) {
      // Yes. Move the previous 4 bits up
      byte <<= 4;
      // add in the digit
      byte |= nibble;
      // Are we at the second nibble of a byte?
      if (tick) {
        // Yes. put the byte into the vector and clear it to be re-used.
        rv.push_back(byte);
        byte = 0;
      }
      // Count up used nibbles
      tick = !tick;
    }
    cp++;
  }
  return rv;
}


//**************************************************************



//**********************************************************
#define FORMAT_SPIFFS_IF_FAILED true

void listDir(fs::FS &fs, const char * dirname, uint8_t levels){
    Serial.printf("Listing directory: %s\r\n", dirname);

    File root = fs.open(dirname);
    if(!root){
        Serial.println("- failed to open directory");
        return;
    }
    if(!root.isDirectory()){
        Serial.println(" - not a directory");
        return;
    }

    File file = root.openNextFile();
    while(file){
        if(file.isDirectory()){
            Serial.print("  DIR : ");
            Serial.println(file.name());
            if(levels){
                listDir(fs, file.path(), levels -1);
            }
        } else {
            Serial.print("  FILE: ");
            Serial.print(file.name());
            Serial.print("\tSIZE: ");
            Serial.println(file.size());
        }
        file = root.openNextFile();
    }
}

void readFile(fs::FS &fs, const char * path){
    Serial.printf("Reading file: %s\r\n", path);

    File file = fs.open(path);
    if(!file || file.isDirectory()){
        Serial.println("- failed to open file for reading");
        return;
    }

    Serial.println("- read from file:");
    while(file.available()){
        Serial.write(file.read());
    }
    file.close();
}


void readFile_web(fs::FS &fs, const char * path){
    Serial.printf("Reading file: %s\r\n", path);

    File file = fs.open(path);
    if(!file || file.isDirectory()){
        Serial.println("- failed to open file for reading");
        return;
    }

    Serial.println("- read from file:");
    while(file.available()){
        //Serial.write(file.read());
        //client.println(file.read());
    }
    file.close();
}

void writeFile(fs::FS &fs, const char * path, const char * message){
    Serial.printf("Writing file: %s\r\n", path);

    File file = fs.open(path, FILE_WRITE);
    if(!file){
        Serial.println("- failed to open file for writing");
        return;
    }
    if(file.print(message)){
        Serial.println("- file written");
    } else {
        Serial.println("- write failed");
    }
    file.close();
}

void appendFile(fs::FS &fs, const char * path, const char * message){
    Serial.printf("Appending to file: %s\r\n", path);

    File file = fs.open(path, FILE_APPEND);
    if(!file){
        Serial.println("- failed to open file for appending");
        return;
    }
    if(file.print(message)){
        Serial.println("- message appended");
    } else {
        Serial.println("- append failed");
    }
    file.close();
}

void renameFile(fs::FS &fs, const char * path1, const char * path2){
    Serial.printf("Renaming file %s to %s\r\n", path1, path2);
    if (fs.rename(path1, path2)) {
        Serial.println("- file renamed");
    } else {
        Serial.println("- rename failed");
    }
}

void deleteFile(fs::FS &fs, const char * path){
    Serial.printf("Deleting file: %s\r\n", path);
    if(fs.remove(path)){
        Serial.println("- file deleted");
    } else {
        Serial.println("- delete failed");
    }
}

void testFileIO(fs::FS &fs, const char * path){
    Serial.printf("Testing file I/O with %s\r\n", path);

    static uint8_t buf[512];
    size_t len = 0;
    File file = fs.open(path, FILE_WRITE);
    if(!file){
        Serial.println("- failed to open file for writing");
        return;
    }

    size_t i;
    Serial.print("- writing" );
    uint32_t start = millis();
    for(i=0; i<2048; i++){
        if ((i & 0x001F) == 0x001F){
          Serial.print(".");
        }
        file.write(buf, 512);
    }
    Serial.println("");
    uint32_t end = millis() - start;
    Serial.printf(" - %u bytes written in %u ms\r\n", 2048 * 512, end);
    file.close();

    file = fs.open(path);
    start = millis();
    end = start;
    i = 0;
    if(file && !file.isDirectory()){
        len = file.size();
        size_t flen = len;
        start = millis();
        Serial.print("- reading" );
        while(len){
            size_t toRead = len;
            if(toRead > 512){
                toRead = 512;
            }
            file.read(buf, toRead);
            if ((i++ & 0x001F) == 0x001F){
              Serial.print(".");
            }
            len -= toRead;
        }
        Serial.println("");
        end = millis() - start;
        Serial.printf("- %u bytes read in %u ms\r\n", flen, end);
        file.close();
    } else {
        Serial.println("- failed to open file for reading");
    }
}
//***********************************************************


String divonc01 = "<div class='zonehead'><a href='#Status'>Status<img></a></div>";
String divonc01h = "<div class='zonehead' style='display: none;'><a href='#Status'>Status<img></a></div>";
String div_c01 = divonc01;

String divonc02 = "<div class='zonehead'><a href='#IP Setting'>IP Setting<img></a></div>";
String divonc02h = "<div class='zonehead' style='display: none;'><a href='#IP Setting'>IP Setting<img></a></div>";
String div_c02 = divonc02;

String divonc03 = "<div class='zonehead'><a href='#TCP Setting'>TCP Setting<img></a></div>";
String divonc03h = "<div class='zonehead' style='display: none;'><a href='#TCP Setting'>TCP Setting<img></a></div>";
String div_c03 = divonc03;

String divonc04 = "<div class='zonehead'><a href='#RS485 Setting'>RS485 Setting<img></a></div>";
String divonc04h = "<div class='zonehead' style='display: none;'><a href='#RS485 Setting'>RS485 Setting<img></a></div>";
String div_c04 = divonc04;
//   style='display: none;'

String divonc05 = "<div class='zonehead'><a href='#Sensor Values'>Sensor Werte<img></a></div>";
String divonc05h = "<div class='zonehead' style='display: none;'><a href='#Sensor Values'>Sensor Werte<img></a></div>";
String div_c05 = divonc05;

String divonc06 = "<div class='zonehead'><a href='#Mesh'>Mesh<img></a></div>";
String divonc06h = "<div class='zonehead' style='display: none;'><a href='#Mesh'>Mesh<img></a></div>";
String div_c06 = divonc06;

String divonc07 = "<div class='zonehead'><a href='#MQTT'>MQTT<img></a></div>";
String divonc07h = "<div class='zonehead' style='display: none;'><a href='#MQTT'>MQTT<img></a></div>";
String div_c07 = divonc07;

String divonc08 = "<div class='zonehead'><a href='#Cloud'>Cloud<img></a></div>";
String divonc08h = "<div class='zonehead' style='display: none;'><a href='#Cloud'>Cloud<img></a></div>";
String div_c08 = divonc08;

String divonc09 = "<div class='zonehead'><a href='#LED'>LED<img></a></div>";
String divonc09h = "<div class='zonehead' style='display: none;'><a href='#LED'>LED<img></a></div>";
String div_c09 = divonc09;

String divonc10 = "<div class='zonehead'><a href='#Push'>Push Setting<img></a></div>";
String divonc10h = "<div class='zonehead' style='display: none;'><a href='#Push'>Push Setting<img></a></div>";
String div_c10 = divonc10;

String divonc11 = "<div class='zonehead'><a href='#Fan'>FAN<img></a></div>";
String divonc11h = "<div class='zonehead' style='display: none;'><a href='#Fan'>FAN<img></a></div>";
String div_c11 = divonc11;




// p_mesh_in = "meshin' onclick='meshin()'>";
// "var s_mesh_in =  \"<div id='"+ div_c01 + "</div>\";" +        <div id='"+ div_c01 + "</div>


// Auxiliar variables to store the current output state
#define DNS_INPUTNAME_LEN   10
#define MB_PORT_LEN   4
String output26State = "off";
String output27State = "off";

String pvalue_t = "";
String p_inputstaticip = "152.158.158.251";
String p_inputipchange = "0";
String p_inputsubnetmask = "255.255.255.0";
String p_inputgateway = "192.168.178.1";
String p_inputwifidns = "192.168.178.1";
String p_inputntp = "pool.ntp.org";
char p_inputnamec[DNS_INPUTNAME_LEN+1] = "modbus";
String p_inputname = "modbus";
String p_inputtcpport = "502";
char p_inputtcpportc[MB_PORT_LEN+1] = "502";
String p_inputwebport = "80";
char p_inputwebportc[MB_PORT_LEN+1] = "80";
String p_inputbaudrate = "9600";
String p_inputdatabits = "8";
String p_inputparity = "none";
String p_inputstopbit = "1";
String p_inputrestimeout = "1000";
String p_MB_scan_resault = " -- ";
String p_uhrzeit = "00.00.00 00:00:00";
String p_time = "00:00:00";
String p_uhrzeit_last = "00.00.00 00:00:00";
String p_uhrzeit2 = "00.00.00 00:00";


#define IP_ROOM_LEN 15
char p_inputip01c[IP_ROOM_LEN+1] = "000.000.000.000";
char p_inputip02c[IP_ROOM_LEN+1] = "000.000.000.000";
char p_inputip03c[IP_ROOM_LEN+1] = "000.000.000.000";
char p_inputip04c[IP_ROOM_LEN+1] = "000.000.000.000";
char p_inputip05c[IP_ROOM_LEN+1] = "000.000.000.000";
String p_inputip01 = "000.000.000.000";
String p_inputip02 = "000.000.000.000";
String p_inputip03 = "000.000.000.000";
String p_inputip04 = "000.000.000.000";
String p_inputip05 = "000.000.000.000";
String p_ipparson = "0";
String p_room01 = "----------";
String p_room02 = "----------";
String p_room03 = "----------";
String p_room04 = "----------";
String p_room05 = "----------";
byte ip_write_sel = 0;

String divhidden = "<div id='hidden' hidden>";
String divhidden2 = "<tr style='display: none;'>";   
String divon2 = "<tr>";  
String divon = "<div id='on'>";

String div01 = divhidden;
String div02 = divhidden;
String div03 = divhidden;
String div04 = divhidden;
String div05 = divhidden;

String divpw = divhidden2;
String divsetting = divhidden2;



String divrn = "<div id=\"webpage\">";
String divr = "<div id=\"webpager\">";
String divg = "<div id=\"webpageg\">";
String div01rg = divr;
String div02rg = divr;
String div03rg = divr;
String div04rg = divr;
String div05rg = divr;

String request_remoteIP_temp = "192.168.178.100";
String request_remoteIP_01 = "192.168.178.100";
String request_remoteIP_02 = "192.168.178.100";
String request_remoteIP_03 = "192.168.178.100";
String request_remoteIP_04 = "192.168.178.100";


String divgrau = "<div id=\"webpagegrau\">";
String divgreen = "<div id=\"webpagegruen\">";
String divred = "<div id=\"webpagered\">";
String divfan1 = divgrau;
String divfan2 = divgrau;
String divfan3 = divgrau;
String divfan4 = divgrau;
String divfan5 = divgrau;
String divfan6 = divgrau;
String divfan7 = divgrau;

String divpwgrau = "<div id=\"divpwgrau\">";
String divpwgreen = "<div id=\"divpwgreen\">";
String divpower01 = divpwgrau;
String divpower02 = divpwgrau;
String divpower03 = divpwgrau;
String divpower04 = divpwgrau;
String divpower05 = divpwgrau;
String divpower06 = divpwgrau;
String divpower07 = divpwgrau;
String divpower08 = divpwgrau;
String divpower09 = divpwgrau;
String divpower10 = divpwgrau;
String divpower11 = divpwgrau;
String divpower12 = divpwgrau;
String divpower13 = divpwgrau;
String divpower14 = divpwgrau;
String divpower15 = divpwgrau;
String divpower16 = divpwgrau;
String divpower17 = divpwgrau;
String divpower18 = divpwgrau;
String divpower19 = divpwgrau;
String divpower20 = divpwgrau;


byte charcount = 0;
byte chartumlauf = 0;
byte charcountTime = 0;
//String chartime[51] = {"2021.06.01 14:30"," "," ","2021.06.01 14:30"," ","","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," ","","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," "," ","2021.06.01 14:30"," ","","2021.06.01 14:30"," "," "};
uint16_t charInts[44];
uint16_t charInts3[44];
uint16_t charInts4[44];
uint16_t charInts5[44];
String chartimexx = "              ";
String chartime00 = "00.00.00 00:00";
String chartime00a = "              ";
String chartime00b = "              ";
String chartime01 = "              ";
String chartime01a = "              ";
String chartime01b = "              ";
String chartime02 = "              ";
String chartime02a = "              ";
String chartime02b = "              ";
String chartime03 = "              ";
String chartime03a = "              ";
String chartime03b = "              ";
String chartime04 = "              ";
String chartime04a = "              ";
String chartime04b = "              ";
String chartime05 = "              ";
String chartime05a = "              ";
String chartime05b = "              ";
String chartime06 = "              ";
String chartime06a = "              ";
String chartime06b = "              ";
String chartime07 = "              ";
String chartime07a = "              ";
String chartime07b = "              ";
String chartime08 = "              ";
String chartime08a = "              ";
String chartime08b = "              ";
String chartime09 = "              ";
String chartime09a = "              ";
String chartime09b = "              ";
String chartime10 = "              ";
String chartime10a = "              ";
String chartime10b = "              ";
String chartime11 = "              ";
String chartime11a = "              ";
String chartime11b = "              ";
String chartime12 = "              ";
String chartime12a = "              ";
String chartime12b = "              ";
String chartime13 = "              ";
String chartime13a = "              ";
String chartime13b = "              ";
String chartime14 = "              ";
String chartime14a = "              ";
String chartime14b = "              ";


String stringtime = "labels : ['2021-05-02 01:01','','2021-06-01 00:02','','2021-06-01 00:03','','2021-06-01 00:04','','2021-05-31 23:05','','2021-05-31 23:06','','2021-05-31 00:07','','2021-05-31 00:08','','2021-05-31 00:09','','2021-05-31 00:10','','0000-00-00 00:11','','00-00-00 00:12','',],";
String stringdata = "data : [38095, 35056, 35056, 33507, 33057, 35307, 35005, 30055, 25090, 29055, 34057, 30750, 37050, 35700, 35045, 31054, 30145, 31504, 28506, 28056, 28650, 28605, 28052, 28052, 35005, 30055, 25090, 29055, 34057, 30750, 37050, 35700, 35045, 31054, 30145, 31504, 28506, 28056, 28650, 28605, 28052, 28052, ],";

String stringtime2 = "labels : ['1','2','3','4','5','6','7','8','9','10','11','12','13','Now',],";
String stringdata2 = "data : [2550, 4241, 4141, 1422, 4554, 4278, 3232, 4225, 4120, 3614, 5025, 5056, 4643, 4114,],";

String rgbchartvorgabeNor = "rgb(62,149,205)";
String rgbchartvorgabeSel = "rgb(51,255,0)";
String rgbchart01 = "rgb(62,149,205)";
String rgbchart02 = "rgb(62,149,205)";
String rgbchart03 = "rgb(62,149,205)";
String rgbchart04 = "rgb(62,149,205)";
String rgbchart05 = "rgb(62,149,205)";
String rgbchart06 = "rgb(62,149,205)";
String rgbchart07 = "rgb(62,149,205)";
String rgbchart08 = "rgb(62,149,205)";
String rgbchart09 = "rgb(62,149,205)";
String rgbchart10 = "rgb(62,149,205)";
String rgbchart11 = "rgb(62,149,205)";
String rgbchart12 = "rgb(62,149,205)";
String rgbchart13 = "rgb(62,149,205)";
String rgbchart14 = "rgb(51,255,0)";




byte chart_page = 0;
bool gauge_page = false;
byte pauseWebpage = 5;
bool timeSyncron = false;

#define MQTT_CLIENTID_LEN   48
#define MQTT_SERVER_LEN     40
#define MQTT_PORT_LEN        4
#define MQTT_USER_LEN       40
#define MQTT_PASS_LEN       40
#define MQTT_TOPIC          50

char subTopic[]         = "ledControl" ;     //payload[0] will control/set LED
char pubTopic[]         = "ledState2"  ;       //payload[0] will have ledState value

bool gMQTTUpdateFlag = false;



bool mqttdAktiveConfig = false;



String p_mqonoff = "on";



String p_inputmqclient = "client";
char p_inputmqclientc[MQTT_CLIENTID_LEN+1] = "client";

String p_inputmqserver = "mqtt.io";
char p_inputmqserverc[MQTT_SERVER_LEN+1] = "mqtt.io";

String p_inputmqport = "1883";
uint16_t p_inputmqporti = 1883;

String p_inputmquser = "user";
char p_inputmquserc[MQTT_USER_LEN+1] = "user";

String p_inputmqpass = "pass";
char p_inputmqpassc[MQTT_PASS_LEN+1] = "pass";

String p_inputmqtopic = "radonvalue";             //radonvalue/feeds/radon.radon
char p_inputmqtopicc[MQTT_TOPIC+1] = "radonvalue";

String p_inputmqtopic1 = "co2value";             //co2value/feeds/radon.radon
char p_inputmqtopic1c[MQTT_TOPIC+1] = "co2value";

String p_inputmqtopic2 = "tvocvalue";             //TVOCvalue/feeds/radon.radon
char p_inputmqtopic2c[MQTT_TOPIC+1] = "tvocvalue";

String p_uptime = "0";
uint16_t esp32_uptime = 0;

String p_rs485_data = "0";
String p_rs485_data_b = "0";
String p_rs485s_data = "0";
String p_rs485s_data_b = "0";

String mb_werteaktual = "Messwerte &auml;lter als 10min";
String mq_werteaktual = "MQTT deaktiviert";
String cloud_werteaktual = "Cloud deaktiviert";
String cloud_aktiv = " class='Stil1' ";
String mesh_aktiv = " class='Stil1' ";
String mQtt_aktiv = " class='Stil1' ";
String lEd_aktiv = " class='Stil1' "; 
String push_aktiv = " class='Stil1' "; 
String led_werteaktual = "LED deaktiviert";
String mesh_werteaktual = "Mesh deaktiviert";
String mesh_01_val = " class='Stil1' ";
String mesh_02_val = " bgcolor='#00CCCC' ";
String mesh_03_val = " class='Stil1' ";
String mesh_04_val = " class='Stil1' ";
String mesh_05_val = " class='Stil1' ";

String push_werteaktual = "Push deaktiviert";
String van_werteaktual = "FAN deaktiviert";
String van_aktiv = " class='Stil1' "; 

String splitAdress = p_inputstaticip;
int count_split = 0;

String strings[10]; // Max amount of strings anticipated

char p_inputntp_char[30] = "";

String zone_view = "";
//--------------------------------------------------------------------------------------------

bool ledAktiveConfig = false;
bool gledUpdateFlag = false;
bool vanAktiveConfig = false;
bool gvanUpdateFlag = false;

String p_ledonoff = "off";

#define LED_RED_LEN     5
String p_inputledred = "600";
char p_inputledredc[LED_RED_LEN+1] = "600";

#define LED_ORANGE_LEN     5
String p_inputledorange = "300";
char p_inputledorangec[LED_ORANGE_LEN+1] = "300";

#define LED_GREEN_LEN     5
String p_inputledgreen = "100";
char p_inputledgreenc[LED_GREEN_LEN+1] = "100";

#define LED_Funktion_LEN     5
String p_inputledfunk = "radon";
char p_inputledfunkc[LED_Funktion_LEN+1] = "radon";

#define LED_06_LEN     5
String p_inputledgamma = "200";
char p_inputledgammac[LED_06_LEN+1] = "200";


String p_vanonoff = "off";
String p_inputvanmax = "600";
String p_inputvanmin = "300";


//Pushover  Pushsafer
String PushsaferKey = "11111NoaO1ohRpg222226677     ";
bool pushAktiveConfig = false;
bool gpushUpdateFlag = false;
bool gpushUpdateFlag_SR = false;
String p_pushonoff = "off";

#define PUSH_KEY_LEN     30
String p_pushkey = "11111NoaO1ohRpg222226677     ";   //XqLUBNqaO1oaRpggaX0h
char p_pushkeyc[PUSH_KEY_LEN+1] = "11111NoaO1ohRpg222226677";   //XqLUBNqaO1oaRpggaX0h

#define PUSH_MESSAGE_LEN     100
String p_pushmessage = "ESP Push Message                                                                                   ";  
char p_pushmessagec[PUSH_MESSAGE_LEN+1] = "ESP Push Message";   

#define PUSH_TITEL_LEN     30
String p_pushtitle = "ESP Push Titel               ";  
char p_pushtitlec[PUSH_TITEL_LEN+1] = "ESP Push Titel";   

#define PUSH_SOUND_LEN     3
String p_pushsound = "8";  
char p_pushsoundc[PUSH_TITEL_LEN+1] = "8";  

#define PUSH_Vibration_LEN     3
String p_pushvibration = "3";  
char p_pushvibrationc[PUSH_Vibration_LEN+1] = "3";  

#define PUSH_ICON_LEN     3
String p_pushicon = "91";  
char p_pushiconc[PUSH_ICON_LEN+1] = "91"; 

#define PUSH_Iconcolor_LEN     7
String p_pushiconcolor = "FF0000";  
char p_pushiconcolorc[PUSH_Iconcolor_LEN+1] = "FF0000"; 

#define PUSH_Priority_LEN     3
String p_pushpriority = "2";  
char p_pushpriorityc[PUSH_Priority_LEN+1] = "2"; 

#define PUSH_Device_LEN     8
String p_pushdevice = "41828";  
char p_pushdevicec[PUSH_Device_LEN+1] = "41828"; 

#define PUSH_VALUE_LEN     5
String p_pushvalue = "300";  
char p_pushvaluec[PUSH_VALUE_LEN+1] = "300"; 
uint16_t p_pushvaluei = 300;

uint16_t push_val_vorgabe = 0;

bool minUpdateFlag = false;
bool cloudAktiveConfig = false;
bool gcloudUpdateFlag = false;
String p_cloudonoff = "off";

#define CLOUD_SERVER_LEN     40
String p_inputcloudserver = "rec.radoncloud.com";
char p_inputcloudserverc[CLOUD_SERVER_LEN+1] = "rec.radoncloud.com";

#define CLOUD_USER_LEN     20
String p_inputclouduser = "user";
char p_inputclouduserc[CLOUD_SERVER_LEN+1] = "user";

#define CLOUD_DEVICE_LEN     5
String p_inputclouddevice = "5487";
char p_inputclouddevicec[CLOUD_SERVER_LEN+1] = "5487";

#define CLOUD_KEY_LEN     40
String p_inputcloudkey = "3as44643euW";
char p_inputcloudkeyc[CLOUD_KEY_LEN+1] = "3as44643euW";

#define DB_PAGE_LEN 20
String p_inputcloudpage = "s_get.php";
char p_inputcloudpagec[DB_PAGE_LEN+1] = "s_get.php";


String p_inputpasswort = "";
String p_inputpasswort_vorgabe = "root";
String p_inputpasswort_admin = "admin#x2";  
String p_inputpwchange = "         ";
String p_inputsavebit = "savebit";
String p_inputsavebit_txt = "";
String p_logout = "logout' onclick='logout()'>";
String p_login = "login' onclick='login()'>";
String p_logout_or_in = p_login;

String p_chartout = "chartout' onclick='chartout()'>";
String p_chart2out = "chart2out' onclick='chart2out()'>";
String p_chartin = "chartin' onclick='chartin()'>";
String p_chart2in = "chart2in' onclick='chart2in()'>";
String p_chart_or_in = p_chartin;
String p_chart2_or_in = p_chart2in;
String p_chartco2 = "chart2in' onclick='chart2in()'>";

String p_co2_in = "co2in' onclick='co2in()'>";


String p_mesh_in_h = "o'>";
String p_mesh_in_v = "meshin' onclick='meshin()'>";
String p_mesh_in = p_mesh_in_v;

String p_meshchart_in2_h = " "; 
String p_meshchart_in2_v = "<div id='chartout4' onclick=\"top.location.href='/get?inputchart=4'\"></div>";  
String p_meshchart_in2 = p_meshchart_in2_h; 


String p_van_in_h = "o'>";
String p_van_in_v = "vanin' onclick='vanin()'>";
String p_van_in = p_van_in_v;

String p_vanchart_in2_h = " "; 
String p_vanchart_in2_v = "<div id='chartout6' onclick=\"top.location.href='/get?inputchart=6'\"></div>";  
String p_vanchart_in2 = p_vanchart_in2_h; 
String p_vanconf_in3_h = " "; 
String p_vanconf_in3_v = "<div id='chartout5' onclick=\"top.location.href='/get?inputchart=5'\"></div>";  
String p_vanconf_in3 = p_vanconf_in3_h; 

String p_vanchart_in_h = "o'>"; 
String p_vanchart_in_v = "chartout6' onclick='chartout6()'>";  // s_van_onoff  p_vanonoff
String p_vanchart_in = p_vanchart_in_h; 
 

String p_getapmodus = "";
String p_getreboot = "";
String p_getsearch = "";
String p_getscan = "";
String p_getdelete = "";
String p_getgetgauge = "";
String p_getradonaktual = "";
String p_getTG1 = "";
String p_getTG2 = "";
String p_getTG3 = "";
String p_getTG4 = "";


uint8_t p_sett01t = 0;
uint8_t p_sett02t = 0;
uint8_t p_sett03t = 0;
uint8_t p_sett04t = 0;
uint8_t p_sett05t = 0;
uint8_t p_sett06t = 0;
uint8_t p_sett07t = 0;
uint8_t p_sett08t = 0;
uint8_t p_sett09t = 0;
uint8_t p_sett10t = 0;
uint8_t p_sett11t = 0;

uint8_t p_sett01 = 0;
uint8_t p_sett02 = 0;
uint8_t p_sett03 = 0;
uint8_t p_sett04 = 0;
uint8_t p_sett05 = 1;
uint8_t p_sett06 = 0;
uint8_t p_sett07 = 0;
uint8_t p_sett08 = 0;
uint8_t p_sett09 = 0;
uint8_t p_sett10 = 0;
uint8_t p_sett11 = 0;
String p_settxx = "  ";
bool bit_settx = false;

String p_sett01_1 = "<input type='checkbox' id='setting01' name='setting01' value='1' checked='checked'>";
String p_sett01_0 = "<input type='checkbox' id='setting01' name='setting01' value='1'>";
String p_sett01_s = p_sett01_0;

String p_sett02_1 = "<input type='checkbox' id='setting02' name='setting02' value='1' checked='checked'>";
String p_sett02_0 = "<input type='checkbox' id='setting02' name='setting02' value='1'>";
String p_sett02_s = p_sett02_0;

String p_sett03_1 = "<input type='checkbox' id='setting03' name='setting03' value='1' checked='checked'>";
String p_sett03_0 = "<input type='checkbox' id='setting03' name='setting03' value='1'>";
String p_sett03_s = p_sett03_0;

String p_sett04_1 = "<input type='checkbox' id='setting04' name='setting04' value='1' checked='checked'>";
String p_sett04_0 = "<input type='checkbox' id='setting04' name='setting04' value='1'>";
String p_sett04_s = p_sett04_0;

String p_sett05_1 = "<input type='checkbox' id='setting05' name='setting05' value='1' checked='checked'>";
String p_sett05_0 = "<input type='checkbox' id='setting05' name='setting05' value='1'>";
String p_sett05_s = p_sett05_1;

String p_sett06_1 = "<input type='checkbox' id='setting06' name='setting06' value='1' checked='checked'>";
String p_sett06_0 = "<input type='checkbox' id='setting06' name='setting06' value='1'>";
String p_sett06_s = p_sett06_0;

String p_sett07_1 = "<input type='checkbox' id='setting07' name='setting07' value='1' checked='checked'>";
String p_sett07_0 = "<input type='checkbox' id='setting07' name='setting07' value='1'>";
String p_sett07_s = p_sett07_0;

String p_sett08_1 = "<input type='checkbox' id='setting08' name='setting08' value='1' checked='checked'>";
String p_sett08_0 = "<input type='checkbox' id='setting08' name='setting08' value='1'>";
String p_sett08_s = p_sett08_0;

String p_sett09_1 = "<input type='checkbox' id='setting09' name='setting09' value='1' checked='checked'>";
String p_sett09_0 = "<input type='checkbox' id='setting09' name='setting09' value='1'>";
String p_sett09_s = p_sett09_0;

String p_sett10_1 = "<input type='checkbox' id='setting10' name='setting10' value='1' checked='checked'>";
String p_sett10_0 = "<input type='checkbox' id='setting10' name='setting10' value='1'>";
String p_sett10_s = p_sett10_0;

String p_sett11_1 = "<input type='checkbox' id='setting11' name='setting11' value='1' checked='checked'>";
String p_sett11_0 = "<input type='checkbox' id='setting11' name='setting11' value='1'>";
String p_sett11_s = p_sett11_0;

bool tG1_page = false;
bool tG2_page = false;
bool tG3_page = false;
bool tG4_page = false;
uint8_t  tG_x_page = 0;
byte msg_TG[3];
byte msg_TGt;
byte msg_TGp[3];
byte msg_TGm[3];

uint8_t  select_reboot = 0;
uint8_t  select_apmodus = 0;
uint8_t  select_slave_scan = 1;

uint8_t  val_sensor_aktual = 0;
uint8_t  abfrage_eingabe = 0;
uint8_t  abfr_mb_finish = 0;

uint8_t page_select = 1;
uint8_t web_write_ok = 0;
uint8_t Web_logout_time = 0;
uint8_t web_write_green_red = 0;
uint8_t web_reload = 0;
uint8_t MB_scan_resault = 0;

const char* PARAM_STRING = "inputString";
const char* PARAM_INT = "inputInt";
const char* PARAM_FLOAT = "inputFloat";

// Assign output variables to GPIO pins
const int output26 = 26;
const int output27 = 27;

uint8_t m_max_clients = 4;
uint32_t mbus_baud = 9600;  
uint16_t resp_tim_out = 1000;  


// Current time
uint32_t currentTime = millis();
// Previous time
uint32_t previousTime = 0; 
// Define timeout time in milliseconds (example: 2000ms = 2s)
const long timeoutTime = 2000;
//************************************************************


uint32_t lastMs = 0;
uint32_t boot_min = 0;
uint32_t boot_hour = 0;
uint32_t ms_timer = millis();
uint32_t ms1 = millis();
uint32_t ms2 = millis();
uint32_t ms3 = millis();
uint32_t ms4 = millis();
uint32_t ms5 = millis();
uint32_t ms6 = millis();
uint32_t msLed = 0;
uint32_t msPush = 0;
uint32_t msRs485 = millis();
uint32_t msRs485_start = millis();
float msRs485_diff = 0;
uint32_t msRs485_eintr = 0;
bool gbootUpdateFlag = true;

bool g_01sec_UpdateFlag = true;
bool g_10sec_UpdateFlag = true;
bool g_60sec_UpdateFlag = true;
bool g_05min_UpdateFlag = true;
bool g_60min_UpdateFlag = true;

unsigned long runMillis= millis();
unsigned long allSeconds=millis()/1000;
int runHours= allSeconds/3600;
int secsRemaining=allSeconds%3600;
int runMinutes=secsRemaining/60;
int runSeconds=secsRemaining%60;
char tbuf[21];



const char* PARAM_INPUT_1 = "output";
const char* PARAM_INPUT_2 = "state";


const char * html = "<p>Temperature: %PLACEHOLDER_TEMPERATURE% ºC</p><p>Humidity: %PLACEHOLDER_HUMIDITY% %</p>";
String processor3(const String& var)
{
  //Serial.println(var);
  if(var == "PLACEHOLDER_TEMPERATURE"){
    return String(random(10, 20));
  }
  else if(var == "PLACEHOLDER_HUMIDITY"){
    return String(random(0, 50));
  }
  return String();
}

#ifdef RADONCLOUD_DEBUG
WiFiClient googleClient;
#endif

// Set LED GPIO
const int ledPin = 2;
// Stores LED state
String ledState;

// Replaces placeholder with LED state value
String processor2(const String& var){
  //Serial.println(var);
  if(var == "STATE"){
    if(digitalRead(ledPin)){
      ledState = "ON";
    }
    else{
      ledState = "OFF";
    }
    Serial.print(ledState);
    return ledState;
  }
  return String();
}
//--------------------------------------------------------------------------------------------------------

String pSTR1 = R"=====(
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
)=====";



String SendHTMLe(String r0_val1, String r0_val2, String r0_val3,String r1_val1, String r1_val2, String r1_val3, String r2_val1, String r2_val2, String r2_val3, String r3_val1, String r3_val2, String r3_val3, String r4_val1, String r4_val2, String r4_val3, String r5_val1, String r5_val2, String r5_val3)
{
  String ptr = "<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'> <html>\n";
  ptr += "<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'>\n";
  ptr += "<meta name=\"author\" content=\"Holger Gebauer\">\n";
  ptr += "<head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">\n";
  ptr += "<title>Measured Air Quality</title>\n";
  ptr += "<link HREF=\"favicon.ico\" REL=\"SHORTCUT ICON\" title=\"Modbus RTU to TCP WiFi Gateway/Server\">\n";
  ptr += "<style>html { font-family: Helvetica; display: inline-block; margin: 0px auto; text-align: center;}\n";
  ptr += "body{margin-top: 50px;} h1 {color: #444444;margin: 50px auto 30px;}\n";
  ptr += "p {font-size: 24px;color: #444444;margin-bottom: 10px;}\n";
 
  ptr += "#header{height: 80px;border-style: solid;border-width: 1px 0px 1px 0px;border-color: black;color: white;-webkit-tap-highlight-color: rgba(0,0,0,0);background: #b0bdda;background: -moz-linear-gradient(top,  #AAB6DF 0%, #4A6B9D 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#AAB6DF), color-stop(100%,#4A6B9D));background: -webkit-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);background: -o-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);\n";
  ptr += "background: -ms-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);background: linear-gradient(to bottom,  #AAB6DF 0%,#4A6B9D 100%);}\n";  	
  ptr += "select {font-size: .9rem;padding: 2px 5px;}\n";	
  ptr += "@media only screen and (max-device-width: 240px) {#header{height: 70px;}}\n";
  ptr += "#select{font-size: 28px;left:20px;letter-spacing: +1px;color: white;	float: left;width: 100%;height: 100%;position: relative;}\n";
  ptr += "@media only screen and (max-device-width: 240px) {#select{text-indent: 3%;font-size: 18px;}#select!{text-indent: 3%;font-size: 10px;}}\n";
  ptr += "#webpage{background: rgba(0, 0, 0, 0.2);text-align: center;}\n";
  ptr += "#webpager{background: rgba(255, 0, 0, 0.2);text-align: center;}\n";
  ptr += "#webpageg{background: rgba(0, 255, 0, 0.2);text-align: center;}\n";

  ptr += "#chartout{height: 50px;background: rgba(0, 0, 0, 0.4);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout::before{content: \"Config\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiCAYAAAA+stv/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAedJREFUeNrkmM8rBGEYx2dmVxtLyoXacJEkSuJCEiXlIFyWG8lFcnEUFxe//oStLVEcOCq/Dkppb46Sg4tCWu1BMnZ3fN96aDx27JqZd+awT30O877TvM8+z/t+n+dd1TAMxU8LWoz3gEXQBTIurJEA6+D416yIgIkQGAZZQ46Ns/UUlaVgCsyBdrAJtkHIYQR0MAqWwS1o+hFV5lEMpMEzKOfeOqAUPIIMiJjnNOZtAIixtAu5N1uGvqkR36YpPlvROCBS8OaVA2OgPocDk+Cea48MB2bBOWhk4xegH6RkO6BTBIQT3WzuBiS92gM1JL1RO7XAyoROdIAKkLX49RHTcxnYBbWkrI4d6AMnNqKxQWmZF+LrJAWVDlIiaswBCPspRCPgEnT6qYRhc4UNerz4KZ2KpN0IvDpYfAsMcR34bwTOwABtxlzH8AOsgWY2vkINiZKvJYtTO/ZATYSd5uPQ1ILpYOav92XugRcwAY7cVMJCrAQ8gUFwxebqqBilZB7DGOjNsXgb7aEq2RHYs+g7RE1ooN7QcyUMUgEr3p6wYAeyVC4DLjun0TcNLmB8EyaoUrWCBbDjwtXsna5m1eCOjqilEoZB1JBn0/kup18misYSaHHhiiZCfw1WwT6fVP3+g+JTgAEAk1EJ5Os+dK8AAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout1{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout1::before{content: \"Chart Radon\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout1::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout2{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout2::before{content: \"Chart CO2\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout2::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout3{height: 50px;background: rgba(6, 95, 142, 0.33);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout3::before{content: \"Live\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout3::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAAEoSURBVCiRY2AgAljd/w8FfxeD+Ezz/sPBSwWgANv/aWlQkPk/ASjA+VcAppnx/gSQwB+EceexCnCgCXD0/GHwSFFACPD//8Ow/u9yR7gA770/DLXv/183hAkwSv5hEI44/+863FB2kKGq+/9tB6o53wAx1D1YQGz//9MzOt6faAAbOv/vMgX1vWDffAAbWgc0VIG16+zdu3cvMDBp/mEQyTj/7xgDo6CSkpICwtBlBhDHsdcADXVmEN///9SM8vLyAoihb5YiDOV7/4eh7/3/YwKiXWffvXv3gIFJ6w+DSuZ9kKFKEENB3hcy2w90CjQMIAFkATS0HWwoLMQszkENhQeh2Ox7YEPhAoxCSsbGxgYo0QABSBGVVqaAFpW/DVAj+99igikDCAA8f8C9upF8kgAAAABJRU5ErkJggg==);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout5{height: 50px;background: rgba(6, 95, 142, 0.33);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout5::before{content: \"FAN\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout5::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiAQMAAAAEfEm8AAAAA3NCSVQICAjb4U/gAAAABlBMVEX///////9VfPVsAAAAAnRSTlP/AOW3MEoAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAfdEVYdFNvZnR3YXJlAE1hY3JvbWVkaWEgRmlyZXdvcmtzIDi1aNJ4AAAAZklEQVQImUXOsQ3AIBAEwUMOCCkBd2JKcSfQiVuhFEp4ZwSI8z9CcjLRBosRSXSviFPaAj95I0Y3hjENLh7t+M4DbN2BNS2AkRS5lXZWoEYAxcMp5QBC84oEhdngxoaKUReXrWXyA1c3TQEoUwPHAAAAAElFTkSuQmCC);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout6{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout6::before{content: \"Chart FAN\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout6::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";
       

  ptr += "body{ margin: 0px;overflow-y: scroll;font-family: Verdana;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;\n";		
  ptr += "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAJElEQVQIW2NkwAQ+jGhiPgwMDFuQBcECIEUwQbgATBBFACQIALmgBFKywiuGAAAAAElFTkSuQmCC);\n";
  ptr += "-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}\n";

  ptr += "#outLine {\n";
  ptr += "  width: 100%;height: 5px;margin: auto;\n";
  ptr += "  background-image: linear-gradient(to right, #4A6B9D, #4A6B9D);\n";
  ptr += "  border-radius: 1px;}\n";
  ptr += "#line {\n";
  ptr += "  background-image: linear-gradient(to right, #f12711, #f5af19);\n";
  ptr += "  height: 100%;width: 100%;border-radius: 1px;}\n";

  ptr += ".Stil1 {color: #000000;font-weight: bold;font-size: 18px;}\n";
  ptr += ".Stil2 {color: #000000;font-weight: bold;font-size: 24px;}\n";
  ptr += "a:link, a:visited {text-decoration: none;border-bottom: .1em dashed black;color: #000000;}\n";
  ptr += "</style>\n";

  ptr += "<script>\n";

  ptr += "function lineComplete() {let line = document.getElementById(\"line\");\n";
	ptr += "for (let percentage = 0; percentage <= 100; percentage++) {\n";
	ptr += "setTimeout(function() {line.style.width = `${percentage}%`;\n";
	ptr += "if (line.style.width === \"100%\") {undo();}}, percentage * 10);}\n";
	ptr += "function undo() {for (let percent = 100; percent >= 0; percent--) {\n";
	ptr += "setTimeout(function() {line.style.width = `${100 - percent}%`;}, percent * 4.5);}}};\n";	
	ptr += "setTimeout(function(){$(\"#line\").addClass(\"showLine\")},700);\n";

  ptr += "function machAlles(){lineComplete();loadDoc();}\n";

  ptr += "function chartout(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=0'\",100);}\n";

  ptr += "function chartout1(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=1'\",100);}\n";

  ptr += "function chartout2(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=2'\",100);}\n";

  ptr += "function chartout3(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=3'\",100);}\n";

  ptr += "function chartout5(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=5'\",100);}\n";

  ptr += "function chartout6(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=6'\",100);}\n";

  ptr += "setInterval(loadDoc,5000);\n";
  
  ptr += "function loadDoc() {\n";
  ptr += "var xhttp = new XMLHttpRequest();\n";
  ptr += "xhttp.onreadystatechange = function() {\n";
  ptr += "if (this.readyState == 4 && this.status == 200) {\n";
  ptr += "document.body.innerHTML =this.responseText}\n";
  ptr += "};\n";
  ptr += "xhttp.open(\"GET\", \"/\", true);\n";
  ptr += "xhttp.send();\n";

  ptr += "}\n";
 
  ptr += "</script>\n";
  ptr += "</head>\n";
  ptr += "<body class='chartbd' onload=\"machAlles()\">\n";
  ptr += "<div id='header' onclick=\"top.location.href='/get?inputchart=4'\"><div id='select'>Measured <br>Mesh</div>\n";
  ptr += "<div id=\"tt\"><table class='ttab'><tr><td colspan='2' id='temp'></td></tr><tr><td id='temp1'></td><td id='otemp'></td></tr></table></div></div></div>\n";
  ptr += "<div id=\"outLine\"><div id=\"line\"></div></div>\n";

  ptr += "<div id=\"webpage\">\n";
  ptr += "<p>";
  ptr += "<p class=\"Stil2\">Dieser Sensor</p>";  //<a href=\"192.168.178.77/get?inputchart=3\" target=\"_blank\">Dieser Sensor</a>
  ptr += " </p>";
  ptr += "<span class=\"Stil1\">Radon: ";
  ptr += r0_val3;
  ptr += " Bq/m&sup3;<br>";
  ptr += "CO2: ";
  ptr += r0_val1;
  ptr += " ppm<br>";
  ptr += "TVOC: ";
  ptr += r0_val2;
  ptr += " ppb</span>";
  ptr += "</div>\n";
  ptr += "<div><img src='data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAQAAABN/Pf1AAAAC0lEQVR42mNkwAIAACoAAgu1Hc4AAAAASUVORK5CYII=' width='5' height='5'></div>\n";

  ptr += div01;
  ptr += div01rg;
  ptr += "<p>";
  ptr += "<a href=\"http://" + p_inputip01 +"/get?inputchart=3\" target=\"_blank\" class=\"Stil2\">"+ p_room01 +"</a>";   
  ptr += " </p>";
  ptr += "<span class=\"Stil1\">Radon: ";
  ptr += r1_val3;
  ptr += " Bq/m&sup3;<br>";
  ptr += "CO2: ";
  ptr += r1_val1;
  ptr += " ppm<br>";
  ptr += "TVOC: ";
  ptr += r1_val2;
  ptr += " ppb</span>";
  ptr += "</div>\n";
  ptr += "<div><img src='data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAQAAABN/Pf1AAAAC0lEQVR42mNkwAIAACoAAgu1Hc4AAAAASUVORK5CYII=' width='5' height='5'></div>\n";
  ptr += "</div>";

  ptr += div02;
  ptr += div02rg; 
  ptr += "<p>";
  ptr += "<a href=\"http://" + p_inputip02 +"/get?inputchart=3\" target=\"_blank\" class=\"Stil2\">"+ p_room02 +"</a>";   
  ptr += " </p>";
  ptr += "<span class=\"Stil1\">Radon: ";
  ptr += r2_val3;
  ptr += " Bq/m&sup3;<br>";
  ptr += "CO2: ";
  ptr += r2_val1;
  ptr += " ppm<br>";
  ptr += "TVOC: ";
  ptr += r2_val2;
  ptr += " ppb</span>";
  ptr += "</div>\n";
  ptr += "<div><img src='data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAQAAABN/Pf1AAAAC0lEQVR42mNkwAIAACoAAgu1Hc4AAAAASUVORK5CYII=' width='5' height='5'></div>\n";
  ptr += "</div>";


  ptr += div03;
  ptr += div03rg; 
  ptr += "<p>";
  ptr += "<a href=\"http://" + p_inputip03 +"/get?inputchart=3\" target=\"_blank\" class=\"Stil2\">"+ p_room03 +"</a>";   
  ptr += " </p>";
  ptr += "<span class=\"Stil1\">Radon: ";
  ptr += r3_val3;
  ptr += " Bq/m&sup3;<br>";
  ptr += "CO2: ";
  ptr += r3_val1;
  ptr += " ppm<br>";
  ptr += "TVOC: ";
  ptr += r3_val2;
  ptr += " ppb</span>";
  ptr += "</div>\n";
  ptr += "<div><img src='data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAQAAABN/Pf1AAAAC0lEQVR42mNkwAIAACoAAgu1Hc4AAAAASUVORK5CYII=' width='5' height='5'></div>\n";
  ptr += "</div>";

  ptr += div04;
  ptr += div04rg; 
  ptr += "<p>";
  ptr += "<a href=\"http://" + p_inputip04 +"/get?inputchart=3\" target=\"_blank\" class=\"Stil2\">"+ p_room04 +"</a>";   
  ptr += " </p>";
  ptr += "<span class=\"Stil1\">Radon: ";
  ptr += r4_val3;
  ptr += " Bq/m&sup3;<br>";
  ptr += "CO2: ";
  ptr += r4_val1;
  ptr += " ppm<br>";
  ptr += "TVOC: ";
  ptr += r4_val2;
  ptr += " ppb</span>";
  ptr += "</div>\n";
  ptr += "<div><img src='data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAQAAABN/Pf1AAAAC0lEQVR42mNkwAIAACoAAgu1Hc4AAAAASUVORK5CYII=' width='5' height='5'></div>\n";
  ptr += "</div>";

  ptr += div05;
  ptr += div05rg; 
  ptr += "<p>";
  ptr += "<a href=\"http://" + p_inputip05 +"/get?inputchart=3\" target=\"_blank\" class=\"Stil2\">"+ p_room05 +"</a>";   
  ptr += " </p>";
  ptr += "<span class=\"Stil1\">CO2: ";
  ptr += r5_val1;
  ptr += " ppm<br>";
  ptr += "5TVOC: ";
  ptr += r5_val2;
  ptr += " ppb<br>";
  ptr += "Radon: ";
  ptr += r5_val3;
  ptr += " Bq/m&sup3;</span>";
  ptr += "</div>\n";
  ptr += "<div><img src='data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAQAAABN/Pf1AAAAC0lEQVR42mNkwAIAACoAAgu1Hc4AAAAASUVORK5CYII=' width='5' height='5'></div>\n";
  ptr += "</div>";


  ptr += "<div id='chartout' onclick=\"top.location.href='/get?inputchart=0'\"></div><div id='chartout1' onclick=\"top.location.href='/get?inputchart=1'\"></div><div id='chartout2' onclick=\"top.location.href='/get?inputchart=2'\"></div>";
  ptr += p_vanchart_in2;
  ptr += "<div id='chartout3' onclick=\"top.location.href='/get?inputchart=3'\"></div>";
  ptr += p_vanconf_in3;
  ptr += "\n";

  ptr += "</body>\n";
  ptr += "</html>\n";
  return ptr;
}
//-----------------------------------------------------------------------------------------------



//--------------------------------------------------------------------------------------------------------
String SendHTMLg(uint16_t fval1, uint16_t fval2, uint16_t fval3, uint16_t fval4, uint16_t fval5, uint16_t fval6, uint16_t fval7, uint16_t fval8, uint16_t fval9, uint16_t fval10, String f_alarm_s, String divfan7, uint16_t vent_max_stufe, uint16_t vent_min_stufe)
{
  String ptr = "<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'> <html>\n";
  ptr += "<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'>\n";
  ptr += "<meta name=\"author\" content=\"Holger Gebauer\">\n";
  ptr += "<head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">\n";
  ptr += "<title>Measured Air Quality</title>\n";
  ptr += "<link HREF=\"favicon.ico\" REL=\"SHORTCUT ICON\" title=\"Modbus RTU to TCP WiFi Gateway/Server\">\n";
  ptr += "<style>html { font-family: Helvetica; display: inline-block; margin: 0px auto; text-align: center;}\n";
  ptr += "body{margin-top: 50px;} h1 {color: #444444;margin: 50px auto 30px;}\n";
  ptr += "p {font-size: 24px;color: #444444;margin-bottom: 10px;}\n";
 
  ptr += "#header{height: 80px;border-style: solid;border-width: 1px 0px 1px 0px;border-color: black;color: white;-webkit-tap-highlight-color: rgba(0,0,0,0);background: #b0bdda;background: -moz-linear-gradient(top,  #AAB6DF 0%, #4A6B9D 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#AAB6DF), color-stop(100%,#4A6B9D));background: -webkit-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);background: -o-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);\n";
  ptr += "background: -ms-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);background: linear-gradient(to bottom,  #AAB6DF 0%,#4A6B9D 100%);}\n";  	
  ptr += "select {font-size: .9rem;padding: 2px 5px;}\n";	
  ptr += "@media only screen and (max-device-width: 240px) {#header{height: 70px;}}\n";
  ptr += "#select{font-size: 28px;left:20px;letter-spacing: +1px;color: white;	float: left;width: 100%;height: 100%;position: relative;}\n";
  ptr += "@media only screen and (max-device-width: 240px) {#select{text-indent: 3%;font-size: 18px;}#select!{text-indent: 3%;font-size: 10px;}}\n";
  ptr += "#webpage{background: rgba(0, 0, 0, 0.2);text-align: center;}\n";
  ptr += "#webpage2{background: rgba(0, 0, 0, 0.3);text-align: center;font-weight: bold;left: 15px;margin:0 auto;align:center;padding: 10px;}\n";
  
  ptr += "#chartout{height: 50px;background: rgba(0, 0, 0, 0.4);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout::before{content: \"Config\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiCAYAAAA+stv/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAedJREFUeNrkmM8rBGEYx2dmVxtLyoXacJEkSuJCEiXlIFyWG8lFcnEUFxe//oStLVEcOCq/Dkppb46Sg4tCWu1BMnZ3fN96aDx27JqZd+awT30O877TvM8+z/t+n+dd1TAMxU8LWoz3gEXQBTIurJEA6+D416yIgIkQGAZZQ46Ns/UUlaVgCsyBdrAJtkHIYQR0MAqWwS1o+hFV5lEMpMEzKOfeOqAUPIIMiJjnNOZtAIixtAu5N1uGvqkR36YpPlvROCBS8OaVA2OgPocDk+Cea48MB2bBOWhk4xegH6RkO6BTBIQT3WzuBiS92gM1JL1RO7XAyoROdIAKkLX49RHTcxnYBbWkrI4d6AMnNqKxQWmZF+LrJAWVDlIiaswBCPspRCPgEnT6qYRhc4UNerz4KZ2KpN0IvDpYfAsMcR34bwTOwABtxlzH8AOsgWY2vkINiZKvJYtTO/ZATYSd5uPQ1ILpYOav92XugRcwAY7cVMJCrAQ8gUFwxebqqBilZB7DGOjNsXgb7aEq2RHYs+g7RE1ooN7QcyUMUgEr3p6wYAeyVC4DLjun0TcNLmB8EyaoUrWCBbDjwtXsna5m1eCOjqilEoZB1JBn0/kup18misYSaHHhiiZCfw1WwT6fVP3+g+JTgAEAk1EJ5Os+dK8AAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 4px;padding-left: 10px;}\n";

  ptr += "#chartout1{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout1::before{content: \"Chart Radon\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout1::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 4px;padding-left: 10px;}\n";

  ptr += "#chartout2{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout2::before{content: \"Chart CO2\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout2::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 4px;padding-left: 10px;}\n";

  ptr += "#chartout3{height: 50px;background: rgba(6, 95, 142, 0.33);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout3::before{content: \"Live\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout3::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAAEoSURBVCiRY2AgAljd/w8FfxeD+Ezz/sPBSwWgANv/aWlQkPk/ASjA+VcAppnx/gSQwB+EceexCnCgCXD0/GHwSFFACPD//8Ow/u9yR7gA770/DLXv/183hAkwSv5hEI44/+863FB2kKGq+/9tB6o53wAx1D1YQGz//9MzOt6faAAbOv/vMgX1vWDffAAbWgc0VIG16+zdu3cvMDBp/mEQyTj/7xgDo6CSkpICwtBlBhDHsdcADXVmEN///9SM8vLyAoihb5YiDOV7/4eh7/3/YwKiXWffvXv3gIFJ6w+DSuZ9kKFKEENB3hcy2w90CjQMIAFkATS0HWwoLMQszkENhQeh2Ox7YEPhAoxCSsbGxgYo0QABSBGVVqaAFpW/DVAj+99igikDCAA8f8C9upF8kgAAAABJRU5ErkJggg==);\n";
  ptr += "position: relative;padding-right: 6%;top: 4px;padding-left: 10px;}\n";

  ptr += "#chartout4{height: 50px;background: rgba(6, 95, 142, 0.33);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout4::before{content: \"Mesh\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout4::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAAEWSURBVCiRhZE9TsNAEIWfcWRkIXBKBAVpQoOEcgAEOQFEaSkCJ4AbJB0VhBOQcAInBwCkQIGEFB+AAqWCDiOH2Pl97ILW2k1BpnufZt+8nQH+6uoDRm2QtwZ4IEe6tgmwoIFlCU7+AzZDz3gCf84Um2TbDHL4ZGqsNheB/UdDWjfke1YPNi5vB+d6Ry5ftvUO7M3lsElOc/pQAdjSQCUEvCiVS7W6BIN1Zet8NST4PlILyERnEvQrytZKtuSCwvvUpOvKKaeJ0i6vxcaGK9Pir2P3ObhInLvXkn8ZH7+UUCX7qItQa7El+gb4JCM44qduEQfkDGLgUJk1xHAJ0gP4EogEsQJVekRA9hTYJSfY4SS9YeaNnR+Qy3/CSFPlegAAAABJRU5ErkJggg==);\n";
  ptr += "position: relative;padding-right: 6%;top: 4px;padding-left: 10px;}\n";

  ptr += "#chartout5{height: 50px;background: rgba(6, 95, 142, 0.33);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout5::before{content: \"FAN\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout5::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiAQMAAAAEfEm8AAAAA3NCSVQICAjb4U/gAAAABlBMVEX///////9VfPVsAAAAAnRSTlP/AOW3MEoAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAfdEVYdFNvZnR3YXJlAE1hY3JvbWVkaWEgRmlyZXdvcmtzIDi1aNJ4AAAAZklEQVQImUXOsQ3AIBAEwUMOCCkBd2JKcSfQiVuhFEp4ZwSI8z9CcjLRBosRSXSviFPaAj95I0Y3hjENLh7t+M4DbN2BNS2AkRS5lXZWoEYAxcMp5QBC84oEhdngxoaKUReXrWXyA1c3TQEoUwPHAAAAAElFTkSuQmCC);\n";
  ptr += "position: relative;padding-right: 6%;top: 4px;padding-left: 10px;}\n";

  ptr += "#chartout6{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout6::before{content: \"Chart FAN\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout6::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 4px;padding-left: 10px;}\n";

  ptr += "body{ margin: 0px;overflow-y: scroll;font-family: Verdana;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;\n";		
  ptr += "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAJElEQVQIW2NkwAQ+jGhiPgwMDFuQBcECIEUwQbgATBBFACQIALmgBFKywiuGAAAAAElFTkSuQmCC);\n";
  ptr += "-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}\n";

  ptr += "#outLine {\n";
  ptr += "width: 100%;height: 5px;margin: auto;\n";
  ptr += "background-image: linear-gradient(to right, #4A6B9D, #4A6B9D);\n";
  ptr += "border-radius: 1px;}\n";
  ptr += "#line {\n";
  ptr += "background-image: linear-gradient(to right, #f12711, #f5af19);\n";
  ptr += "height: 100%;width: 100%;border-radius: 1px;}\n";


  ptr += "#webpagegruen, #webpagegrau, #webpagered{height: 20px;width: 25px;float: left; margin-right: 5px}\n";
  ptr += "#webpagegruen{background: rgba(0, 255, 0, 0.6);}\n";
  ptr += "#webpagegrau{background: rgba(115, 115, 115, 0.9);}\n";
  ptr += "#webpagered{background: rgba(255, 0, 0, 0.6);}\n";

  ptr += "#divpwgreen, #divpwgrau, #divpwred{height: 20px;width: 8px;float: left; margin-right: 1px}\n";
  ptr += "#divpwgreen{background: rgba(0, 255, 0, 0.6);}\n";
  ptr += "#divpwgrau{background: rgba(115, 115, 115, 0.9);}\n";
  ptr += "#divpwred{background: rgba(255, 0, 0, 0.6);}\n";

  ptr += "input[type=button], input[type=submit], input[type=reset] {\n";
  ptr += " background-image: linear-gradient(to bottom, #c6c6c6 1%, #585858 99%);\n";
  ptr += "border: 2px solid grey;\n";
  ptr += "color: #006600;\n";
  ptr += "font-size: 1.3em; \n";
  ptr += "font-weight: bold;\n";
  ptr += "text-align: center;\n";
  ptr += "display: block;\n";
  ptr += "line-height: 2px;\n";
  ptr += "font-family: Roboto, sans-serif;\n";
  ptr += "text-decoration: none;\n";
  ptr += "margin: 5px 0px;\n";
  ptr += "cursor: pointer;\n";
  ptr += " border-radius: 1px;\n";
  ptr += " position: relative;} \n";  

  ptr += ".button {\n"; 
  ptr += "position: relative;\n"; 
  ptr += "left: -10px;\n"; 
  ptr += "background-color: #0260AC;\n"; 
  ptr += "border: none;\n"; 
  ptr += "font-size: 24px;\n"; 
  ptr += "color: #FFFFFF;\n"; 
  ptr += "padding: 1px;\n"; 
  ptr += "margin-right: 1px;\n"; 
  ptr += "width: 65px;\n"; 
  ptr += "text-align: center;\n"; 
  ptr += "-webkit-transition-duration: 0.8s; \n"; 
  ptr += "transition-duration: 0.8s;\n"; 
  ptr += "text-decoration: none;\n"; 
  ptr += "overflow: hidden;\n"; 
  ptr += "cursor: pointer;}\n"; 

ptr += "th {text-align:left;background-color:#0067AC;color:white;padding:10px}\n"; 
	ptr += ".Stil1 {color: #000000;font-weight: bold; text-align: right;}\n"; 
	ptr += ".Stil3 {color: #000000;font-weight: bold; text-align: left;}\n"; 

  ptr += "</style>\n";

  ptr += "<script>\n";

  ptr += "function lineComplete() {let line = document.getElementById(\"line\");\n";
	ptr += "for (let percentage = 0; percentage <= 100; percentage++) {\n";
	ptr += "setTimeout(function() {line.style.width = `${percentage}%`;\n";
	ptr += "if (line.style.width === \"100%\") {undo();}}, percentage * 10);}\n";
	ptr += "function undo() {for (let percent = 100; percent >= 0; percent--) {\n";
	ptr += "setTimeout(function() {line.style.width = `${100 - percent}%`;}, percent * 4.5);}}};\n";	
	ptr += "setTimeout(function(){$(\"#line\").addClass(\"showLine\")},700);\n";

  ptr += "function chartout(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=0'\",100);}\n";

  ptr += "function chartout1(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=1'\",100);}\n";

  ptr += "function chartout2(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=2'\",100);}\n";

  ptr += "function chartout3(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=3'\",100);}\n";

  ptr += "function chartout6(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=6'\",100);}\n";

  ptr += "setInterval(loadDoc,3000);\n";
  ptr += "function loadDoc() {\n";
  ptr += "var xhttp = new XMLHttpRequest();\n";
  ptr += "xhttp.onreadystatechange = function() {\n";
  ptr += "if (this.readyState == 4 && this.status == 200) {\n";
  ptr += "document.body.innerHTML =this.responseText}\n";
  ptr += "lineComplete();\n";
  ptr += "};\n";
  ptr += "xhttp.open(\"GET\", \"/\", true);\n";
  ptr += "xhttp.send();\n";

  ptr += "}\n";
 
  ptr += "</script>\n";
  ptr += "</head>\n";
  ptr += "<body class='chartbd' onload=\"loadDoc()\">\n";
  ptr += "  <div id='header' onclick=\"top.location.href='/get?inputchart=3'\"><div id='select'>FAN <br>Steuerung</div>\n";
  ptr += "  <div id=\"tt\"><table class='ttab'><tr><td colspan='2' id='temp'></td></tr><tr><td id='temp1'></td><td id='otemp'></td></tr></table></div></div></div>\n";
  ptr += " <div id=\"outLine\"><div id=\"line\"></div></div>\n";
  ptr += "  <div id=\"webpage\">\n";


  ptr += "<table width=\"100%\" border=\"1\">";
  ptr += "<tr>";
  ptr += "  <td width=\"45%\"><div align=\"right\">Radon:</div></td>";
  ptr += "  <td width=\"55%\"><div align=\"left\">";
  ptr += fval1;
  ptr += " Bq/m&sup3;</div></td>";
  ptr += "</tr>";

ptr += "<tr>";
  ptr += "  <td><div align=\"right\">Value Max:</div></td>";
  ptr += "  <td><div align=\"left\">";
  ptr += vent_max_stufe; 
  ptr += " Bq/m&sup3;</div></td>";
  ptr += "</tr>";
ptr += "<tr>";
  ptr += "  <td><div align=\"right\">Value Min:</div></td>";
  ptr += "  <td><div align=\"left\">";
  ptr += vent_min_stufe;
  ptr += " Bq/m&sup3;</div></td>";
  ptr += "</tr>";  

  ptr += "<tr>";
  ptr += "  <td><div align=\"right\">Remaining Filter Time:</div></td>";
  ptr += "  <td><div align=\"left\">";
  ptr += fval2;
  ptr += " h</div></td>";
  ptr += "</tr>";
  ptr += "<tr>";
  ptr += "  <td><div align=\"right\">Power Level:</div></td>";
  ptr += "  <td><div align=\"left\">";
  ptr += fval3;
  ptr += " %</div>";
  ptr += divpower01; 
  ptr += "</div>";
  ptr += divpower02; 
  ptr += "</div>";
  ptr += divpower03; 
  ptr += "</div>";
  ptr += divpower04; 
  ptr += "</div>";
  ptr += divpower05; 
  ptr += "</div>";
  ptr += divpower06; 
  ptr += "</div>";
  ptr += divpower07; 
  ptr += "</div>";
  ptr += divpower08; 
  ptr += "</div>";
  ptr += divpower09; 
  ptr += "</div>";
  ptr += divpower10; 
  ptr += "</div>";
  ptr += divpower11; 
  ptr += "</div>";
  ptr += divpower12; 
  ptr += "</div>";
  ptr += divpower13; 
  ptr += "</div>";
  ptr += divpower14; 
  ptr += "</div>";
  ptr += divpower15; 
  ptr += "</div>";
  ptr += divpower16; 
  ptr += "</div>";
  ptr += divpower17; 
  ptr += "</div>";
  ptr += divpower18; 
  ptr += "</div>";
  ptr += divpower19; 
  ptr += "</div>";
  ptr += divpower20; 
  ptr += "</div>";
  ptr += "</td>";
  ptr += "</tr>";
  ptr += "<tr>";
  ptr += "  <td><div align=\"right\">Aktual Fan Speed:</div></td>";
  ptr += "  <td><div align=\"left\">";
  ptr += fval5;
  ptr += " Hz</div></td>";
  ptr += "</tr>";
  ptr += "<tr>";
  ptr += "  <td><div align=\"right\">Alarm Level:</div></td>";
  ptr += "  <td><div align=\"left\">";
  ptr += fval4;
  ptr += " Hz</div></td>";
  ptr += "</tr>";
  ptr += "<tr>";
  ptr += "  <td><div align=\"right\">Alarm Status:</div></td>";
  ptr += "  <td><div align=\"left\">";
  ptr += divfan7;
  ptr += "</div>";
  //ptr += f_alarm_s;

  ptr += "</div></td>";
  ptr += "</tr>";
  ptr += "<tr>";
  ptr += "  <td><div align=\"right\">Operating Time:</div></td>";
  ptr += "  <td><div align=\"left\">";
  ptr += fval7;
  ptr += " h</div></td>";
  ptr += "</tr>";
  ptr += "<tr>";
  ptr += "  <td><div align=\"right\">ENV Status:</div></td>";
  ptr += "  <td><div align=\"left\">";
  ptr += divfan1;
  ptr += "</div>";
  ptr += divfan2;
  ptr += "</div>";          
  ptr += divfan3; //  divpower01 = divpwgreen;
  ptr += "</div>";
  ptr += divfan4;
  ptr += "</div>";
  ptr += divfan5;
  ptr += "</div>";
  ptr += divfan6;
  ptr += "</div>";

  ptr += "</div></td>";
  
  ptr += "</table>";

  ptr += "</div>\n";

  ptr += "<div id=\"webpage2\" style=\"width: 100%; height: 46px;\"><table width=\"100%\" align=\"center\"><tr><td class='Stil3'><form action='/get?TG1' method=get><div align=\"center\"><button class=\"button\" type='submit' name='TG1' value='1'>+</button></div></form></td><td class='Stil3'><form action='/get?TG2' method=get><div align=\"center\"><button class=\"button\" type='submit' name='TG2' value='1'>-</button></div></form></td><td class='Stil3'><form action='/get?TG3' method=get><div align=\"center\"><button class=\"button\" type='submit' name='TG3' value='1'>ENV</button></div></form></td><td class='Stil3'><form action='/get?TG4' method=get><div align=\"center\"><button class=\"button\" type='submit' name='TG4' value='1'>RET</button></div></form></td></tr></table></div>\n";	

 
  ptr += "<div id='chartout' onclick=\"top.location.href='/get?inputchart=0'\"></div><div id='chartout1' onclick=\"top.location.href='/get?inputchart=1'\"></div><div id='chartout2' onclick=\"top.location.href='/get?inputchart=2'\"></div><div id='chartout6' onclick=\"top.location.href='/get?inputchart=6'\"></div><div id='chartout3' onclick=\"top.location.href='/get?inputchart=3'\"></div>";
  ptr += p_meshchart_in2;
  ptr += " \n";
  


  ptr += "</body>\n";
  ptr += "</html>\n";
  return ptr;
}
//-----------------------------------------------------------------------------------------------







//--------------------------------------------------------------------------------------------------------
String SendHTMLf(float val1, float val2, uint16_t val3, uint16_t val4)
{
  String ptr = "<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'> <html>\n";
  ptr += "<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'>\n";
  ptr += "<meta name=\"author\" content=\"Holger Gebauer\">\n";
  ptr += "<head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">\n";
  ptr += "<title>Measured Air Quality</title>\n";
  ptr += "<link HREF=\"favicon.ico\" REL=\"SHORTCUT ICON\" title=\"Modbus RTU to TCP WiFi Gateway/Server\">\n";
  ptr += "<style>html { font-family: Helvetica; display: inline-block; margin: 0px auto; text-align: center;}\n";
  ptr += "body{margin-top: 50px;} h1 {color: #444444;margin: 50px auto 30px;}\n";
  ptr += "p {font-size: 24px;color: #444444;margin-bottom: 10px;}\n";
 
  ptr += "#header{height: 80px;border-style: solid;border-width: 1px 0px 1px 0px;border-color: black;color: white;-webkit-tap-highlight-color: rgba(0,0,0,0);background: #b0bdda;background: -moz-linear-gradient(top,  #AAB6DF 0%, #4A6B9D 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#AAB6DF), color-stop(100%,#4A6B9D));background: -webkit-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);background: -o-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);\n";
  ptr += "background: -ms-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);background: linear-gradient(to bottom,  #AAB6DF 0%,#4A6B9D 100%);}\n";  	
  ptr += "select {font-size: .9rem;padding: 2px 5px;}\n";	
  ptr += "@media only screen and (max-device-width: 240px) {#header{height: 70px;}}\n";
  ptr += "#select{font-size: 28px;left:20px;letter-spacing: +1px;color: white;	float: left;width: 100%;height: 100%;position: relative;}\n";
  ptr += "@media only screen and (max-device-width: 240px) {#select{text-indent: 3%;font-size: 18px;}#select!{text-indent: 3%;font-size: 10px;}}\n";
  ptr += "#webpage{background: rgba(0, 0, 0, 0.2);text-align: center;}\n";
  ptr += "#webpage2{background: rgba(0, 0, 0, 0.3);text-align: center;font-weight: bold;left: 15px;margin:0 auto;align:center;padding: 10px;}\n";
  
  ptr += "#chartout{height: 50px;background: rgba(0, 0, 0, 0.4);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout::before{content: \"Config\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiCAYAAAA+stv/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAedJREFUeNrkmM8rBGEYx2dmVxtLyoXacJEkSuJCEiXlIFyWG8lFcnEUFxe//oStLVEcOCq/Dkppb46Sg4tCWu1BMnZ3fN96aDx27JqZd+awT30O877TvM8+z/t+n+dd1TAMxU8LWoz3gEXQBTIurJEA6+D416yIgIkQGAZZQ46Ns/UUlaVgCsyBdrAJtkHIYQR0MAqWwS1o+hFV5lEMpMEzKOfeOqAUPIIMiJjnNOZtAIixtAu5N1uGvqkR36YpPlvROCBS8OaVA2OgPocDk+Cea48MB2bBOWhk4xegH6RkO6BTBIQT3WzuBiS92gM1JL1RO7XAyoROdIAKkLX49RHTcxnYBbWkrI4d6AMnNqKxQWmZF+LrJAWVDlIiaswBCPspRCPgEnT6qYRhc4UNerz4KZ2KpN0IvDpYfAsMcR34bwTOwABtxlzH8AOsgWY2vkINiZKvJYtTO/ZATYSd5uPQ1ILpYOav92XugRcwAY7cVMJCrAQ8gUFwxebqqBilZB7DGOjNsXgb7aEq2RHYs+g7RE1ooN7QcyUMUgEr3p6wYAeyVC4DLjun0TcNLmB8EyaoUrWCBbDjwtXsna5m1eCOjqilEoZB1JBn0/kup18misYSaHHhiiZCfw1WwT6fVP3+g+JTgAEAk1EJ5Os+dK8AAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout1{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout1::before{content: \"Chart Radon\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout1::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout2{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout2::before{content: \"Chart CO2\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout2::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout4{height: 50px;background: rgba(6, 95, 142, 0.33);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout4::before{content: \"Mesh\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout4::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAAEWSURBVCiRhZE9TsNAEIWfcWRkIXBKBAVpQoOEcgAEOQFEaSkCJ4AbJB0VhBOQcAInBwCkQIGEFB+AAqWCDiOH2Pl97ILW2k1BpnufZt+8nQH+6uoDRm2QtwZ4IEe6tgmwoIFlCU7+AzZDz3gCf84Um2TbDHL4ZGqsNheB/UdDWjfke1YPNi5vB+d6Ry5ftvUO7M3lsElOc/pQAdjSQCUEvCiVS7W6BIN1Zet8NST4PlILyERnEvQrytZKtuSCwvvUpOvKKaeJ0i6vxcaGK9Pir2P3ObhInLvXkn8ZH7+UUCX7qItQa7El+gb4JCM44qduEQfkDGLgUJk1xHAJ0gP4EogEsQJVekRA9hTYJSfY4SS9YeaNnR+Qy3/CSFPlegAAAABJRU5ErkJggg==);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout5{height: 50px;background: rgba(6, 95, 142, 0.33);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout5::before{content: \"FAN\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout5::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiAQMAAAAEfEm8AAAAA3NCSVQICAjb4U/gAAAABlBMVEX///////9VfPVsAAAAAnRSTlP/AOW3MEoAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAfdEVYdFNvZnR3YXJlAE1hY3JvbWVkaWEgRmlyZXdvcmtzIDi1aNJ4AAAAZklEQVQImUXOsQ3AIBAEwUMOCCkBd2JKcSfQiVuhFEp4ZwSI8z9CcjLRBosRSXSviFPaAj95I0Y3hjENLh7t+M4DbN2BNS2AkRS5lXZWoEYAxcMp5QBC84oEhdngxoaKUReXrWXyA1c3TQEoUwPHAAAAAElFTkSuQmCC);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout6{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout6::before{content: \"Chart FAN\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout6::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "body{ margin: 0px;overflow-y: scroll;font-family: Verdana;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;\n";		
  ptr += "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAJElEQVQIW2NkwAQ+jGhiPgwMDFuQBcECIEUwQbgATBBFACQIALmgBFKywiuGAAAAAElFTkSuQmCC);\n";
  ptr += "-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}\n";

  ptr += "#outLine {\n";
  ptr += "width: 100%;height: 5px;margin: auto;\n";
  ptr += "background-image: linear-gradient(to right, #4A6B9D, #4A6B9D);\n";
  ptr += "border-radius: 1px;}\n";
  ptr += "#line {\n";
  ptr += "background-image: linear-gradient(to right, #f12711, #f5af19);\n";
  ptr += "height: 100%;width: 100%;border-radius: 1px;}\n";

  ptr += "input[type=button], input[type=submit], input[type=reset] {\n";
  ptr += " background-image: linear-gradient(to bottom, #c6c6c6 1%, #585858 99%);\n";
  ptr += "border: 2px solid grey;\n";
  ptr += "color: #006600;\n";
  ptr += "font-size: 1.3em; \n";
  ptr += "font-weight: bold;\n";
  ptr += "text-align: center;\n";
  ptr += "display: block;\n";
  ptr += "line-height: 2px;\n";
  ptr += "font-family: Roboto, sans-serif;\n";
  ptr += "text-decoration: none;\n";
  ptr += "margin: 5px 0px;\n";
  ptr += "cursor: pointer;\n";
  ptr += " border-radius: 1px;\n";
  ptr += " position: relative;} \n";  

  ptr += ".button {\n"; 
  ptr += "position: relative;\n"; 
  ptr += "background-color: #0260AC;\n"; 
  ptr += "border: none;\n"; 
  ptr += "font-size: 24px;\n"; 
  ptr += "color: #FFFFFF;\n"; 
  ptr += "padding: 6px;\n"; 
  ptr += "width: 150px;\n"; 
  ptr += "text-align: center;\n"; 
  ptr += "-webkit-transition-duration: 0.8s; \n"; 
  ptr += "transition-duration: 0.8s;\n"; 
  ptr += "text-decoration: none;\n"; 
  ptr += "overflow: hidden;\n"; 
  ptr += "cursor: pointer;}\n"; 

ptr += "th {text-align:left;background-color:#0067AC;color:white;padding:10px}\n"; 
	ptr += ".Stil1 {color: #000000;font-weight: bold; text-align: right;}\n"; 
	ptr += ".Stil3 {color: #000000;font-weight: bold; text-align: left;}\n"; 

  ptr += "</style>\n";

  ptr += "<script>\n";

  ptr += "function lineComplete() {let line = document.getElementById(\"line\");\n";
	ptr += "for (let percentage = 0; percentage <= 100; percentage++) {\n";
	ptr += "setTimeout(function() {line.style.width = `${percentage}%`;\n";
	ptr += "if (line.style.width === \"100%\") {undo();}}, percentage * 10);}\n";
	ptr += "function undo() {for (let percent = 100; percent >= 0; percent--) {\n";
	ptr += "setTimeout(function() {line.style.width = `${100 - percent}%`;}, percent * 4.5);}}};\n";	
	ptr += "setTimeout(function(){$(\"#line\").addClass(\"showLine\")},700);\n";

  ptr += "function chartout(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=0'\",100);}\n";

  ptr += "function chartout1(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=1'\",100);}\n";

  ptr += "function chartout2(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=2'\",100);}\n";

  ptr += "function chartout3(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=3'\",100);}\n";

  ptr += "function chartout6(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=6'\",100);}\n";
    
  ptr += "setInterval(loadDoc,5000);\n";
  ptr += "function loadDoc() {\n";
  ptr += "var xhttp = new XMLHttpRequest();\n";
  ptr += "xhttp.onreadystatechange = function() {\n";
  ptr += "if (this.readyState == 4 && this.status == 200) {\n";
  ptr += "document.body.innerHTML =this.responseText}\n";
  ptr += "lineComplete();\n";
  ptr += "};\n";
  ptr += "xhttp.open(\"GET\", \"/\", true);\n";
  ptr += "xhttp.send();\n";

  ptr += "}\n";
 
  ptr += "</script>\n";
  ptr += "</head>\n";
  ptr += "<body class='chartbd' onload=\"loadDoc()\">\n";
  ptr += "  <div id='header' onclick=\"top.location.href='/get?inputchart=3'\"><div id='select'>Measured <br>Air Quality</div>\n";
  ptr += "  <div id=\"tt\"><table class='ttab'><tr><td colspan='2' id='temp'></td></tr><tr><td id='temp1'></td><td id='otemp'></td></tr></table></div></div></div>\n";
  ptr += " <div id=\"outLine\"><div id=\"line\"></div></div>\n";
  ptr += "  <div id=\"webpage\">\n";
   
  ptr += "<p>Refresh: ";
  ptr += val4;
  ptr += " </p>";

  ptr += "<p>CO2: ";
  ptr += val1;
  ptr += " ppm</p>";
 
  ptr += "<p>TVOC: ";
  ptr += val2;
  ptr += " ppb</p>";
  
  ptr += "<p>Radon: ";
  ptr += val3;
  ptr += " Bq/m&sup3;</p>";
  ptr += "</div>\n";

  ptr += "<div id=\"webpage2\" style=\"width: 220px; height: 46px;\"><table align=\"center\"><tr><td class='Stil1'></td><td class='Stil3'><form action='/get?getgauge' method=get><button class=\"button\" type='submit' name='getgauge' value='1'>Change</button></form></td></tr></table></div>\n";	


 
  ptr += "<div id='chartout' onclick=\"top.location.href='/get?inputchart=0'\"></div><div id='chartout1' onclick=\"top.location.href='/get?inputchart=1'\"></div><div id='chartout2' onclick=\"top.location.href='/get?inputchart=2'\"></div>";
  ptr += p_vanchart_in2;
  ptr += p_meshchart_in2;
  //ptr += "</div>";
  ptr += p_vanconf_in3;
  ptr += "\n";


  ptr += "</body>\n";
  ptr += "</html>\n";
  return ptr;
}
//-----------------------------------------------------------------------------------------------






//--------------------------------------------------------------------------------------------------------
String SendHTMLc(float val1, float val2, uint16_t val3, uint16_t val4)
{
  String ptr = "<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'> <html>\n";
  ptr += "<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'>\n";
  ptr += "<head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">\n";
  ptr += "<meta http-equiv=\"refresh\" content=\"30\">\n";
  ptr += "<meta name=\"author\" content=\"Holger Gebauer\">\n";
  
  ptr += "<title>Measured Air Quality</title>\n";
  ptr += "<link HREF=\"favicon.ico\" REL=\"SHORTCUT ICON\" title=\"Modbus RTU to TCP WiFi Gateway/Server\">\n";
  ptr += "<style>html { font-family: Helvetica; display: inline-block; margin: 0px auto; text-align: center;}\n";
  ptr += "body{margin-top: 50px;} h1 {color: #444444;margin: 50px auto 30px;}\n";
  ptr += "p {font-size: 24px;color: #444444;margin-bottom: 10px;}\n";
 
  ptr += "#header{height: 80px;border-style: solid;border-width: 1px 0px 1px 0px;border-color: black;color: white;-webkit-tap-highlight-color: rgba(0,0,0,0);background: #b0bdda;background: -moz-linear-gradient(top,  #AAB6DF 0%, #4A6B9D 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#AAB6DF), color-stop(100%,#4A6B9D));background: -webkit-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);background: -o-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);\n";
  ptr += "background: -ms-linear-gradient(top,  #AAB6DF 0%,#4A6B9D 100%);background: linear-gradient(to bottom,  #AAB6DF 0%,#4A6B9D 100%);}\n";  	
  ptr += "select {font-size: .9rem;padding: 2px 5px;}\n";	
  ptr += "@media only screen and (max-device-width: 240px) {#header{height: 70px;}}\n";
  ptr += "#select{font-size: 28px;left:20px;letter-spacing: +1px;color: white;	float: left;width: 100%;height: 100%;position: relative;}\n";
  ptr += "@media only screen and (max-device-width: 240px) {#select{text-indent: 3%;font-size: 18px;}#select!{text-indent: 3%;font-size: 10px;}}\n";
  ptr += "#webpage{background: rgba(0, 0, 0, 0.2);text-align: center;}\n";
  ptr += "#webpage2{background: rgba(0, 0, 0, 0.3);text-align: center;font-weight: bold;left: 15px;margin:0 auto;align:center;padding: 10px;}\n";


  ptr += "#chart_div2{background: rgba(";
  ptr += val1_color;
  ptr += ");text-align: center; margin:0 auto;width: 180px; height: 140px;padding-left: 40px;margin-top: 10px;}\n";
  ptr += "#chart_div3{background: rgba(";
  ptr += val2_color;
  ptr += ");text-align: center; margin:0 auto;width: 180px; height: 140px;padding-left: 40px;margin-top: 5px;}\n";
  ptr += "#chart_div{background: rgba(";
  ptr += val3_color;
  ptr += ");text-align: center; margin:0 auto;width: 180px; height: 140px;padding-left: 40px;margin-top: 5px;}\n";
  
  ptr += "#chartout{height: 50px;background: rgba(0, 0, 0, 0.4);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout::before{content: \"Config\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiCAYAAAA+stv/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAedJREFUeNrkmM8rBGEYx2dmVxtLyoXacJEkSuJCEiXlIFyWG8lFcnEUFxe//oStLVEcOCq/Dkppb46Sg4tCWu1BMnZ3fN96aDx27JqZd+awT30O877TvM8+z/t+n+dd1TAMxU8LWoz3gEXQBTIurJEA6+D416yIgIkQGAZZQ46Ns/UUlaVgCsyBdrAJtkHIYQR0MAqWwS1o+hFV5lEMpMEzKOfeOqAUPIIMiJjnNOZtAIixtAu5N1uGvqkR36YpPlvROCBS8OaVA2OgPocDk+Cea48MB2bBOWhk4xegH6RkO6BTBIQT3WzuBiS92gM1JL1RO7XAyoROdIAKkLX49RHTcxnYBbWkrI4d6AMnNqKxQWmZF+LrJAWVDlIiaswBCPspRCPgEnT6qYRhc4UNerz4KZ2KpN0IvDpYfAsMcR34bwTOwABtxlzH8AOsgWY2vkINiZKvJYtTO/ZATYSd5uPQ1ILpYOav92XugRcwAY7cVMJCrAQ8gUFwxebqqBilZB7DGOjNsXgb7aEq2RHYs+g7RE1ooN7QcyUMUgEr3p6wYAeyVC4DLjun0TcNLmB8EyaoUrWCBbDjwtXsna5m1eCOjqilEoZB1JBn0/kup18misYSaHHhiiZCfw1WwT6fVP3+g+JTgAEAk1EJ5Os+dK8AAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout1{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout1::before{content: \"Chart Radon\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout1::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout2{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout2::before{content: \"Chart CO2\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout2::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout4{height: 50px;background: rgba(6, 95, 142, 0.33);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout4::before{content: \"Mesh\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout4::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAAEWSURBVCiRhZE9TsNAEIWfcWRkIXBKBAVpQoOEcgAEOQFEaSkCJ4AbJB0VhBOQcAInBwCkQIGEFB+AAqWCDiOH2Pl97ILW2k1BpnufZt+8nQH+6uoDRm2QtwZ4IEe6tgmwoIFlCU7+AzZDz3gCf84Um2TbDHL4ZGqsNheB/UdDWjfke1YPNi5vB+d6Ry5ftvUO7M3lsElOc/pQAdjSQCUEvCiVS7W6BIN1Zet8NST4PlILyERnEvQrytZKtuSCwvvUpOvKKaeJ0i6vxcaGK9Pir2P3ObhInLvXkn8ZH7+UUCX7qItQa7El+gb4JCM44qduEQfkDGLgUJk1xHAJ0gP4EogEsQJVekRA9hTYJSfY4SS9YeaNnR+Qy3/CSFPlegAAAABJRU5ErkJggg==);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout5{height: 50px;background: rgba(6, 95, 142, 0.33);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout5::before{content: \"FAN\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout5::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiAQMAAAAEfEm8AAAAA3NCSVQICAjb4U/gAAAABlBMVEX///////9VfPVsAAAAAnRSTlP/AOW3MEoAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAfdEVYdFNvZnR3YXJlAE1hY3JvbWVkaWEgRmlyZXdvcmtzIDi1aNJ4AAAAZklEQVQImUXOsQ3AIBAEwUMOCCkBd2JKcSfQiVuhFEp4ZwSI8z9CcjLRBosRSXSviFPaAj95I0Y3hjENLh7t+M4DbN2BNS2AkRS5lXZWoEYAxcMp5QBC84oEhdngxoaKUReXrWXyA1c3TQEoUwPHAAAAAElFTkSuQmCC);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "#chartout6{height: 50px;background: rgba(6, 95, 142, 0.5);text-align: right;margin: 6px 0 6px 0;line-height: 50px;}\n";
  ptr += "#chartout6::before{content: \"Chart FAN\";position: relative;top: -1px;font-weight: bold;right: 15px;}\n";
  ptr += "#chartout6::after{\n";
  ptr += "content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiBAMAAADMnMbMAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB90RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgOLVo0ngAAADzSURBVCiRY2DAA8QDULhMHucLUATi/v+fwGQsgBCoe/9/A8+7BIQA6/v3F3n/IwlI/4k7iCzAuP8xi4IskoD0PwcGBiQBxv1PWVyQVUj/T5B9l4AQYDr/lEHuP5KALdAEWSQB1veXGVAE+v8ooAhI/V8I9AVCgPn8dwae/w0Igbq/DigCUv8XMSALsN7/wYAswNj/xwFFwOf/RAYUgftXGRgkdwcgBNzATmpAsZZB5n8BkoDlDAFUgfj/CmgC/3AJwALI762A9LsE7ncFPO8CgIhBySxVSTXNSDXNCUwaMtw9vfvsbQQ6w/AfFfxjuIsK7gAACPPDOOnfDQgAAAAASUVORK5CYII=);\n";
  ptr += "position: relative;padding-right: 6%;top: 8px;padding-left: 10px;}\n";

  ptr += "body{ margin: 0px;overflow-y: scroll;font-family: Verdana;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;\n";		
  ptr += "background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAJElEQVQIW2NkwAQ+jGhiPgwMDFuQBcECIEUwQbgATBBFACQIALmgBFKywiuGAAAAAElFTkSuQmCC);\n";
  ptr += "-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}\n";

  ptr += "#outLine {\n";
  ptr += "width: 100%;height: 5px;margin: auto;\n";
  ptr += "background-image: linear-gradient(to right, #4A6B9D, #4A6B9D);\n";
  ptr += "border-radius: 1px;}\n";
  ptr += "#line {\n";
  ptr += "background-image: linear-gradient(to right, #f12711, #f5af19);\n";
  ptr += "height: 100%;width: 100%;border-radius: 1px;}\n";

  ptr += "input[type=button], input[type=submit], input[type=reset] {\n";
  ptr += " background-image: linear-gradient(to bottom, #c6c6c6 1%, #585858 99%);\n";
  ptr += "border: 2px solid grey;\n";
  ptr += "color: #006600;\n";
  ptr += "font-size: 1.3em; \n";
  ptr += "font-weight: bold;\n";
  ptr += "text-align: center;\n";
  ptr += "display: block;\n";
  ptr += "line-height: 2px;\n";
  ptr += "font-family: Roboto, sans-serif;\n";
  ptr += "text-decoration: none;\n";
  ptr += "margin: 5px 0px;\n";
  ptr += "cursor: pointer;\n";
  ptr += " border-radius: 1px;\n";
  ptr += " position: relative;} \n";  

  ptr += ".button {\n"; 
  ptr += "position: relative;\n"; 
  ptr += "background-color: #0260AC;\n"; 
  ptr += "border: none;\n"; 
  ptr += "font-size: 24px;\n"; 
  ptr += "color: #FFFFFF;\n"; 
  ptr += "padding: 6px;\n"; 
  ptr += "width: 150px;\n"; 
  ptr += "text-align: center;\n"; 
  ptr += "-webkit-transition-duration: 0.8s; \n"; 
  ptr += "transition-duration: 0.8s;\n"; 
  ptr += "text-decoration: none;\n"; 
  ptr += "overflow: hidden;\n"; 
  ptr += "cursor: pointer;}\n"; 

  ptr += "th {text-align:left;background-color:#0067AC;color:white;padding:10px}\n"; 
	ptr += ".Stil1 {color: #000000;font-weight: bold; text-align: right;}\n"; 
	ptr += ".Stil3 {color: #000000;font-weight: bold; text-align: left;}\n"; 


  ptr += "</style>\n";
  ptr += "<script src='gloader.js'></script>";   



  ptr += "<script>\n";

  ptr += "function lineComplete() {let line = document.getElementById(\"line\");\n";
	ptr += "for (let percentage = 0; percentage <= 100; percentage++) {\n";
	ptr += "setTimeout(function() {line.style.width = `${percentage}%`;\n";
	ptr += "if (line.style.width === \"100%\") {undo();}}, percentage * 10);}\n";
	ptr += "function undo() {for (let percent = 100; percent >= 0; percent--) {\n";
	ptr += "setTimeout(function() {line.style.width = `${100 - percent}%`;}, percent * 4.5);}}};\n";	
  ptr += "setTimeout(function(){$(\"#line\").addClass(\"showLine\")},700);\n";



       ptr +="google.charts.load('current', {'packages':['gauge']});";
       ptr +="google.charts.setOnLoadCallback(drawChart);";
       ptr +="function drawChart() {";

       ptr +=" var data = google.visualization.arrayToDataTable([";
       ptr +="  ['Label', 'Value'],";
       ptr +=" ['RADON',";
       ptr += val3;
       ptr += "],";
       ptr +="]); ";

       ptr +=" var data2 = google.visualization.arrayToDataTable([";
       ptr +="  ['Label', 'Value'],";
       ptr +=" ['CO2',";
       ptr += val1;
       ptr += "],";
       ptr +="]); ";

       ptr +=" var data3 = google.visualization.arrayToDataTable([";
       ptr +="  ['Label', 'Value'],";
       ptr +=" ['TVOC',";
       ptr += val2;
       ptr += "],";
       ptr +="]); ";

       ptr +=" var options = {  ";
       ptr +=" width: 140, height: 140,";
         ptr +=" redFrom: ";
         ptr += vredFrom;
         ptr +=", redTo: ";
         ptr += vredTo;
         ptr +=",";
         ptr +=" yellowFrom:";
         ptr += vyellowFrom;
         ptr +=", yellowTo: ";
         ptr += vyellowTo;
         ptr +=",";
         ptr +=" greenFrom:";
         ptr += vgreenFrom;
         ptr +=", greenTo: ";
         ptr += vgreenTo;
         ptr +=",";
       ptr +=" minorTicks: 5,";
       ptr +=" max: ";
       ptr += vredTo;
       ptr +=",";

          ptr +="animation:{";
          ptr +="duration: 10000,";
          ptr +="easing: 'linear',";
          ptr +="},";

       ptr +=" };    ";

       ptr +=" var options2 = {  ";
       ptr +=" width: 140, height: 140,";
         ptr +=" redFrom: ";
         ptr += vredFrom2;
         ptr +=", redTo: ";
         ptr += vredTo2;
         ptr +=",";
         ptr +=" yellowFrom:";
         ptr += vyellowFrom2;
         ptr +=", yellowTo: ";
         ptr += vyellowTo2;
         ptr +=",";
         ptr +=" greenFrom:";
         ptr += vgreenFrom2;
         ptr +=", greenTo: ";
         ptr += vgreenTo2;
         ptr +=",";
       ptr +=" minorTicks: 5,";
       ptr +=" max: ";
       ptr += vredTo2;
       ptr +=",";

          ptr +="animation:{";
          ptr +="duration: 10000,";
          ptr +="easing: 'linear',";
          ptr +="},";

       ptr +=" };    ";       

       ptr +=" var options3 = {  ";
       ptr +=" width: 140, height: 140,";
         ptr +=" redFrom: ";
         ptr += vredFrom3;
         ptr +=", redTo: ";
         ptr += vredTo3;
         ptr +=",";
         ptr +=" yellowFrom:";
         ptr += vyellowFrom3;
         ptr +=", yellowTo: ";
         ptr += vyellowTo3;
         ptr +=",";
         ptr +=" greenFrom:";
         ptr += vgreenFrom3;
         ptr +=", greenTo: ";
         ptr += vgreenTo3;
         ptr +=",";
       ptr +=" minorTicks: 5,";
       ptr +=" max: ";
       ptr += vredTo3;
       ptr +=",";

          ptr +="animation:{";
          ptr +="duration: 10000,";
          ptr +="easing: 'linear',";
          ptr +="},";

       ptr +=" };    ";  

       ptr +="var chart = new google.visualization.Gauge(document.getElementById('chart_div'));";
       ptr +="chart.draw(data, options);";

       ptr +="var chart2 = new google.visualization.Gauge(document.getElementById('chart_div2'));";
       ptr +="chart2.draw(data2, options2);";      

       ptr +="var chart3 = new google.visualization.Gauge(document.getElementById('chart_div3'));";
       ptr +="chart3.draw(data3, options3);";   

       ptr +=" } ";



  ptr += "function chartout(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=0'\",100);}\n";

  ptr += "function chartout1(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=1'\",100);}\n";

  ptr += "function chartout2(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=2'\",100);}\n";

  ptr += "function chartout3(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=3'\",100);}\n";

  ptr += "function chartout6(){$(document.body).hide();try { var clearResult = document.execCommand(\"ClearAuthenticationCache\"); } catch(e){} \n";
  ptr += "if (!clearResult){$.ajax({url: \"http://logout:logout@\" + window.location.host + \"/control\",type: \"POST\",timeout: 100});}setTimeout(\"self.location.href='/get?inputchart=6'\",100);}\n";

  ptr += "setInterval(loadDoc,150000);\n";
  ptr += "function loadDoc() {\n";
  ptr += "var xhttp = new XMLHttpRequest();\n";
  ptr += "xhttp.onreadystatechange = function() {\n";
  ptr += "if (this.readyState == 4 && this.status == 200) {\n";
  ptr += "document.body.innerHTML =this.responseText\n";

  ptr += "drawChart();\n";
  ptr += "}\n";  
  ptr += "};\n";
  ptr += "xhttp.open(\"GET\", \"/\", true);\n";
  ptr += "xhttp.send();\n";
  ptr += "}\n";

  ptr += "</script>\n";
 

  ptr += "</head>\n";
  ptr += "<body class='chartbd' onload=\"loadDoc()\";lineComplete()>\n";
  ptr += "  <div id='header' onclick=\"top.location.href='/get?inputchart=3'\"><div id='select'>Measured <br>Air Quality</div>\n";
  ptr += "  <div id=\"tt\"><table class='ttab'><tr><td colspan='2' id='temp'></td></tr><tr><td id='temp1'></td><td id='otemp'></td></tr></table></div></div></div>\n";
  ptr += " <div id=\"outLine\"><div id=\"line\"></div></div>\n";
  ptr += "  <div id=\"webpage\">\n";
 
  ptr +="<div id=\"chart_div2\"></div>"; 
  ptr +="<div id=\"chart_div3\"></div>"; 
  ptr +="<div id=\"chart_div\"></div>"; 
  
  //ptr +="<div id='pressChart' class='chartContainer'></div>"; 

  ptr += "</div><br>\n";
  
  ptr += "<div id=\"webpage2\" style=\"width: 220px; height: 46px;\"><table align=\"center\"><tr><td class='Stil1'></td><td class='Stil3'><form action='/get?getgauge' method=get><button class=\"button\" type='submit' name='getgauge' value='0'>Change</button></form></td></tr></table></div>\n";	
  ptr += "<div id='chartout' onclick=\"top.location.href='/get?inputchart=0'\"></div><div id='chartout1' onclick=\"top.location.href='/get?inputchart=1'\"></div><div id='chartout2' onclick=\"top.location.href='/get?inputchart=2'\"></div>";
  ptr += p_vanchart_in2;
  ptr += p_meshchart_in2;
  //ptr += "</div>";
  ptr += p_vanconf_in3;
  ptr += "\n";
  
 
  ptr += "</body>\n";
  ptr += "</html>\n";
  return ptr;
}
//-----------------------------------------------------------------------------------------------





//-----------------------------------------------------------------------------------------------
String SendHTMLd(float val1, float val2, uint16_t val3, uint16_t val4)
{

String ptr = "<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'> <html>\n"; 
   ptr += "<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'> \n";
   ptr += "<head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\"> \n";
   ptr += "<title>Values</title> \n";
   ptr += "<link HREF=\"favicon.ico\" REL=\"SHORTCUT ICON\" title=\"Vars\">\n";
   ptr += "</head><body><div>\n";

    ptr += "<p id=\"var1\">CO2:";
    ptr += val1;
    ptr += "ppm</p>";
  
    ptr += "<p id=\"var2\">TVOC:";
    ptr += val2;
    ptr += "ppb</p>";
    
    ptr += "<p id=\"var3\">Radon:";
    ptr += val3;
    ptr += "bqm3</p>";
    ptr += "</div></body>\n";
    ptr += "</html>\n";
    return ptr;
}

const char plattern_ip[] PROGMEM = R"rawliteral(pattern='^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$')rawliteral";

//********************************************
//Include the HTML, STYLE and Script "Pages"
#include "a1_page.h"
#include "a1_page2.h"
#include "a1_page3.h"
#include "a1_page4.h"
//<meta http-equiv="refresh" content="300;url=index.html">
//********************************************

// "var s_inputstaticip = \"<form action='/get'><input name='inputstaticip' type='text' maxlength='15' " + String(plattern_ip) + " value='" + p_inputstaticip + "'><input type='submit' value='Submit'></form>\";" +

// Replaces placeholder with button section in your web page
String processor(const String& var){
  //Serial.println(var);
    if(chart_page == 0){  
      if(var == "JAVAPLACEHOLDER"){
         String settings = String ("<script type='text/javascript'>") +                                                                                                         
           
            "var s_inputstaticip = \"<input name='inputstaticip' type='text' maxlength='15' " + String(plattern_ip) + " value='" + p_inputstaticip + "'>\";" +
            "var s_inputsubnetmask = \"<input name='inputsubnetmask' type='text' maxlength='15' " + String(plattern_ip) + " value='" + p_inputsubnetmask + "'>\";" +
            "var s_inputgateway = \"<input name='inputgateway' type='text' maxlength='15' " + String(plattern_ip) + " value='" + p_inputgateway + "'>\";" +
            "var s_inputdnss = \"<input name='inputdnss' type='text' maxlength='20' value='" + p_inputntp + "'></form>\";" +
            "var s_inputname = \"<input name='inputname' type='text' maxlength='10' pattern='^[a-z]{1}[0-9a-z]{2,10}' value='" + p_inputname + "'>\";" +
            "var s_inputname2 = \"[ http://" + p_inputname + ".local/index.html ]\";" +

            "var s_inputtcpport = \"<input name='inputtcpport' type='number' maxlength='4' pattern='[0-9]{4}' value='" + p_inputtcpport + "'>\";" +
            "var s_inputwebport = \"<input name='inputwebport' type='number' maxlength='4' pattern='[0-9]{4}' value='" + p_inputwebport + "'>\";" +

            "var s_inputbaudrate = \"<input name='inputbaudrate' type='number' maxlength='5' min='2400' max='38400' pattern='[0-9]{5}' value='" + p_inputbaudrate + "'>\";" +
            "var s_inputdatabits = \"<input name='inputdatabits' type='number' maxlength='1' min='7' max='8' pattern='[7-8]{1}' value='" + p_inputdatabits + "'>\";" +
            "var s_inputparity = \"<input name='inputparity' type='text' maxlength='4' pattern='none|even|odd|mark' value='" + p_inputparity + "'>\";" +
            "var s_inputstopbit = \"<input name='inputstopbit' type='number' maxlength='1' min='1' max='2' pattern='[1-2]{1}' value='" + p_inputstopbit + "'>\";" +
            "var s_inputrestimeout = \"<input name='inputrestimeout' type='number' min='500' max='2000' minlength='3' maxlength='4' value='" + p_inputrestimeout + "'>\";" +
           
            "var s_inputpasswort = \"<form action='/get'><input name='inputpasswort' maxlength='10' type='password' value='" + p_inputpasswort + "'><button class='button' type='submit'>Login</button></form>\";" +      
            "var s_inputpwchange = \"<form action='/get'><input name='inputpwchange' maxlength='10' type='password' value='" + p_inputpwchange + "'><button class='button' type='submit'>Change</button></form>\";" +     
               

            "var s_MB_scan_resault = \"" + p_MB_scan_resault + "\";" +
            "var s_ethernet_sockets = \"" + String(m_max_clients) + "\";" +
            "var s_mac_adresse = \"" + WiFi.macAddress() + "\";" +
            "var s_ip_adresse_val = \"" + p_inputstaticip + "\";" +
            "var s_uhrzeit = \"" + p_uhrzeit + "\";" +
            "var s_uptime = \"" + p_uptime + "\";" +
            "var s_rs485_data = \"" + p_rs485_data + "\";" +

            "var s_meshaktual = \"" + mesh_werteaktual + "\";" +
            "var s_meshaktiv = \"<td " + mesh_aktiv + ">\";" +

            
            "var s_inputip01 = \"<input name='inputip01' type='text' maxlength='15' " + String(plattern_ip) + " value='" + p_inputip01 + "'>\";" +
            "var s_room01 = \"<input name='room01' type='text' minlength='2' maxlength='10' value='" + p_room01 + "'>\";" +
            "var s_inputip02 = \"<input name='inputip02' type='text' maxlength='15' " + String(plattern_ip) + " value='" + p_inputip02 + "'>\";" +
            "var s_room02 = \"<input name='room02' type='text' minlength='2' maxlength='10' value='" + p_room02 + "'>\";" +
            "var s_inputip03 = \"<input name='inputip03' type='text' maxlength='15' " + String(plattern_ip) + " value='" + p_inputip03 + "'>\";" +
            "var s_room03 = \"<input name='room03' type='text' minlength='2' maxlength='10' value='" + p_room03 + "'>\";" +
            "var s_inputip04 = \"<input name='inputip04' type='text' maxlength='15' " + String(plattern_ip) + " value='" + p_inputip04 + "'>\";" +
            "var s_room04 = \"<input name='room04' type='text' minlength='2' maxlength='10' value='" + p_room04 + "'>\";" +
            "var s_inputip05 = \"<input name='inputip05' type='text' maxlength='15' " + String(plattern_ip) + " value='" + p_inputip05 + "'>\";" +
            "var s_room05 = \"<input name='room05' type='text' minlength='2' maxlength='10' value='" + p_room05 + "'>\";" +
            
            "var s_cloudttaktual = \"" + cloud_werteaktual + "\";" +
            "var s_cloudaktiv = \"<td " + cloud_aktiv + ">\";" +
            "var s_cloud_onoff = \"<input name='inputcloudonoff' type='text' maxlength='3' pattern='on|off' value='" + p_cloudonoff + "'>\";" +
            "var s_cloud_server = \"<input name='inputcloudserver' type='text' maxlength='40' value='" + p_inputcloudserver + "'>\";" +
            "var s_cloud_device = \"<input name='inputclouddevice' type='text' maxlength='5' pattern='[0-9]{2,5}' value='" + p_inputclouddevice + "'>\";" +
            "var s_cloud_user = \"<input name='inputclouduser' type='text' maxlength='20' value='" + p_inputclouduser + "'>\";" +
            "var s_cloud_key = \"<input name='inputcloudkey' type='text' maxlength='40' value='" + p_inputcloudkey + "'>\";" +
            "var s_cloud_page = \"<input name='inputcloudpage' type='text' maxlength='20' value='" + p_inputcloudpage + "'>\";" +         



            "var s_ledaktual = \"" + led_werteaktual + "\";" +
            "var s_ledaktiv = \"<td " + lEd_aktiv + ">\";" +
            "var s_led_onoff = \"<input name='inputledonoff' type='text' maxlength='3' pattern='on|off' value='" + p_ledonoff + "'>\";" +
            "var s_led_red = \"<input name='inputledred' type='text' maxlength='5' pattern='[0-9]{1,5}' value='" + p_inputledred + "'>\";" +
            "var s_led_orange = \"<input name='inputledorange' type='text' maxlength='5' pattern='[0-9]{1,5}' value='" + p_inputledorange + "'>\";" +
            "var s_led_green = \"<input name='inputledgreen' type='text' maxlength='5' pattern='[0-9]{1,5}' value='" + p_inputledgreen + "'>\";" +
            "var s_led_funk = \"<input name='inputledfunk' type='text' maxlength='5' pattern='radon|co2' value='" + p_inputledfunk + "'>\";" +
            "var s_led_gamma = \"<input name='inputledgamma' type='text' maxlength='3' value='" + p_inputledgamma + "'>\";" +    


            "var s_pushaktual = \"" + push_werteaktual + "\";" + 
            "var s_pushaktiv = \"<td " + push_aktiv + ">\";" +
            "var s_push_onoff = \"<input name='inputpushoff' type='text' maxlength='3' pattern='on|off' value='" + p_pushonoff + "'>\";" +
            "var s_push_key = \"<input name='pushkey' type='text' minlength='2' maxlength='30' value='" + p_pushkey + "'>\";" +
            "var s_push_message = \"<input name='pushmessage' type='text' minlength='2' maxlength='100' value='" + p_pushmessage + "'>\";" +
            "var s_push_titel = \"<input name='pushtitle' type='text' minlength='2' maxlength='30' value='" + p_pushtitle + "'>\";" +
            "var s_push_sound = \"<input name='pushsound' type='text' minlength='1' maxlength='3' value='" + p_pushsound + "'>\";" +
            "var s_push_vibration = \"<input name='pushvibration' type='text' minlength='1' maxlength='3' value='" + p_pushvibration + "'>\";" +
            "var s_push_icon = \"<input name='pushicon' type='text' minlength='1'maxlength='3' value='" + p_pushicon + "'>\";" +
            "var s_push_color = \"<input name='pushiconcolor' type='text' minlength='6' maxlength='6' value='" + p_pushiconcolor + "'>\";" +
            "var s_push_prio = \"<input name='pushpriority' type='text' minlength='1' maxlength='3' value='" + p_pushpriority + "'>\";" +
            "var s_push_device = \"<input name='pushdevice' type='text' minlength='1' maxlength='8' value='" + p_pushdevice + "'>\";" +
            "var s_push_value = \"<input name='pushvalue' type='text' minlength='1' maxlength='8' value='" + p_pushvalue + "'>\";" +

            "var s_vanaktual = \"" + van_werteaktual + "\";" +
            "var s_vanaktiv = \"<td " + van_aktiv + ">\";" +
            "var s_van_onoff = \"<input name='inputvanonoff' type='text' maxlength='3' pattern='on|off' value='" + p_vanonoff + "'>\";" +
            "var s_van_max = \"<input name='inputvanmax' type='text' maxlength='5' pattern='[0-9]{1,5}' value='" + p_inputvanmax + "'>\";" +
            "var s_van_min = \"<input name='inputvanmin' type='text' maxlength='5' pattern='[0-9]{1,5}'  value='" + p_inputvanmin + "'>\";" +    


            "var s_mqttaktiv = \"<td " + mQtt_aktiv + ">\";" +
            "var s_mq_onoff = \"<input name='inputmqonoff' type='text' maxlength='3' pattern='on|off' value='" + p_mqonoff + "'>\";" +
            "var s_mq_server = \"<input name='inputmqserver' type='text' minlength='1' maxlength='40' value='" + p_inputmqserver + "'>\";" +
            "var s_mq_port = \"<input name='inputmqport' type='number' minlength='1' maxlength='4' value='" + p_inputmqport + "'>\";" +
            "var s_mq_user = \"<input name='inputmquser' type='text' minlength='1' maxlength='40' value='" + p_inputmquser + "'>\";" +
            "var s_mq_pass = \"<input name='inputmqpass' type='text' minlength='1' maxlength='40' value='" + p_inputmqpass + "'>\";" +
            "var s_mq_client = \"<input name='inputmqclient' type='text' minlength='1' maxlength='48' value='" + p_inputmqclient + "'>\";" +
            "var s_mq_topic = \"<input name='inputmqtopic' type='text' maxlength='50' value='" + p_inputmqtopic + "'>\";" +
            "var s_mq_topic1 = \"<input name='inputmqtopic1' type='text' maxlength='50' value='" + p_inputmqtopic1 + "'>\";" +
            "var s_mq_topic2 = \"<input name='inputmqtopic2' type='text' maxlength='50' value='" + p_inputmqtopic2 + "'>\";" +
            "var s_mqttaktual = \"" + mq_werteaktual + "\";" +




            "var s_werteaktual = \"" + mb_werteaktual + "\";" +
            "var s_radon_live = \"" + String(mb_radon_ist_long) + "\";" +
            "var s_radon_long = \"" + String(mb_radon_long) + "\";" +
            "var s_radon_eintaege = \"" + String(mb_radon_eintrarge) + "\";" +
            #ifdef CO2_on
            "var s_co2_v1 = \"" + String(eco2val1) + "\";" +
            "var s_co2_v2 = \"" + String(etvocval2) + "\";" +
            #else
            "var s_co2_v1 = \"" + "-" + "\";" +
            "var s_co2_v2 = \"" + "-" + "\";" +
            #endif
            #ifdef MB_Gateway
            "var s_titel = \"" + "Gateway" + "\";" +
            #else
            "var s_titel = \"" + "Server" + "\";" +
            #endif
            
            
            
            "var s_div_c01 = \"" + div_c01 + "\";" +
            "var s_div_c02 = \"" + div_c02 + "\";" +
            "var s_div_c03 = \"" + div_c03 + "\";" +
            "var s_div_c04 = \"" + div_c04 + "\";" +
            "var s_div_c05 = \"" + div_c05 + "\";" +
            "var s_div_c06 = \"" + div_c06 + "\";" +
            "var s_div_c07 = \"" + div_c07 + "\";" +
            "var s_div_c08 = \"" + div_c08 + "\";" +
            "var s_div_c09 = \"" + div_c09 + "\";" +
            "var s_div_c10 = \"" + div_c10 + "\";" +
            "var s_div_c11 = \"" + div_c11 + "\";" +

            "var s_sett01_s = \"" + p_sett01_s + "\";" +
            "var s_sett02_s = \"" + p_sett02_s + "\";" +
            "var s_sett03_s = \"" + p_sett03_s + "\";" +
            "var s_sett04_s = \"" + p_sett04_s + "\";" +
            "var s_sett05_s = \"" + p_sett05_s + "\";" +
            "var s_sett06_s = \"" + p_sett06_s + "\";" +
            "var s_sett07_s = \"" + p_sett07_s + "\";" +
            "var s_sett08_s = \"" + p_sett08_s + "\";" +
            "var s_sett09_s = \"" + p_sett09_s + "\";" +
            "var s_sett10_s = \"" + p_sett10_s + "\";" +
            "var s_sett11_s = \"" + p_sett11_s + "\";" +

            
            "var s_divpw = \"" + divpw + "\";" +
            "var s_divsetting = \"" + divsetting + "\";" +

            //s_divsetting


            "var s_inputsavebit = \"<div id='"+ p_inputsavebit + "'><div align='center' class='savebitpost'>" + p_inputsavebit_txt + "</div></div>\";" +
            "var s_logout_or_in =  \"<div id='"+ p_logout_or_in + "</div>\";" +
            "var s_chart_or_in =  \"<div id='"+ p_chart_or_in + "</div>\";" + 
            "var s_chart2_or_in =  \"<div id='"+ p_chart2_or_in + "</div>\";" + 
            "var s_co2_in =  \"<div id='"+ p_co2_in + "</div>\";" +   
            "var s_mesh_in =  \"<div id='"+ p_mesh_in + "</div>\";" +  
            "var s_van_in =  \"<div id='"+ p_van_in + "</div>\";" +  
            "var s_vanchart_in =  \"<div id='"+ p_vanchart_in + "</div>\";" +  
                                    

            "var number = 123;" +
            "var s_zonelog = \" " + zone_view + " \";" +
            "function docWrite(variable) {document.write(variable);}</script>";    
        return settings;
      }

    }
    if(chart_page == 1 || chart_page == 2 ||chart_page == 6){  

     if(var == "JAVAPLACEHOLDER"){
         String settings = String ("<script type='text/javascript'>") +                                                                                                         
            "var s_uhrzeit = \"" + p_uhrzeit + "\";" +
            "var s_radon_live = \"" + String(mb_radon_ist_long) + "\";" +
            "var s_chart_or_in =  \"<div id='"+ p_chart_or_in + "</div>\";" +
            "var s_config_in =  \"<div id='"+ p_chart2out + "</div>\";" +
            "var s_radon_in =  \"<div id='"+ p_chartin + "</div>\";" +
            "var s_chartco2_in =  \"<div id='"+ p_chartco2 + "</div>\";" +
            "var s_chart2_or_in =  \"<div id='"+ p_chart2_or_in + "</div>\";" +
            "var s_co2_in =  \"<div id='"+ p_co2_in + "</div>\";" +
            "var s_mesh_in =  \"<div id='"+ p_mesh_in + "</div>\";" +  
            "var s_van_in =  \"<div id='"+ p_van_in + "</div>\";" +  
            "var s_vanchart_in =  \"<div id='"+ p_vanchart_in + "</div>\";" +  

            #ifdef MB_Gateway
            "var s_titel = \"" + "Gateway" + "\";" +
            #else
            "var s_titel = \"" + "Server" + "\";" +
            #endif
            "function docWrite(variable) {document.write(variable);}</script>";    
        return settings;
      }

    }
 
  
  return String();
}




String outputState(int output){
  if(digitalRead(output)){
    return "checked";
  }
  else {
    return "";
  }
}
//*********************************************************************************************





//******************************************************************************
//                       Setup Modbus server                                   *
//******************************************************************************
// Create server
#ifndef MB_Gateway

  ModbusServerTCPasync MBserver;

  uint16_t memo[4];                     // Test server memory: 32 words

  // Server function to handle FC 0x03 and 0x04
  ModbusMessage FC03(ModbusMessage request) {
    ModbusMessage response;      // The Modbus message we are going to give back
    uint16_t addr = 0;           // Start address
    uint16_t words = 0;          // # of words requested
    request.get(2, addr);        // read address from request
    request.get(4, words);       // read # of words from request
    
    dataRequest = addr + words;
    received_count = received_count + dataRequest;
    //#ifdef MBDebug
    //Serial.println("dataRequest " + String(received_count));
    //#endif
    

    // Address overflow?
    if ((addr + words) > 11) {
      // Yes - send respective error response
      response.setError(request.getServerID(), request.getFunctionCode(), ILLEGAL_DATA_ADDRESS);
    }
    // Set up response
    response.add(request.getServerID(), request.getFunctionCode(), (uint8_t)(words * 2));
    // Request for FC 0x03?
    if (request.getFunctionCode() != READ_INPUT_REGISTER) {
      // Yes. Complete response
      //for (uint8_t i = 0; i < words; ++i) {
        // send increasing data values
       // response.add((uint16_t)(addr + i));
       // Serial.println("response " + i);
      //}
      response.setError(request.getServerID(), request.getFunctionCode(), ILLEGAL_FUNCTION );

    } else {
      // No, this is for FC 0x04. Response is random
      //response.clear();
      for (uint8_t i = 0; i < words; ++i) {
        // send increasing data values
        switch (i) {
          case 0:
            //response.add(mb_radon_ist_word_long1);
            response.add((uint16_t)mb_radon_ist_word_long0);
            break; 
          case 1:
            //response.add(mb_radon_ist_word_long0);
            response.add((uint16_t)mb_radon_ist_word_long1);
            break; 
          case 2:
            //response.add(mb_radon_ist_word);
            response.add((uint16_t)mb_radon_ist_word);
            break; 
          case 3:
            //response.add(mb_radon_word_long1);
            response.add((uint16_t)mb_radon_word_long0);
            break; 
          case 4:
           // response.add(mb_radon_word_long0);
            response.add((uint16_t)mb_radon_word_long1);
            break; 
          case 5:
           // response.add(mb_radon_eintrarge);
            response.add((uint16_t)mb_radon_eintrarge);
            break; 
          case 6:
            #ifdef CO2_on
            response.add((uint16_t)eco2val1);  //  CO2: 
            #else
            response.add((uint16_t)0); 
            #endif
            break;
          case 7:
            #ifdef CO2_on
            response.add((uint16_t)etvocval2);  //ppm, TVOC: 
            #else
            response.add((uint16_t)0); 
            #endif
          break; 
          case 8:
            response.add((uint16_t)f_pwm);  //Lüfter Drehzahl: 
          break; 
          case 9:
            response.add((uint16_t)measurement_lage);  //Lage: 
          break;           
          default:
            response.add((uint16_t)measurement_temp);  //Temperatur: 
          break;  
        } 

        // MODBUS SERVER


      }

    }
    // Send response back
    return response;
  }
#endif

//****************************************************************************



//******************************************************************************
//                                Setup MQTT                                   *
//******************************************************************************
  
  void callback(char* topic, byte* payload, unsigned int length) 
  {
    
    #ifdef MQTT_DEBUG
      Serial.print("topic: ");
      Serial.print(topic);
      Serial.print(" message: ");
      for (int i = 0; i < length; i++) 
      {
        Serial.print((char)payload[i]);
      }
      Serial.println();
    #endif

    if ((char)payload[0] == '1') 
    {

      ledState2 = 1;
      char payLoad[1];
      itoa(ledState2, payLoad, 10);
      client.publish(pubTopic, payLoad);
    } 
    else 
    {

      ledState2 = 0;
      char payLoad[1];
      itoa(ledState2, payLoad, 10);
      client.publish(pubTopic, payLoad);
    }

  }

  void reconnect() 
  {
    while (!client.connected()) 
    {
      #ifdef MQTT_DEBUG
      Serial.println(String(p_time) + " | MQTT connecting to Server " + p_inputmqserver + "  ");
      #endif
  
                         ////if (!client.connect(thing_id, username, thing_key)) {

       p_inputmqpass.toCharArray(p_inputmqpassc, 40);
       p_inputmquser.toCharArray(p_inputmquserc, 48);
       p_inputmqclient.toCharArray(p_inputmqclientc, 40);

       
       //Serial.println(p_inputmqclientc);
       //Serial.println(p_inputmquserc);
      // Serial.println(p_inputmqpassc);


      //if (client.connect(mqttDeviceId, mqttUsername, mqttPassword)) 
      if (client.connect(p_inputmqclientc, p_inputmquserc, p_inputmqpassc)) 
      {
        #ifdef MQTT_DEBUG
        Serial.println("--> MQTT Start Subscribe!");
        #endif
        mqtt_con_err = false;
        mq_werteaktual = "<span class='Stil5'>MQTT Connected</div>"; 
        //gMQTTUpdateFlag = true;
        //client.subscribe(subTopic);
      } else 
      {
        #ifdef MQTT_DEBUG
        Serial.print(String(p_time) + " | Mqtt failed, reconnect count= " + String(mqttReconCount) + " | State: ");
        Serial.print(client.state());
        Serial.println(" | Mqtt try again in 10 seconds");
        #endif
        mqtt_con_err = true;
        //delay(10000);
        
        mqttReconCount ++;
        if(mqttReconCount > 5) {
           mqttReconCount = 0;
           #ifdef MQTT_DEBUG
           Serial.println(" ->Mqtt try again cancel!");
           #endif
           mqtt_con_err = false;
          return;
        }
        return;

      }



    }
  }
 
//*********************************************************************************************

 
 





  //******************************************************************************
  //                            Setup NTP Time                                   *
  //******************************************************************************

 // Define NTP Client to get time
  WiFiUDP ntpUDP;
  // #define NTP_SERVER "de.pool.ntp.org"
 // NTPClient timeClient(ntpUDP, "de.pool.ntp.org");
  NTPClient timeClient(ntpUDP, "192.168.178.1");
// p_inputntp


  //NTPClient timeClient(ntpUDP);
  // Variables to save date and time
  static String formattedDate;
  static String dayStamp;
  static String timeStamp;
  static int oldUTC;
  static int ntpCallCount;
  int     gTimezone = 2; 
  int     gUTC = 2;
  int     gYear;
  int     gMonth;
  int     gDay;
  int     gHour;
  int     gMinute;
  int     gSecond;
  String  gDateTimeStr;
  char DateAndTimeString[21]; //19 digits plus the 2 null char
  int Jahre2 = 0;         // Hilfsvariable, weil Variable "Jahr" global verwendet wird  

  void NTP_setup() {
  // Initialize a NTPClient to get time
    timeClient.begin();
    // Set offset time in seconds to adjust for your timezone, for example:
    // GMT +1 = 3600
    // GMT +8 = 28800
    // GMT -1 = -3600
    // GMT 0 = 0
    timeClient.setTimeOffset(gUTC * 3600);
    //timeClient.setTimeOffset(2 * 3600);
    oldUTC = gUTC;
    ntpCallCount = 0;
  }

  void NTPupdate() {  
      gNTPupdateFlag = true;
  }


  void NTPCallback() {
    
      if(WiFi.status() != WL_CONNECTED) return;  /*{CD}*/ 
     // if(isStaticIp()) {
       // return;
     // }

      //Serial.println("--> NTP");
      if(gUTC != oldUTC)
      {
          oldUTC = gUTC;
         // timeClient.setTimeOffset(2 * 3600);
          timeClient.setTimeOffset(gUTC * 3600);
      }

      if(gNTPupdateFlag == true){
        if(!timeClient.update()) 
        {
            #ifdef NTPDebug
              Serial.println("--> timeClient.forceUpdate");
            #endif
            timeClient.forceUpdate();
        }
          gNTPupdateFlag = false;
      }

      // The formattedDate comes with the following format:
      formattedDate = timeClient.getFormattedDate(); //2019-05-24T01:21:09Z
      #ifdef NTPDebug
        Serial.println(formattedDate);
      #endif
      // Extract date
      int splitT = formattedDate.indexOf("T");
      dayStamp = formattedDate.substring(0, splitT); //2019-05-24
      // Extract time
      timeStamp = formattedDate.substring(splitT+1, formattedDate.length()-1); //01:21:09
     //Serial.print("DATE: ");
     //Serial.println(dayStamp);
      splitT = dayStamp.indexOf("-"); gYear = dayStamp.substring(0,splitT).toInt(); //Year : 2019 
      dayStamp = dayStamp.substring(splitT+1, dayStamp.length()); //05-24
      splitT = dayStamp.indexOf("-"); gMonth = dayStamp.substring(0,splitT).toInt(); //Month : 05
      gDay = dayStamp.substring(splitT+1, dayStamp.length()).toInt(); //24
      gDateTimeStr = String(gDay) + "/" + String(gMonth); // Date : 24/05
     //Serial.print("HOUR: ");
     // Serial.println(timeStamp);
      #ifdef NTPDebug
        Serial.println(timeStamp); 
      #endif
      splitT = timeStamp.indexOf(":"); gHour = timeStamp.substring(0,splitT).toInt(); //Hour : 01
      timeStamp = timeStamp.substring(splitT+1, timeStamp.length()); //21:09
      splitT = timeStamp.indexOf(":"); gMinute = timeStamp.substring(0,splitT).toInt(); //Minute : 21
      gSecond = timeStamp.substring(splitT+1, timeStamp.length()).toInt(); //09
      gDateTimeStr = gDateTimeStr + " " + String(gHour) + ":" + String(gMinute) + ":" + String(gSecond); //01:21
    
      Jahre2 = gYear %100;      // modulo, die Jahreszahl auf 2 Stellen beschränken

    // Serial.println("");
     //p_uhrzeit = String(gDay) + "." + String(gMonth) + "." + String(gYear)  + "  " + String(gHour) + ":" + String(gMinute);

     sprintf_P(DateAndTimeString, PSTR("%02d.%02d.%4d  %02d:%02d:%02d"), gDay, gMonth, gYear, gHour, gMinute, gSecond);
     p_uhrzeit = DateAndTimeString;

     sprintf_P(DateAndTimeString, PSTR("%02d:%02d:%02d"),  gHour, gMinute, gSecond);  
     p_time = DateAndTimeString;

     sprintf_P(DateAndTimeString, PSTR("%02d.%02d.%02d  %02d:%02d"), gDay, gMonth, Jahre2, gHour, gMinute);
     p_uhrzeit2 = DateAndTimeString;    
     //Serial.println(p_uhrzeit);  

      runMillis= millis();
      allSeconds=millis()/1000;
      runHours= allSeconds/3600;
      secsRemaining=allSeconds%3600;
      runMinutes=secsRemaining/60;
      runSeconds=secsRemaining%60;
      sprintf(tbuf,"%02d:%02d:%02d",runHours,runMinutes,runSeconds);


      #ifdef NTPDebug
        Serial.println(p_uhrzeit); 
      #endif

  }


  //****************************************************************************************





 //******************************************************************************
 //                        Lesen aus  EEPROM                                    *
 //****************************************************************************** 
  void ReadChartValue()
  {

       Preferences preferences;
       preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden  


       //******************************************************************************************************  
          radon_tag = preferences.getUInt("ee_radont", 0);             //"Datei"  auslesen
          radon_tag01 = preferences.getUInt("ee_rad01", 0);              //"Datei"  auslesen
          radon_tag02 = preferences.getUInt("ee_rad02", 0);              //"Datei"  auslesen
          radon_tag03 = preferences.getUInt("ee_rad03", 0);              //"Datei"  auslesen
          radon_tag04 = preferences.getUInt("ee_rad04", 0);              //"Datei"  auslesen
          radon_tag05 = preferences.getUInt("ee_rad05", 0);              //"Datei"  auslesen
          radon_tag06 = preferences.getUInt("ee_rad06", 0);              //"Datei"  auslesen
          radon_tag07 = preferences.getUInt("ee_rad07", 0);              //"Datei"  auslesen
          radon_tag08 = preferences.getUInt("ee_rad08", 0);              //"Datei"  auslesen
          radon_tag09 = preferences.getUInt("ee_rad09", 0);              //"Datei"  auslesen
          radon_tag10 = preferences.getUInt("ee_rad10", 0);              //"Datei"  auslesen
          radon_tag11 = preferences.getUInt("ee_rad11", 0);              //"Datei"  auslesen
          radon_tag12 = preferences.getUInt("ee_rad12", 0);              //"Datei"  auslesen
          radon_tag13 = preferences.getUInt("ee_rad13", 0);              //"Datei"  auslesen
          radon_tag14 = preferences.getUInt("ee_rad14", 0);              //"Datei"  auslesen
          radonTagCount = preferences.getUInt("ee_radc1", 0);              //"Datei"  auslesen
          radonTagEintrCount = preferences.getUInt("ee_radc2", 0);              //"Datei"  auslesen
          radonMore14Day = preferences.getUInt("ee_rad24d", 0);              //"Datei"  auslesen
      //******************************************************************************************************     




       chartumlauf = preferences.getUInt("chartuml", 0);             //"Datei"  auslesen  
       charcount = preferences.getUInt("charcount", 0);             //"Datei"  auslesen  

       chartime00 = preferences.getString("chartime00", " ");             //"Datei"  auslesen 
       chartime00a= preferences.getString("chartime00a", " ");             //"Datei"  auslesen 
       chartime00b = preferences.getString("chartime00b", " ");             //"Datei"  auslesen 
       chartime01 = preferences.getString("chartime01", " ");             //"Datei"  auslesen 
       chartime01a= preferences.getString("chartime01a", " ");             //"Datei"  auslesen 
       chartime01b = preferences.getString("chartime01b", " ");             //"Datei"  auslesen  
       chartime02 = preferences.getString("chartime02", " ");             //"Datei"  auslesen  
       chartime02a= preferences.getString("chartime02a", " ");             //"Datei"  auslesen 
       chartime02b = preferences.getString("chartime02b", " ");             //"Datei"  auslesen 
       chartime03 = preferences.getString("chartime03", " ");             //"Datei"  auslesen
       chartime03a= preferences.getString("chartime03a", " ");             //"Datei"  auslesen 
       chartime03b = preferences.getString("chartime03b", " ");             //"Datei"  auslesen   
       chartime04 = preferences.getString("chartime04", " ");             //"Datei"  auslesen  
       chartime04a= preferences.getString("chartime04a", " ");             //"Datei"  auslesen 
       chartime04b = preferences.getString("chartime04b", " ");             //"Datei"  auslesen 
       chartime05 = preferences.getString("chartime05", " ");             //"Datei"  auslesen  
       chartime05a= preferences.getString("chartime05a", " ");             //"Datei"  auslesen 
       chartime05b = preferences.getString("chartime05b", " ");             //"Datei"  auslesen 
       chartime06 = preferences.getString("chartime06", " ");             //"Datei"  auslesen  
       chartime06a= preferences.getString("chartime06a", " ");             //"Datei"  auslesen 
       chartime06b = preferences.getString("chartime06b", " ");             //"Datei"  auslesen 
       chartime07 = preferences.getString("chartime07", " ");             //"Datei"  auslesen  
       chartime07a= preferences.getString("chartime07a", " ");             //"Datei"  auslesen 
       chartime07b = preferences.getString("chartime07b", " ");             //"Datei"  auslesen 
       chartime08 = preferences.getString("chartime08", " ");             //"Datei"  auslesen  
       chartime08a= preferences.getString("chartime08a", " ");             //"Datei"  auslesen 
       chartime08b = preferences.getString("chartime08b", " ");             //"Datei"  auslesen 
       chartime09 = preferences.getString("chartime09", " ");             //"Datei"  auslesen  
       chartime09a= preferences.getString("chartime09a", " ");             //"Datei"  auslesen 
       chartime09b = preferences.getString("chartime09b", " ");             //"Datei"  auslesen 
       chartime10 = preferences.getString("chartime10", " ");             //"Datei"  auslesen  
       chartime10a= preferences.getString("chartime10a", " ");             //"Datei"  auslesen 
       chartime10b = preferences.getString("chartime10b", " ");             //"Datei"  auslesen 
       chartime11 = preferences.getString("chartime11", " ");             //"Datei"  auslesen  
       chartime11a= preferences.getString("chartime11a", " ");             //"Datei"  auslesen 
       chartime11b = preferences.getString("chartime11b", " ");             //"Datei"  auslesen 
       chartime12 = preferences.getString("chartime12", " ");             //"Datei"  auslesen  
       chartime12a= preferences.getString("chartime12a", " ");             //"Datei"  auslesen 
       chartime12b = preferences.getString("chartime12b", " ");             //"Datei"  auslesen 
       chartime13 = preferences.getString("chartime13", " ");             //"Datei"  auslesen  
       chartime13a= preferences.getString("chartime13a", " ");             //"Datei"  auslesen 
       chartime13b = preferences.getString("chartime13b", " ");             //"Datei"  auslesen 
       chartime14 = preferences.getString("chartime14", " ");             //"Datei"  auslesen  
      // chartime14a= preferences.getString("chartime14a", " ");             //"Datei"  auslesen 
      // chartime14b = preferences.getString("chartime14b", " ");             //"Datei"  auslesen 
     //******************************************************************************************************  

        

     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ ReadChartValue __");
     #endif

  }
  //*******************************************************************************


 //******************************************************************************
 //                        Schreiben in EEPROM                                  *
 //****************************************************************************** 
       
  void WritedChartValue()
  {

       Preferences preferences;
       preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden  



        //-------------------
        preferences.putUInt("ee_radont", radon_tag);                   //Variable  speichern  
        preferences.putUInt("ee_rad01", radon_tag01);                  //Variable  speichern  
        preferences.putUInt("ee_rad02", radon_tag02);                  //Variable  speichern  
        preferences.putUInt("ee_rad03", radon_tag03);                  //Variable  speichern  
        preferences.putUInt("ee_rad04", radon_tag04);                  //Variable  speichern  
        preferences.putUInt("ee_rad05", radon_tag05);                  //Variable  speichern  
        preferences.putUInt("ee_rad06", radon_tag06);                  //Variable  speichern  
        preferences.putUInt("ee_rad07", radon_tag07);                  //Variable  speichern  
        preferences.putUInt("ee_rad08", radon_tag08);                  //Variable  speichern  
        preferences.putUInt("ee_rad09", radon_tag09);                  //Variable  speichern  
        preferences.putUInt("ee_rad10", radon_tag10);                  //Variable  speichern  
        preferences.putUInt("ee_rad11", radon_tag11);                  //Variable  speichern  
        preferences.putUInt("ee_rad12", radon_tag12);                  //Variable  speichern  
        preferences.putUInt("ee_rad13", radon_tag13);                  //Variable  speichern  
        preferences.putUInt("ee_rad14", radon_tag14);                  //Variable  speichern  
        preferences.putUInt("ee_radc1", radonTagCount);                //Variable  speichern  
        preferences.putUInt("ee_radc2", radonTagEintrCount);           //Variable  speichern  
        preferences.putUInt("ee_rad24d", radonMore14Day);              //Variable  speichern  
        //-------------------





       preferences.putUInt("charcount", charcount);                   //Variable  speichern  
       preferences.putUInt("chartuml", chartumlauf);                   //Variable  speichern 
       
 
       preferences.putString("chartime00", chartime00);                   //Variable  speichern 
       preferences.putString("chartime00a", chartime00a);                   //Variable  speichern 
       preferences.putString("chartime00b", chartime00b);                   //Variable  speichern 
       preferences.putString("chartime01", chartime01);                   //Variable  speichern 
       preferences.putString("chartime01a", chartime01a);                   //Variable  speichern 
       preferences.putString("chartime01b", chartime01b);                   //Variable  speichern 
       preferences.putString("chartime02", chartime02);                   //Variable  speichern
       preferences.putString("chartime02a", chartime02a);                   //Variable  speichern 
       preferences.putString("chartime02b", chartime02b);                   //Variable  speichern  
       preferences.putString("chartime03", chartime03);                   //Variable  speichern
       preferences.putString("chartime03a", chartime03a);                   //Variable  speichern 
       preferences.putString("chartime03b", chartime03b);                   //Variable  speichern  
       preferences.putString("chartime04", chartime04);                   //Variable  speichern
       preferences.putString("chartime04a", chartime04a);                   //Variable  speichern 
       preferences.putString("chartime04b", chartime04b);                   //Variable  speichern  
       preferences.putString("chartime05", chartime05);                   //Variable  speichern
       preferences.putString("chartime05a", chartime05a);                   //Variable  speichern 
       preferences.putString("chartime05b", chartime05b);                   //Variable  speichern  
       preferences.putString("chartime06", chartime06);                   //Variable  speichern 
       preferences.putString("chartime06a", chartime06a);                   //Variable  speichern 
       preferences.putString("chartime06b", chartime06b);                   //Variable  speichern  
       preferences.putString("chartime07", chartime07);                   //Variable  speichern 
       preferences.putString("chartime07a", chartime07a);                   //Variable  speichern 
       preferences.putString("chartime07b", chartime07b);                   //Variable  speichern  
       preferences.putString("chartime08", chartime08);                   //Variable  speichern 
       preferences.putString("chartime08a", chartime08a);                   //Variable  speichern 
       preferences.putString("chartime08b", chartime08b);                   //Variable  speichern  
       preferences.putString("chartime09", chartime09);                   //Variable  speichern 
       preferences.putString("chartime09a", chartime09a);                   //Variable  speichern 
       preferences.putString("chartime09b", chartime09b);                   //Variable  speichern  
       preferences.putString("chartime10", chartime10);                   //Variable  speichern 
       preferences.putString("chartime10a", chartime10a);                   //Variable  speichern 
       preferences.putString("chartime10b", chartime10b);                   //Variable  speichern  
       preferences.putString("chartime11", chartime11);                   //Variable  speichern 
       preferences.putString("chartime11a", chartime11a);                   //Variable  speichern 
       preferences.putString("chartime11b", chartime11b);                   //Variable  speichern  
       preferences.putString("chartime12", chartime12);                   //Variable  speichern 
       preferences.putString("chartime12a", chartime12a);                   //Variable  speichern 
       preferences.putString("chartime12b", chartime12b);                   //Variable  speichern  
       preferences.putString("chartime13", chartime13);                   //Variable  speichern 
       preferences.putString("chartime13a", chartime13a);                   //Variable  speichern 
       preferences.putString("chartime13b", chartime13b);                   //Variable  speichern  
       preferences.putString("chartime14", chartime14);                   //Variable  speichern 
      // preferences.putString("chartime14a", chartime14a);                   //Variable  speichern 
      // preferences.putString("chartime14b", chartime14b);                   //Variable  speichern  

      
  
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Writed Chart Value __");
     #endif

  }
  //*******************************************************************************









  //******************************************************************************
  //                   Grafikdaten lesen aus File System                         *
  //******************************************************************************
  void datei_schreiben()  // tvoc Daten  charInts4[42]   dateiGr01
  {
    File file = SPIFFS.open(dateiGr01, "w");
    //File file = SPIFFS.open(dateiGr01, FILE_APPEND);
     
    if(!file){
        // Die Datei ist nicht vorhanden
        #ifdef NVS_DEBUG
          Serial.println("Die Datei " + String(dateiGr01) + " existiert nicht!");
        #endif 
        // Datei mit Schreibrechten öffnen, wird erstellt wenn nicht vorhanden
        File file = SPIFFS.open(dateiGr01, "w");
        #ifdef NVS_DEBUG
          Serial.println("Datei " + String(dateiGr01) + " wurde erstellt!");
        #endif
        // Daten in die Datei schreiben
        file.print("0");
        // Schließen der Datei
        file.close();
      }else{
          // Die Datei ist vorhanden
          #ifdef NVS_DEBUG
            Serial.println("In die Datei " + String(dateiGr01) + " schreiben!");
            for (int i=0; i <= 43; i++){
              Serial.print("Zeile ");
              Serial.print(i);
              Serial.print(": ");
              Serial.println(charInts4[i]);           // ... erst ausgegeben
            } 
         #endif
          // Wiederhole 43 Mal:   Inhalt schreiben
          for (int i=0; i <= 43; i++){
            file.print(String(charInts4[i]) + "\n");  
          } 
          file.close();       
      }
  }


  void datei_lesen_line()  //tvoc  charInts4[42]   dateiGr01
  {
      String data;
      unsigned int zeilenZaehler = 0;
      int i = 0;
      File file = SPIFFS.open(dateiGr01, "r");
      
      #ifdef NVS_DEBUG
        Serial.println("Inhalt der geöffneten Datei:");
      #endif

      while(file.available()) {
        data = file.readStringUntil('\n'); // lesen bis Zeilenumbruch...
        #ifdef NVS_DEBUG
          Serial.print("Zeile ");
          Serial.print(zeilenZaehler);
          Serial.print(": ");
          Serial.println(data);           // ... und wieder ausgegeben
        #endif
        charInts4[i] = data.toInt();      
        i++;
        zeilenZaehler++;
      } 

      file.close();
      #ifdef NVS_DEBUG
        Serial.println(" ");
      #endif

  }

  
  void datei_lesen_ges()
  {

          // Hier wird einfach nur der Inhalt der Datei in Dauerschleife ausgegeben
          File file = SPIFFS.open(dateiGr01, "r");
          Serial.println("Datei " + String(dateiGr01) + " lesen!");
          
          int i;
          Serial.println();
          for(i=0;i<file.size();i++){
                
          //Serial.print((char)file.read());
          Serial.print((char)file.read());
                
          }
              
          file.close();
          Serial.println(" ");
  }
  //*******************************************************************************

  //*******************************************************************************
  void datei_schreiben2()  // co2 Daten   charInts3[42]   dateiGr02
  {
    File file = SPIFFS.open(dateiGr02, "w");
    //File file = SPIFFS.open(dateiGr01, FILE_APPEND);
     
    if(!file){
        // Die Datei ist nicht vorhanden
        #ifdef NVS_DEBUG
          Serial.println("Die Datei " + String(dateiGr02) + " existiert nicht!");
        #endif 
        // Datei mit Schreibrechten öffnen, wird erstellt wenn nicht vorhanden
        File file = SPIFFS.open(dateiGr02, "w");
        #ifdef NVS_DEBUG
          Serial.println("Datei " + String(dateiGr02) + " wurde erstellt!");
        #endif
        // Daten in die Datei schreiben
        file.print("0");
        // Schließen der Datei
        file.close();
      }else{
          // Die Datei ist vorhanden
          #ifdef NVS_DEBUG
            Serial.println("In die Datei " + String(dateiGr02) + " schreiben!");
            for (int i=0; i <= 43; i++){
              Serial.print("Zeile ");
              Serial.print(i);
              Serial.print(": ");
              Serial.println(charInts3[i]);           // ... erst ausgegeben
            } 
         #endif
          // Wiederhole 43 Mal:   Inhalt schreiben
          for (int i=0; i <= 43; i++){
            file.print(String(charInts3[i]) + "\n");  
          } 
          file.close();       
      }
  }


  void datei_lesen_line2()    //co2  charInts3[42]   dateiGr02
  {
      String data;
      unsigned int zeilenZaehler = 0;
      int i = 0;
      File file = SPIFFS.open(dateiGr02, "r");
      
      #ifdef NVS_DEBUG
        Serial.println("Inhalt der geöffneten Datei:");
      #endif

      while(file.available()) {
        data = file.readStringUntil('\n'); // lesen bis Zeilenumbruch...
        #ifdef NVS_DEBUG
          Serial.print("Zeile ");
          Serial.print(zeilenZaehler);
          Serial.print(": ");
          Serial.println(data);           // ... und wieder ausgegeben
        #endif
        charInts3[i] = data.toInt();      
        i++;
        zeilenZaehler++;
      } 

      file.close();
      #ifdef NVS_DEBUG
        Serial.println(" ");
      #endif

  }


 //********************************************************************************

 //*******************************************************************************
  void datei_schreiben3()  // radon Daten     charInts[42]      dateiGr03
  {
    File file = SPIFFS.open(dateiGr03, "w");
    //File file = SPIFFS.open(dateiGr01, FILE_APPEND);
     
    if(!file){
        // Die Datei ist nicht vorhanden
        #ifdef NVS_DEBUG
          Serial.println("Die Datei " + String(dateiGr03) + " existiert nicht!");
        #endif 
        // Datei mit Schreibrechten öffnen, wird erstellt wenn nicht vorhanden
        File file = SPIFFS.open(dateiGr03, "w");
        #ifdef NVS_DEBUG
          Serial.println("Datei " + String(dateiGr03) + " wurde erstellt!");
        #endif
        // Daten in die Datei schreiben
        file.print("0");
        // Schließen der Datei
        file.close();
      }else{
          // Die Datei ist vorhanden
          #ifdef NVS_DEBUG
            Serial.println("In die Datei " + String(dateiGr03) + " schreiben!");
            for (int i=0; i <= 43; i++){
              Serial.print("Zeile ");
              Serial.print(i);
              Serial.print(": ");
              Serial.println(charInts[i]);           // ... erst ausgegeben
            } 
         #endif
          // Wiederhole 43 Mal:   Inhalt schreiben
          for (int i=0; i <= 43; i++){
            file.print(String(charInts[i]) + "\n");  
          } 
          file.close();       
      }
  }


  void datei_lesen_line3()  //Radon   charInts[42]  dateiGr03
  {
      String data;
      unsigned int zeilenZaehler = 0;
      int i = 0;
      File file = SPIFFS.open(dateiGr03, "r");
      
      #ifdef NVS_DEBUG
        Serial.println("Inhalt der geöffneten Datei:");
      #endif

      while(file.available()) {
        data = file.readStringUntil('\n'); // lesen bis Zeilenumbruch...
        #ifdef NVS_DEBUG
          Serial.print("Zeile ");
          Serial.print(zeilenZaehler);
          Serial.print(": ");
          Serial.println(data);           // ... und wieder ausgegeben
        #endif
        charInts[i] = data.toInt();      
        i++;
        zeilenZaehler++;
      } 

      file.close();
      #ifdef NVS_DEBUG
        Serial.println(" ");
      #endif

  }
  //********************************************************************************


 //*******************************************************************************
  void datei_schreiben5()
  {
    File file = SPIFFS.open(dateiGr05, "w");
    //File file = SPIFFS.open(dateiGr01, FILE_APPEND);
     
    if(!file){
        // Die Datei ist nicht vorhanden
        #ifdef NVS_DEBUG
          Serial.println("Die Datei " + String(dateiGr05) + " existiert nicht!");
        #endif 
        // Datei mit Schreibrechten öffnen, wird erstellt wenn nicht vorhanden
        File file = SPIFFS.open(dateiGr05, "w");
        #ifdef NVS_DEBUG
          Serial.println("Datei " + String(dateiGr05) + " wurde erstellt!");
        #endif
        // Daten in die Datei schreiben
        file.print("0");
        // Schließen der Datei
        file.close();
      }else{
          // Die Datei ist vorhanden
          #ifdef NVS_DEBUG
            Serial.println("In die Datei " + String(dateiGr05) + " schreiben!");
            for (int i=0; i <= 43; i++){
              Serial.print("Zeile ");
              Serial.print(i);
              Serial.print(": ");
              Serial.println(charInts5[i]);           // ... erst ausgegeben
            } 
         #endif
          // Wiederhole 43 Mal:   Inhalt schreiben
          for (int i=0; i <= 43; i++){
            file.print(String(charInts5[i]) + "\n");  
          } 
          file.close();       
      }
  }


  void datei_lesen_line5()
  {
      String data;
      unsigned int zeilenZaehler = 0;
      int i = 0;
      File file = SPIFFS.open(dateiGr05, "r");
      
      #ifdef NVS_DEBUG
        Serial.println("Inhalt der geöffneten Datei:");
      #endif

      while(file.available()) {
        data = file.readStringUntil('\n'); // lesen bis Zeilenumbruch...
        #ifdef NVS_DEBUG
          Serial.print("Zeile ");
          Serial.print(zeilenZaehler);
          Serial.print(": ");
          Serial.println(data);           // ... und wieder ausgegeben
        #endif
        charInts5[i] = data.toInt();      
        i++;
        zeilenZaehler++;
      } 

      file.close();
      #ifdef NVS_DEBUG
        Serial.println(" ");
      #endif

  }
  //********************************************************************************




  //******************************************************************************
  //                        ModbusMessage für FC4                                *
  //******************************************************************************
  void handleData(ModbusMessage response, uint32_t token) 
  {
    //Serial.println("-------------------------------------");
    //Serial.printf("Response: serverID=%d, FC=%d, Token=%08X, length=%d:\n", response.getServerID(), response.getFunctionCode(), token, response.size());
    //Serial.println(response.getServerID());
    //Serial.println(response.getFunctionCode());
    //Serial.println(response.size());
    
    i_loop = 0;
    mb_byte_size = response.size();

    for (auto& byte : response) {
      mb_arry_byte[i_loop] = byte;
      //Serial.printf("%02X ", byte);
      //Serial.println(mb_arry_byte[i_loop]);
      i_loop ++;
    }
    #ifdef MBDebug
    Serial.println("response.size() " + response.size());
    #endif
    
    response_size = response_size + response.size();



    //Serial.println("------------");
    // alle bytes im Array
   // for (byte i = 0; i < mb_byte_size; i = i + 1) {
     // Serial.println(mb_arry_byte[i]);
     // Serial.printf(" ", mb_arry_byte[i]);
    //} 
  
    
    //Serial.println("------------");
    // nur daten
    mb_byte_resault = mb_byte_size - mb_byte_header;
    mb_byte_header_t = mb_byte_header - 1;
    //for (byte i = mb_byte_header_t; i < mb_byte_size; i = i + 1) {
    // Serial.println(mb_arry_byte[i]);
      //Serial.printf("%02X ", mb_arry_byte[i]);
    // } 
    //Serial.println("");
    
    responsegetFunctionCode = response.getFunctionCode();

    //Serial.println("responsegetFunctionCode: " + String(responsegetFunctionCode));
    if (response.getFunctionCode() == 4 || response.getServerID() == 2 || response.size() == 15){

      //mb_word = word(mb_arry_byte[4], mb_arry_byte[5]);
      
      mb_radon_ist_word_long0 = word(mb_arry_byte[3], mb_arry_byte[4]);
      mb_radon_ist_word_long1 = word(mb_arry_byte[5], mb_arry_byte[6]);
      mb_radon_ist_long = mb_radon_ist_word_long0 + mb_radon_ist_word_long1;
      //Serial.println("Radon Ist Long: " + String(mb_radon_ist_word_long0) + " " + String(mb_radon_ist_word_long1));
      //Serial.println("Radon Ist Long: " + String(mb_arry_byte[3]) + " " + String(mb_arry_byte[4]) + " " + String(mb_arry_byte[5]) + " " + String(mb_arry_byte[6]) + "  : "  + String(mb_radon_ist_long));
      #ifdef MBDebug
      Serial.println("Radon Ist Long: " + String(mb_radon_ist_long));
      #endif

      //mb_radon_ist_long = ((unsigned long)mb_arry_byte[3]) | (((unsigned long)mb_arry_byte[2]) << 8) | (((unsigned long)mb_arry_byte[1]) << 16) | (((unsigned long)mb_arry_byte[0]) << 24);
      //Serial.println(String(mb_radon_ist_long));

      mb_radon_ist_word = word(mb_arry_byte[7], mb_arry_byte[8]);
      val3 = mb_radon_ist_word;
      fval1 = mb_radon_ist_word;
      //Serial.println("Radon Ist Word: "  + String(mb_arry_byte[7]) + " " + String(mb_arry_byte[8]) + "  : "  + String(mb_radon_ist_word));


         if(val3 <= 100){     //   0-100

            val3max = 300;    //Max Wert 300 unterer bereich
            vredTo = val3max;
            vredFrom = 200;
            vyellowTo = 200;
            vyellowFrom = 100;
            vgreenTo = 100;
            vgreenFrom = 50;
            val3_color = "0, 250, 0, 0.3";  //grün

          }else if(val3 <= 200){ // 100-200

            val3max = 300;    //Max Wert 300 unterer bereich
            vredTo = val3max;
            vredFrom = 200;
            vyellowTo = 200;
            vyellowFrom = 100;
            vgreenTo = 100;
            vgreenFrom = 50;
            val3_color = "250, 200, 0, 0.3"; //orange

          }else if(val3 <= 300){  //200-300

            val3max = 300;    //Max Wert 300 unterer bereich
            vredTo = val3max;
            vredFrom = 200;
            vyellowTo = 200;
            vyellowFrom = 100;
            vgreenTo = 100;
            vgreenFrom = 50;
            val3_color = "250, 0, 0, 0.3"; //rot

          }else if(val3 <= 500){  //300-500

            val3max = 500;
            vredTo = val3max;
            vredFrom = 200;
            vyellowTo = 200;
            vyellowFrom = 100;
            vgreenTo = 100;
            vgreenFrom = 50;
            val3_color = "250, 0, 0, 0.3"; //rot

          }else if(val3 <= 500){

            val3max = 500;
            vredTo = val3max;
            vredFrom = 200;
            vyellowTo = 200;
            vyellowFrom = 100;
            vgreenTo = 100;
            vgreenFrom = 50;
            val3_color = "250, 0, 0, 0.3";
        
          }else{

            val3max = val3 + 100;
            vredTo = val3max;
            vredFrom = 200;
            vyellowTo = 200;
            vyellowFrom = 100;
            vgreenTo = 100;
            vgreenFrom = 50;
            val3_color = "250, 0, 0, 0.3";

          }

      
      #ifdef MBDebug
      Serial.println("Radon Ist Word: " + String(mb_radon_ist_word));
      #endif

      mb_radon_word_long0 = word(mb_arry_byte[9], mb_arry_byte[10]);
      mb_radon_word_long1 = word(mb_arry_byte[11], mb_arry_byte[12]);
      mb_radon_long = mb_radon_word_long0 + mb_radon_word_long1;
      mb_radon_int = mb_radon_word_long1;
      //Serial.println("Radon AVG Long: " + String(mb_radon_word_long0) + " " + String(mb_radon_word_long1));
      //Serial.println("Radon AVG Long: " + String(mb_arry_byte[9]) + " " + String(mb_arry_byte[10]) + " " + String(mb_arry_byte[11]) + " " + String(mb_arry_byte[12]) + "  : "   + String(mb_radon_long));
      #ifdef MBDebug
      Serial.println("Radon AVG Long: " + String(mb_radon_long));
      #endif
      //Serial.println("UpdateFlag!");

      mb_radon_eintrarge = word(mb_arry_byte[13], mb_arry_byte[14]);
      //Serial.println("Einträge: " + String(mb_arry_byte[13]) + " " + String(mb_arry_byte[14]) + "  : "  + String(mb_radon_eintrarge));
      #ifdef MBDebug
      Serial.println("Einträge: " + String(mb_radon_eintrarge));
      #endif
      
      #ifdef MBDebug
      Serial.println("--> Sensor Daten aktualisiert");  
      #endif 
      mb_werteaktual = "<span class='Stil5'>Sensor Daten aktuell</div>";
      p_uhrzeit_last = p_time;
      //p_uhrzeit_last = String(tbuf);
       val_sensor_aktual = 11;
     

      r0_val3 = String(mb_radon_ist_long);

      // if (gRADONupdateSinifferFlag == false){
     
      //gMQTTUpdateFlag = true;
      //gcloudUpdateFlag = true; 
 
        if (minUpdateFlag == true){
          minUpdateFlag = false;
          gMQTTUpdateFlag = true;
          gcloudUpdateFlag = true; 
        }


      //---- Tageswerte
      datei_lesen_line();  // TVOC Daten
      datei_lesen_line2();  // co2 Daten
      datei_lesen_line3();  // radon Daten
      datei_lesen_line5();  // Hz Daten
      ReadChartValue();
      
    

      #ifdef DataDebug
      Serial.println("Liniendiagramm gefüllt: " + String(chartumlauf));  
      Serial.println("Welcher Eintag in linie: " + String(charcount));  
      #endif 
   
         //wenn Grafik voll gezeichnet ist hinten anhängen
        charInts5[42] = f_pwm; 
        charInts[42] = mb_radon_ist_word;
        chartime14 = String(p_uhrzeit2);
        #ifdef CO2_on
        charInts3[42] = eco2val1;
        charInts4[42] = etvocval2;
        #else
        charInts3[42] = random(0, 50);
        charInts4[42] = random(5, 60);
        #endif

       // }



      stringtime = "labels : ['" + chartime00 + "','','','" + chartime01 + "','','','" + chartime02 + "','','','" + chartime03 + "','','','" + chartime04 + "','','','" + chartime05 + "','','','" + chartime06 + "','','','" + chartime07 + "','','','" + chartime08 + "','','','" + chartime09 + "','','','" + chartime10 + "','','','" + chartime11 + "','','','" + chartime12 + "','','','" + chartime13 + "','','','" + chartime14 + "',],";
      // wird im Server.on gemacht


      charcount ++;
      if(charcount >= 43){
        charcount = 0;
        //chartumlauf = 1; //ab jetzt die variablen nach vorne schieben.
      }

     if (chartumlauf >= 1){
         // variablen nach vorne schieben.
        chartime00 = chartime00a;
        chartime00a = chartime00b;
        chartime00b = chartime01;

        chartime01 = chartime01a;
        chartime01a = chartime01b;
        chartime01b = chartime02;

        chartime02 = chartime02a;
        chartime02a = chartime02b;
        chartime02b = chartime03;

        chartime03 = chartime03a;
        chartime03a = chartime03b;
        chartime03b = chartime04;

        chartime04 = chartime04a;
        chartime04a = chartime04b;
        chartime04b = chartime05;

        chartime05 = chartime05a;
        chartime05a = chartime05b;
        chartime05b = chartime06;

        chartime06 = chartime06a;
        chartime06a = chartime06b;
        chartime06b = chartime07;

        chartime07 = chartime07a;
        chartime07a = chartime07b;
        chartime07b = chartime08;

        chartime08 = chartime08a;
        chartime08a = chartime08b;
        chartime08b = chartime09;

        chartime09 = chartime09a;
        chartime09a = chartime09b;
        chartime09b = chartime10;

        chartime10 = chartime10a;
        chartime10a = chartime10b;
        chartime10b = chartime11;

        chartime11 = chartime11a;
        chartime11a = chartime11b;
        chartime11b = chartime12;

        chartime12 = chartime12a;
        chartime12a = chartime12b;
        chartime12b = chartime13;

        chartime13 = chartime13a;
        chartime13a = chartime13b;
        chartime13b = chartime14;


        

        charInts[0] = charInts[1];
        charInts[1] = charInts[2];
        charInts[2] = charInts[3];
        charInts[3] = charInts[4];
        charInts[4] = charInts[5];
        charInts[5] = charInts[6];
        charInts[6] = charInts[7];
        charInts[7] = charInts[8];
        charInts[8] = charInts[9];
        charInts[9] = charInts[10];
        charInts[10] = charInts[11];
        charInts[11] = charInts[12];
        charInts[12] = charInts[13];
        charInts[13] = charInts[14];
        charInts[14] = charInts[15];
        charInts[15] = charInts[16];
        charInts[16] = charInts[17];
        charInts[17] = charInts[18];
        charInts[18] = charInts[19];
        charInts[19] = charInts[20];
        charInts[20] = charInts[21];
        charInts[21] = charInts[22];
        charInts[22] = charInts[23];
        charInts[23] = charInts[24];
        charInts[24] = charInts[25];
        charInts[25] = charInts[26];
        charInts[26] = charInts[27];
        charInts[27] = charInts[28];
        charInts[28] = charInts[29];
        charInts[29] = charInts[30];
        charInts[30] = charInts[31];
        charInts[31] = charInts[32];
        charInts[32] = charInts[33];
        charInts[33] = charInts[34];
        charInts[34] = charInts[35];
        charInts[35] = charInts[36];
        charInts[36] = charInts[37];
        charInts[37] = charInts[38];
        charInts[38] = charInts[39];
        charInts[39] = charInts[40];
        charInts[40] = charInts[41];
        charInts[41] = charInts[42];
       // charInts[42] = charInts[43];

        charInts3[0] = charInts3[1];
        charInts3[1] = charInts3[2];
        charInts3[2] = charInts3[3];
        charInts3[3] = charInts3[4];
        charInts3[4] = charInts3[5];
        charInts3[5] = charInts3[6];
        charInts3[6] = charInts3[7];
        charInts3[7] = charInts3[8];
        charInts3[8] = charInts3[9];
        charInts3[9] = charInts3[10];
        charInts3[10] = charInts3[11];
        charInts3[11] = charInts3[12];
        charInts3[12] = charInts3[13];
        charInts3[13] = charInts3[14];
        charInts3[14] = charInts3[15];
        charInts3[15] = charInts3[16];
        charInts3[16] = charInts3[17];
        charInts3[17] = charInts3[18];
        charInts3[18] = charInts3[19];
        charInts3[19] = charInts3[20];
        charInts3[20] = charInts3[21];
        charInts3[21] = charInts3[22];
        charInts3[22] = charInts3[23];
        charInts3[23] = charInts3[24];
        charInts3[24] = charInts3[25];
        charInts3[25] = charInts3[26];
        charInts3[26] = charInts3[27];
        charInts3[27] = charInts3[28];
        charInts3[28] = charInts3[29];
        charInts3[29] = charInts3[30];
        charInts3[30] = charInts3[31];
        charInts3[31] = charInts3[32];
        charInts3[32] = charInts3[33];
        charInts3[33] = charInts3[34];
        charInts3[34] = charInts3[35];
        charInts3[35] = charInts3[36];
        charInts3[36] = charInts3[37];
        charInts3[37] = charInts3[38];
        charInts3[38] = charInts3[39];
        charInts3[39] = charInts3[40];
        charInts3[40] = charInts3[41];
        charInts3[41] = charInts3[42];

        charInts4[0] = charInts4[1];
        charInts4[1] = charInts4[2];
        charInts4[2] = charInts4[3];
        charInts4[3] = charInts4[4];
        charInts4[4] = charInts4[5];
        charInts4[5] = charInts4[6];
        charInts4[6] = charInts4[7];
        charInts4[7] = charInts4[8];
        charInts4[8] = charInts4[9];
        charInts4[9] = charInts4[10];
        charInts4[10] = charInts4[11];
        charInts4[11] = charInts4[12];
        charInts4[12] = charInts4[13];
        charInts4[13] = charInts4[14];
        charInts4[14] = charInts4[15];
        charInts4[15] = charInts4[16];
        charInts4[16] = charInts4[17];
        charInts4[17] = charInts4[18];
        charInts4[18] = charInts4[19];
        charInts4[19] = charInts4[20];
        charInts4[20] = charInts4[21];
        charInts4[21] = charInts4[22];
        charInts4[22] = charInts4[23];
        charInts4[23] = charInts4[24];
        charInts4[24] = charInts4[25];
        charInts4[25] = charInts4[26];
        charInts4[26] = charInts4[27];
        charInts4[27] = charInts4[28];
        charInts4[28] = charInts4[29];
        charInts4[29] = charInts4[30];
        charInts4[30] = charInts4[31];
        charInts4[31] = charInts4[32];
        charInts4[32] = charInts4[33];
        charInts4[33] = charInts4[34];
        charInts4[34] = charInts4[35];
        charInts4[35] = charInts4[36];
        charInts4[36] = charInts4[37];
        charInts4[37] = charInts4[38];
        charInts4[38] = charInts4[39];
        charInts4[39] = charInts4[40];
        charInts4[40] = charInts4[41];
        charInts4[41] = charInts4[42];        

        charInts5[0] = charInts5[1];
        charInts5[1] = charInts5[2];
        charInts5[2] = charInts5[3];
        charInts5[3] = charInts5[4];
        charInts5[4] = charInts5[5];
        charInts5[5] = charInts5[6];
        charInts5[6] = charInts5[7];
        charInts5[7] = charInts5[8];
        charInts5[8] = charInts5[9];
        charInts5[9] = charInts5[10];
        charInts5[10] = charInts5[11];
        charInts5[11] = charInts5[12];
        charInts5[12] = charInts5[13];
        charInts5[13] = charInts5[14];
        charInts5[14] = charInts5[15];
        charInts5[15] = charInts5[16];
        charInts5[16] = charInts5[17];
        charInts5[17] = charInts5[18];
        charInts5[18] = charInts5[19];
        charInts5[19] = charInts5[20];
        charInts5[20] = charInts5[21];
        charInts5[21] = charInts5[22];
        charInts5[22] = charInts5[23];
        charInts5[23] = charInts5[24];
        charInts5[24] = charInts5[25];
        charInts5[25] = charInts5[26];
        charInts5[26] = charInts5[27];
        charInts5[27] = charInts5[28];
        charInts5[28] = charInts5[29];
        charInts5[29] = charInts5[30];
        charInts5[30] = charInts5[31];
        charInts5[31] = charInts5[32];
        charInts5[32] = charInts5[33];
        charInts5[33] = charInts5[34];
        charInts5[34] = charInts5[35];
        charInts5[35] = charInts5[36];
        charInts5[36] = charInts5[37];
        charInts5[37] = charInts5[38];
        charInts5[38] = charInts5[39];
        charInts5[39] = charInts5[40];
        charInts5[40] = charInts5[41];
        charInts5[41] = charInts5[42];

     }
     chartumlauf = 1; //ab jetzt die variablen nach vorne schieben.
      //*******************************************************************************************************


          
          if(radonTagEintrCount >= 14){
             radonTagEintrCount = 0;
             radonMore14Day = 1;  // jetzt umladen der Einträge
          }

      radon_tag = radon_tag + mb_radon_ist_word;
      radonTagCount ++ ;
      radon_temp = radon_tag / radonTagCount;

      #ifdef DataDebug
      Serial.println("Radon Summe: " + String(radon_tag));  
      Serial.println("Counts für AVG Radon Tag: " + String(radonTagCount));  
      Serial.println("Radon Tag: " + String(radon_temp));  
      Serial.println("Tageszählung aktuell: " + String(radonTagEintrCount)); 
      Serial.println("Mehr als 14 Tage: " + String(radonMore14Day)); 
      #endif 

      if (radonMore14Day == 1){
        radon_tag14 = radon_temp;
        rgbchart14 = rgbchartvorgabeSel;
        stringtime2 = "labels : ['1','2','3','4','5','6','7','8','9','10','11','12','13','Now',],";
      } 

      #ifdef DataDebug
      Serial.println("radon_tag01: " + String(radon_tag01));  
      Serial.println("radon_tag02: " + String(radon_tag02));  
      Serial.println("radon_tag03: " + String(radon_tag03));  
      Serial.println("radon_tag04: " + String(radon_tag04));  
      Serial.println("radon_tag05: " + String(radon_tag05));  
      Serial.println("radon_tag09: " + String(radon_tag06));  
      Serial.println("radon_tag07: " + String(radon_tag07));  
      Serial.println("radon_tag08: " + String(radon_tag08));  
      Serial.println("radon_tag09: " + String(radon_tag09));  
      Serial.println("radon_tag10: " + String(radon_tag10));  
      Serial.println("radon_tag11: " + String(radon_tag11));  
      Serial.println("radon_tag12: " + String(radon_tag12));  
      Serial.println("radon_tag13: " + String(radon_tag13));  
      Serial.println("radon_tag14: " + String(radon_tag14));  
      #endif 

      if (radonMore14Day == 0){  // befüllung bis zm 14ten Tag mit livewerten, dann nicht mehr
      
            rgbchart01 = "rgb(62,149,205)";
            rgbchart02 = "rgb(62,149,205)";
            rgbchart03 = "rgb(62,149,205)";
            rgbchart04 = "rgb(62,149,205)";
            rgbchart05 = "rgb(62,149,205)";
            rgbchart06 = "rgb(62,149,205)";
            rgbchart07 = "rgb(62,149,205)";
            rgbchart08 = "rgb(62,149,205)";
            rgbchart09 = "rgb(62,149,205)";
            rgbchart10 = "rgb(62,149,205)";
            rgbchart11 = "rgb(62,149,205)";
            rgbchart12 = "rgb(62,149,205)";
            rgbchart13 = "rgb(62,149,205)";
            rgbchart14 = "rgb(62,149,205)";
      
           switch (radonTagEintrCount) {
              case 0:
                radon_tag01 = radon_temp;
                rgbchart01 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['Now','2','3','4','5','6','7','8','9','10','11','12','13','14',],";
                break; 
              case 1:
                radon_tag02 = radon_temp;
                rgbchart02 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','Now','3','4','5','6','7','8','9','10','11','12','13','14',],";
                break;          
              case 2:
                radon_tag03 = radon_temp;
                rgbchart03 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','Now','4','5','6','7','8','9','10','11','12','13','14',],";
                break;             
              case 3:
                radon_tag04 = radon_temp;
                rgbchart04 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','Now','5','6','7','8','9','10','11','12','13','14',],";
                break;        
              case 4:
                radon_tag05 = radon_temp;
                rgbchart05 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','Now','6','7','8','9','10','11','12','13','14',],";
                break; 
              case 5:
                radon_tag06 = radon_temp;
                rgbchart06 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','5','Now','7','8','9','10','11','12','13','14',],";
                break; 
              case 6:
                radon_tag07 = radon_temp;
                rgbchart07 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','5','6','Now','8','9','10','11','12','13','14',],";
                break; 
              case 7:
                radon_tag08 = radon_temp;
                rgbchart08 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','5','6','7','Now','9','10','11','12','13','14',],";
                break; 
              case 8:
                radon_tag09 = radon_temp;
                rgbchart09 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','5','6','7','8','Now','10','11','12','13','14',],";
                break; 
              case 9:
                radon_tag10 = radon_temp;
                rgbchart10 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','5','6','7','8','9','Now','11','12','13','14',],";
                break; 
              case 10:
                radon_tag11 = radon_temp;
                rgbchart11 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','5','6','7','8','9','10','Now','12','13','14',],";
                break; 
              case 11:
                radon_tag12 = radon_temp;
                rgbchart12 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','5','6','7','8','9','10','11','Now','13','14',],";
                break; 
              case 12:
                radon_tag13 = radon_temp;
                rgbchart13 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','5','6','7','8','9','10','11','12','Now','14',],";
                break; 
              case 13:
                radon_tag14 = radon_temp;
                rgbchart14 = rgbchartvorgabeSel;
                stringtime2 = "labels : ['1','2','3','4','5','6','7','8','9','10','11','12','13','Now',],";
                break; 
              default:
                break; 
            }

      }  // befüllung bis zm 14ten Tag mit livewerten, dann nicht mehr


      //--
    if(radonTagCount >= radonTagCountvorgabe){   // nach 96 einträgen
      
       radonTagCount = 0;   //löschen Counter für den Tag
       radon_tag = 0;    //Tageswert löschen für neuen Tag

      if(radonMore14Day == 0){

        radonTagEintrCount ++;  //welcher Tag
        if (radonTagEintrCount >= 15) {radonTagEintrCount = 1;}

            //-- case tage  
            switch (radonTagEintrCount) {
              case 1:
                radon_tag01 = radon_temp;
                rgbchart01 = rgbchartvorgabeSel;
                break; 
              case 2:
                radon_tag02 = radon_temp;
                rgbchart02 = rgbchartvorgabeSel;
                break;          
              case 3:
                radon_tag03 = radon_temp;
                rgbchart03 = rgbchartvorgabeSel;
                break;             
              case 4:
                radon_tag04 = radon_temp;
                rgbchart04 = rgbchartvorgabeSel;
                break;        
              case 5:
                radon_tag05 = radon_temp;
                rgbchart05 = rgbchartvorgabeSel;
                break; 
              case 6:
                radon_tag06 = radon_temp;
                rgbchart06 = rgbchartvorgabeSel;
                break; 
              case 7:
                radon_tag07 = radon_temp;
                rgbchart07 = rgbchartvorgabeSel;
                break; 
              case 8:
                radon_tag08 = radon_temp;
                rgbchart08 = rgbchartvorgabeSel;
                break; 
              case 9:
                radon_tag09 = radon_temp;
                rgbchart09 = rgbchartvorgabeSel;
                break; 
              case 10:
                radon_tag10 = radon_temp;
                rgbchart10 = rgbchartvorgabeSel;
                break; 
              case 11:
                radon_tag11 = radon_temp;
                rgbchart11 = rgbchartvorgabeSel;
                break; 
              case 12:
                radon_tag12 = radon_temp;
                rgbchart12 = rgbchartvorgabeSel;
                break; 
              case 13:
                radon_tag13 = radon_temp;
                rgbchart13 = rgbchartvorgabeSel;
                break; 
              case 14:
                radon_tag14 = radon_temp;
                break; 
              default:
                radon_temp = 0;
                break; 
            } //--- case --
           


      }else{

              radon_tag01 = radon_tag02;
              radon_tag02 = radon_tag03;
              radon_tag03 = radon_tag04;
              radon_tag04 = radon_tag05;
              radon_tag05 = radon_tag06;
              radon_tag06 = radon_tag07;
              radon_tag07 = radon_tag08;
              radon_tag08 = radon_tag09;
              radon_tag09 = radon_tag10;
              radon_tag10 = radon_tag11;
              radon_tag11 = radon_tag12;
              radon_tag12 = radon_tag13;
              radon_tag13 = radon_tag14;
              radon_tag14 = radon_temp;
              rgbchart14 = rgbchartvorgabeSel;

      }  //-- radonMore14Day
          
       
    }  // nach 96 einträgen
 //------

      #ifdef DataDebug
      Serial.println("radon_tag01: " + String(radon_tag01));  
      Serial.println("radon_tag02: " + String(radon_tag02));  
      Serial.println("radon_tag03: " + String(radon_tag03));  
      Serial.println("radon_tag04: " + String(radon_tag04));  
      Serial.println("radon_tag05: " + String(radon_tag05));  
      Serial.println("radon_tag09: " + String(radon_tag06));  
      Serial.println("radon_tag07: " + String(radon_tag07));  
      Serial.println("radon_tag08: " + String(radon_tag08));  
      Serial.println("radon_tag09: " + String(radon_tag09));  
      Serial.println("radon_tag10: " + String(radon_tag10));  
      Serial.println("radon_tag11: " + String(radon_tag11));  
      Serial.println("radon_tag12: " + String(radon_tag12));  
      Serial.println("radon_tag13: " + String(radon_tag13));  
      Serial.println("radon_tag14: " + String(radon_tag14)); 

      Serial.println("---------");  
       
      Serial.println("00: " + chartime00); 
      Serial.println("00: " + chartime01);  
      Serial.println("00: " + chartime02);  
      Serial.println("00: " + chartime03);  
      Serial.println("00: " + chartime04);  
      Serial.println("00: " + chartime05);  
      Serial.println("00: " + chartime06);  
      Serial.println("00: " + chartime07);  
      Serial.println("00: " + chartime08);  
      Serial.println("00: " + chartime09);  
      Serial.println("00: " + chartime10);   
      Serial.println("00: " + chartime11); 
      Serial.println("00: " + chartime12); 
      Serial.println("00: " + chartime13); 
      Serial.println("00: " + chartime14); 
      #endif 


        stringdata2 = "data : [" + String(radon_tag01) + "," + String(radon_tag02) + "," + String(radon_tag03) + "," + String(radon_tag04) + "," + String(radon_tag05) + "," + String(radon_tag06) + "," + String(radon_tag07) + "," + String(radon_tag08) + "," + String(radon_tag09) + "," + String(radon_tag10) + "," + String(radon_tag11) + "," + String(radon_tag12) + "," + String(radon_tag13) + "," + String(radon_tag14) + ",],";

        
        datei_schreiben();  // tvoc Daten
        datei_schreiben2();  // co2 Daten
        datei_schreiben3();  // radon Daten
        datei_schreiben5();  // Hz Daten
        WritedChartValue();


     // }   //  gRADONupdateSinifferFlag



          #ifdef DataDebug
          Serial.println("--> Sensor Daten aktualisiert");  
          #endif 




    }   //(response.getFunctionCode() == 4 || response.getServerID() == 2 || response.size() == 15){



  }
 //***********************************************************************************



  //******************************************************************************
  //                         Modbus  handleError                                 *
  //******************************************************************************
  // Define an onError handler function to receive error responses
  // Arguments are the error code returned and a user-supplied token to identify the causing request
  #ifndef MB_Gateway
   
    void handleError(Error error, uint32_t token) 
    {
      // ModbusError wraps the error code and provides a readable error message for it
      ModbusError me(error);
      LOG_E("Error response: %02X - %s\n", (int)me, (const char *)me);
    }
    
  #endif  
  //*************************************************************************************



#ifdef __cplusplus
extern "C" {
#endif
uint8_t temprature_sens_read();
#ifdef __cplusplus
}
#endif
uint8_t temprature_sens_read();






//callback notifying us of the need to save config
void saveConfigCallback () {
  #ifdef WIFI_DEBUG
  Serial.println("---->>> WIFImanager saveConfigCallback");
  #endif
  shouldSaveConfig = true;
}

void setConfigResetCallback () {
  #ifdef WIFI_DEBUG
  Serial.println("---->>> WIFImanager setConfigResetCallback");
  #endif
  shouldSaveConfig = true;
}

void WebServerCallback () {
  #ifdef WIFI_DEBUG
  Serial.println("---->>> WIFImanager WebServerCallback");
  // wenn im Handy eingeloggt wurde
  #endif
}

void ConfigResetCallback () {
  #ifdef WIFI_DEBUG
  Serial.println("---->>> WIFImanager ConfigResetCallback");
  #endif
}

void SaveParamsCallback () {
  #ifdef WIFI_DEBUG
  Serial.println("---->>> WIFImanager SaveParamsCallback");
  #endif
  // WLAN gespeichert
  //WriteipValuechange();
}

//void PreSaveConfigCallback () {
 // Serial.println("---->>> WIFImanager PreSaveConfigCallback");
//}

void configModeCallback (WiFiManager *myWiFiManager) {
  #ifdef WIFI_DEBUG
  Serial.println("--------->>> WIFImanager Entered config mode");
  Serial.println(WiFi.softAPIP());
  //if you used auto generated SSID, print it
  // wenn im AP Modus 
  Serial.println(myWiFiManager->getConfigPortalSSID());
  #endif

}



  //******************************************************************************
  //                        Schreiben ins  EEPROM                                *
  //****************************************************************************** 
    void WritePW()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden

   
    

        if (p_inputpwchange != "          "){
          if (p_inputpwchange != ""){
            p_inputpasswort_vorgabe = p_inputpwchange;
            preferences.putString("p_inputpwchange", p_inputpwchange);                     //Variable speichern
           // #ifdef NVS_DEBUG
              Serial.println("PW gesppeichert und geändert: " + p_inputpasswort_vorgabe);
           // #endif
          }
        }
        p_inputpwchange = ""; // leeren das im Web nichts drinsteht


    //preferences.end();                                      //Preferences beenden
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write PW Value __");
     #endif

  }
  
  void WriteSensorValue()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden

   
    preferences.putString("p_gateway", p_inputgateway);                     //Variable speichern
     preferences.putString("p_baudrate", p_inputbaudrate);                    //Variable speichern
    preferences.putString("p_databits", p_inputdatabits);                    //Variable speichern
    preferences.putString("p_parity", p_inputparity);                      //Variable speichern
    preferences.putString("p_stopbit", p_inputstopbit);                     //Variable speichern
    preferences.putString("p_restimeout", p_inputrestimeout);                  //Variable speichern

    p_inputtcpport.toCharArray(p_inputtcpportc, 4); 
    //preferences.end();                                      //Preferences beenden
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write div. Value __");
     #endif

  }

  void WriteWebValue()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden
  

    preferences.putString("p_tcpport", p_inputtcpport);                     //Variable speichern
    preferences.putString("p_webport", p_inputwebport);                     //Variable speichern


    p_inputtcpport.toCharArray(p_inputtcpportc, 4); 

    //preferences.end();                                      //Preferences beenden
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write div. Value __");
     #endif

  }


  //--------------------
  void WriteMqttValue()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden


    preferences.putString("p_mqon", p_mqonoff);                         //Variable speichern
    preferences.putString("p_mqclie", p_inputmqclient);                         //Variable speichern
    preferences.putString("p_mqserv", p_inputmqserver);                         //Variable speichern
    preferences.putString("p_mqport", p_inputmqport);                         //Variable speichern
    preferences.putString("p_mquser", p_inputmquser);                         //Variable speichern
    preferences.putString("p_mqpass", p_inputmqpass);                         //Variable speichern
    preferences.putString("p_mqtopic", p_inputmqtopic);                         //Variable speichern
    preferences.putString("p_mqtopic1", p_inputmqtopic1);                         //Variable speichern
    preferences.putString("p_mqtopic2", p_inputmqtopic2);                         //Variable speichern
   

    //preferences.end();                                      //Preferences beenden
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write Mqtt. Value __");
     #endif

  }
  //--------------------
  void WriteCloudValue()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden


    preferences.putString("p_clon", p_cloudonoff);                         //Variable speichern
    preferences.putString("p_clserv", p_inputcloudserver);                         //Variable speichern
    preferences.putString("p_cluser", p_inputclouduser);                         //Variable speichern
    preferences.putString("p_cldevice", p_inputclouddevice);                         //Variable speichern
    preferences.putString("p_clpage", p_inputcloudpage);                         //Variable speichern
    preferences.putString("p_clkey", p_inputcloudkey);                         //Variable speichern
   

    //preferences.end();                                      //Preferences beenden
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write Cloud. Value __");
     #endif

  }
  //--------------------



  //--------------------
  void WriteSettingValue() 
  {
    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden

   
    p_sett01 = p_sett01t;
    p_sett02 = p_sett02t;
    p_sett03 = p_sett03t;
    p_sett04 = p_sett04t;
    p_sett05 = p_sett05t;
    p_sett06 = p_sett06t;
    p_sett07 = p_sett07t;
    p_sett08 = p_sett08t;
    p_sett09 = p_sett09t;
    p_sett10 = p_sett10t;
    p_sett11 = p_sett11t;    


    preferences.putUInt("p_sett01", p_sett01);                         //Variable speichern
    preferences.putUInt("p_sett02", p_sett02);                         //Variable speichern
    preferences.putUInt("p_sett03", p_sett03);                         //Variable speichern
    preferences.putUInt("p_sett04", p_sett04);                         //Variable speichern
    preferences.putUInt("p_sett05", p_sett05);                         //Variable speichern
    preferences.putUInt("p_sett06", p_sett06);                         //Variable speichern
    preferences.putUInt("p_sett07", p_sett07);                         //Variable speichern
    preferences.putUInt("p_sett08", p_sett08);                         //Variable speichern
    preferences.putUInt("p_sett09", p_sett09);                         //Variable speichern
    preferences.putUInt("p_sett10", p_sett10);                         //Variable speichern
    preferences.putUInt("p_sett11", p_sett11);                         //Variable speichern

     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write Setting. Value __");
     #endif   

  }
 //-----------------------------------------------------




  //--------------------
  void changesetValue()
  { 

          if(p_sett01 == 1){
            div_c01 = divonc01;
            p_sett01_s = p_sett01_1;
            //Serial.println("1 = 1");
            //Serial.println(div_c01);
            //Serial.println(p_sett01_s);
          }else{
            div_c01 = divonc01h;
            p_sett01_s = p_sett01_0;
            //Serial.println("1 = 0");
            //Serial.println(div_c01);
            //Serial.println(p_sett01_s);
          }
          if(p_sett02 == 1){
            div_c02 = divonc02;
            p_sett02_s = p_sett02_1;
            //Serial.println("2 = 1");
            //Serial.println(div_c02);
            //Serial.println(p_sett02_s);
          }else{
            div_c02 = divonc02h;
            p_sett02_s = p_sett02_0;
            //Serial.println("2 = 0");
            //Serial.println(div_c02);
            //Serial.println(p_sett02_s);
          }
          if(p_sett03 == 1){
            div_c03 = divonc03;
            p_sett03_s = p_sett03_1;
            //Serial.println("3 = 1");
            //Serial.println(div_c03);
            //Serial.println(p_sett03_s);
          }else{
            div_c03 = divonc03h;
            p_sett03_s = p_sett03_0;
            //Serial.println("3 = 0");
            //Serial.println(div_c03);
            //Serial.println(p_sett03_s);
          }    
          if(p_sett04 == 1){
            div_c04 = divonc04;
            p_sett04_s = p_sett04_1;
            //Serial.println("4 = 1");
            //Serial.println(div_c04);
            //Serial.println(p_sett04_s);
          }else{
            div_c04 = divonc04h;
            p_sett04_s = p_sett04_0;
            //Serial.println("4 = 0");
            //Serial.println(div_c04);
            //Serial.println(p_sett04_s);
          }
          if(p_sett05 == 1){
            div_c05 = divonc05;
            p_sett05_s = p_sett05_1;
            //Serial.println("5 = 1");
            //Serial.println(div_c05);
            //Serial.println(p_sett05_s);
          }else{
            div_c05 = divonc05h;
            p_sett05_s = p_sett05_0;
            //Serial.println("5 = 0");
            //Serial.println(div_c05);
            //Serial.println(p_sett05_s);
          }
          if(p_sett06 == 1){
            div_c06 = divonc06;
            p_sett06_s = p_sett06_1;
            //Serial.println("6 = 1");
            //Serial.println(div_c06);
            //Serial.println(p_sett06_s);
          }else{
            div_c06 = divonc06h;
            p_sett06_s = p_sett06_0;
            //Serial.println("6 = 0");
            //Serial.println(div_c06);
            //Serial.println(p_sett06_s);
          }
          if(p_sett07 == 1){
            div_c07 = divonc07;
            p_sett07_s = p_sett07_1;
            //Serial.println("7 = 1");
            //Serial.println(div_c07);
            //Serial.println(p_sett07_s);
          }else{
            div_c07 = divonc07h;
            p_sett07_s = p_sett07_0;
            //Serial.println("7 = 0");
            //Serial.println(div_c07);
            //Serial.println(p_sett07_s);
          }
          if(p_sett08 == 1){
            div_c08 = divonc08;
            p_sett08_s = p_sett08_1;
            //Serial.println("8 = 1");
            //Serial.println(div_c08);
            //Serial.println(p_sett08_s);
          }else{
            div_c08 = divonc08h;
            p_sett08_s = p_sett08_0;
            //Serial.println("8 = 0");
            //Serial.println(div_c08);
            //Serial.println(p_sett08_s);
          }
          if(p_sett09 == 1){
            div_c09 = divonc09;
            p_sett09_s = p_sett09_1;
            //Serial.println("9 = 1");
            //Serial.println(div_c09);
            //Serial.println(p_sett09_s);
          }else{
            div_c09 = divonc09h;
            p_sett09_s = p_sett09_0;
            //Serial.println("9 = 0");
            //Serial.println(div_c09);
            //Serial.println(p_sett09_s);
          }
          if(p_sett10 == 1){
            div_c10 = divonc10;
            p_sett10_s = p_sett10_1;
            //Serial.println("10 = 1");
            //Serial.println(div_c10);
            //Serial.println(p_sett10_s);
          }else{
            div_c10 = divonc10h;
            p_sett10_s = p_sett10_0;
            //Serial.println("10 = 0");
            //Serial.println(div_c10);
            //Serial.println(p_sett10_s);
          }
          if(p_sett11 == 1){
            div_c11 = divonc11;
            p_sett11_s = p_sett11_1;
            //Serial.println("11 = 1");
            //Serial.println(div_c11);
            //Serial.println(p_sett11_s);
          }else{
            div_c11 = divonc11h;
            p_sett11_s = p_sett11_0;
            //Serial.println("11 = 0");
            //Serial.println(div_c11);
            //Serial.println(p_sett11_s);
          }

  }
 //--------------------------------------




  //--------------------
  void WriteLedValue()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden


    preferences.putString("p_ledon", p_ledonoff);                         //Variable speichern
    preferences.putString("p_ledred", p_inputledred);                         //Variable speichern
    preferences.putString("p_ledorange", p_inputledorange);                         //Variable speichern
    preferences.putString("p_ledgreen", p_inputledgreen);                         //Variable speichern
    preferences.putString("p_ledfunk", p_inputledfunk);                         //Variable speichern
    preferences.putString("p_ledtime", p_inputledgamma);                         //Variable speichern


    
     ledRedVal = atoi(p_inputledred.c_str());
     ledOrangeVal = atoi(p_inputledorange.c_str());
     ledGreenVal = atoi(p_inputledgreen.c_str());
     ledgammaVal = atoi(p_inputledgamma.c_str());
     
        if(ledgammaVal == 0){
        ledgammaVal = 1;
        p_inputledgamma = "1";
        preferences.putString("p_ledtime", p_inputledgamma);                         //Variable speichern
        }
        if(ledgammaVal > 255){
        ledgammaVal = 255;
        p_inputledgamma = "255";
        preferences.putString("p_ledtime", p_inputledgamma);                         //Variable speichern
        }     

     msLed = millis();
     gledUpdateFlag = true;

    //preferences.end();                                      //Preferences beenden
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write LED. Value __");
     #endif

  }
  //--------------------


  //--------------------
  void WritevanValue()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden


    preferences.putString("p_vanon", p_vanonoff);                         //Variable speichern
    preferences.putString("p_vanmax", p_inputvanmax);                         //Variable speichern
    preferences.putString("p_vanmin", p_inputvanmin);                         //Variable speichern

    
     
     gvanUpdateFlag = true;

    //preferences.end();                                      //Preferences beenden
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write VAN. Value __");
     #endif

  }
  //--------------------


  //--------------------
  // Pushover PushSafer
  void WritePushValue()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden


    preferences.putString("p_pushon", p_pushonoff);                         //Variable speichern
    preferences.putString("p_pushkey", p_pushkey);                         //Variable speichern
    preferences.putString("p_pushmessage", p_pushmessage);                         //Variable speichern
    preferences.putString("p_pushtitle", p_pushtitle);                         //Variable speichern
    preferences.putString("p_sound", p_pushsound);                         //Variable speichern
    preferences.putString("p_vibration", p_pushvibration);                         //Variable speichern
    preferences.putString("p_icon", p_pushicon);                         //Variable speichern
    preferences.putString("p_iconcolor", p_pushiconcolor);                         //Variable speichern
    preferences.putString("p_priority", p_pushpriority);                         //Variable speichern
    preferences.putString("p_pushdevice", p_pushdevice);                         //Variable speichern
    preferences.putString("p_pushvalue", p_pushvalue);                         //Variable speichern 



    //preferences.end();                                      //Preferences beenden
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println(p_pushmessage);
     Serial.println(preferences.getString("p_pushmessage", "Push Message"));
     Serial.println("__ Write Push. Value __");
     #endif

  }
  //--------------------


  //---------------------------------------------------------------------------
  void Writeip15Value()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden

    preferences.putString("p_inputip01", p_inputip01);                    //Variable speichern
    preferences.putString("p_inputip02", p_inputip02);                  //Variable speichern
    preferences.putString("p_inputip03", p_inputip03);                     //Variable speichern
    preferences.putString("p_inputip04", p_inputip04);                      //Variable speichern
    preferences.putString("p_inputip05", p_inputip05);                      //Variable speichern
    //preferences.end();                                      //Preferences beenden
     
    preferences.putString("p_room01", p_room01);                      //Variable speichern
    preferences.putString("p_room02", p_room02);                      //Variable speichern
    preferences.putString("p_room03", p_room03);                      //Variable speichern
    preferences.putString("p_room04", p_room04);                      //Variable speichern
    preferences.putString("p_room05", p_room05);                      //Variable speichern

    p_ipparson = "1";
    preferences.putString("p_ipparson", p_ipparson);                      //Variable speichern

     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write IP Mesh Value __");
     #endif

     ip_write_sel = 0;

  }  

  void WriteipValue()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden

    preferences.putString("p_staticip", p_inputstaticip);                    //Variable speichern
    preferences.putString("p_subnetmask", p_inputsubnetmask);                  //Variable speichern
    preferences.putString("p_gateway", p_inputgateway);                     //Variable speichern
    preferences.putString("p_ntp", p_inputntp);                     //Variable speichern
    preferences.putString("p_wifidns", p_inputwifidns);                     //Variable speichern
    
    
    preferences.putString("p_name", p_inputname);                      //Variable speichern
    //preferences.end();                                      //Preferences beenden
     
     #ifdef NVS_DEBUG
     Serial.println(" ");
     Serial.println("__ Write IP Value __");
     #endif

  }  

    void WriteipValuechange()
  {

    Preferences preferences;
    preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden

    preferences.putString("p_staticip", p_inputstaticip);                    //Variable speichern
    preferences.putString("p_subnetmask", p_inputsubnetmask);                  //Variable speichern
    preferences.putString("p_gateway", p_inputgateway);                     //Variable speichern
    preferences.putString("p_name", p_inputname);                     //Variable speichern
    preferences.putString("p_ntp", p_inputntp);                     //Variable speichern
    preferences.putString("p_ipchange", "1");                     //Variable speichern
    preferences.putString("p_wifidns", p_inputwifidns);                     //Variable speichern

   

    ipchangeandreeboot = 1;

      #ifdef NVS_DEBUG
      Serial.println(" ");
      Serial.println("__ Write IP Value change __");
      #endif

  }  
  //*******************************************************************************


  //*******************************************************************************
    static int IpPartAddress[4];
    void getIpAddress(String strIP)
    {
        int Part = 0;
        int i;
        for(i=0; i<4; i++) IpPartAddress[i] = 0;
        for ( i=0; i<strIP.length(); i++ )
        {
            char c = strIP[i];
            if ( c == '.' )
            {
                Part++;
                continue;
            }
            IpPartAddress[Part] *= 10;
            IpPartAddress[Part] += c - '0';
        }
    }
  //*******************************************************************************



  //******************************************************************************
  //                             Cloud upload                                    *
  //******************************************************************************
//#define RADON_SERVER    "rec.radoncloud.com"       //p_inputcloudserverc

//WiFiClient radonClient;

void RadonCloudUpload()
{
    
    
    String sendValueStr;
    char temp[25];
    cloud_werteaktual = "<span class='Stil5'>CLOUD aktiviert</div>";
    
    if(WiFi.status() != WL_CONNECTED){
        cloud_werteaktual = "<span class='Stil6'>WIFI nicht verbunden</div>";
        gcloudUpdateFlag = false;
        return;
    }   
    
    WiFiClient radonClient;
    //WiFiClient Client;
    const int httpPort = 80;
    IPAddress server(185,3,235,169);  // rec.auto-steuerung.de
    //Serial.println(radonClient.connect(p_inputcloudserverc, httpPort));



    //---------------------------------------------------------------------------------
    #ifdef RADONCLOUD_DEBUG
    char servername[]="google.com";  // remote server we will connect to
    Serial.println("\nStarting connection... " + String(server));
    // if you get a connection, report back via serial:
    if (googleClient.connect(server, 80)) {
      Serial.println("connected");
      // Make a HTTP request:
      googleClient.println("GET /search?q=arduino HTTP/1.0");
      googleClient.println();
    }else{
     Serial.println("not connected!!!");
    
    }
    #endif
    //---------------------------------------------------------------------------------

    #ifdef RADONCLOUD_DEBUG
    Serial.println("\nStarting connection... " + String(p_inputcloudserverc)); 
    #endif
    //if (!radonClient.connect("rec.auto-steuerung.de", httpPort)) {
    //if (!radonClient.connect(server, httpPort)) {
    if (!radonClient.connect(p_inputcloudserverc, 80)) {
        #ifdef RADONCLOUD_DEBUG
        Serial.print(String(p_time) + " | CLOUD: " + String(p_inputcloudserverc) + " connect failed! | State:");
        //Serial.print(" CLOUD failed, reconnect= ");
        //Serial.print(radonClient.state());
        Serial.println(" | Cloud ERROR");
    
        #endif
        cloud_werteaktual = "<span class='Stil6'>Cloud connect failed!</div>";
        // here install an counter up to 5 for waiting reconnect wifi, then the bit gDBUpdateFlag delete
        gcloudUpdateFlag = false;
        return;
    }

    //=====================================================================
    sendValueStr = "set_data:&v00=";
    //Date
    sprintf(temp, "%d", gYear);     sendValueStr = sendValueStr +temp + "-";
    sprintf(temp, "%02d", gMonth);  sendValueStr = sendValueStr +temp + "-";
    sprintf(temp, "%02d", gDay);    sendValueStr += temp;
    //Time
    sendValueStr += "&v01=";
    sprintf(temp, "%02d", gHour);    sendValueStr = sendValueStr + temp + "-";
    sprintf(temp, "%02d", gMinute);  sendValueStr = sendValueStr + temp + "-";
    sprintf(temp, "%02d", gSecond);  sendValueStr += temp;
    //Pressure value
    sendValueStr += "&v02=";
    //sprintf(temp, "%d", 100);
    //sendValueStr += temp;
    sendValueStr += String(f_pwm);
    //Moisture
    sendValueStr += "&v03=";
    #ifdef CO2_on
    //sprintf(temp, "%d", String(eco2val1));
    #else
    sprintf(temp, "%d", 4);
    #endif
    //sendValueStr += temp;
    sendValueStr += String(eco2val1);
    //Temperature
    sendValueStr += "&v04=";
    #ifdef CO2_on
    //sprintf(temp, "%d", String(etvocval2));
    #else
    sprintf(temp, "%d", 5);
    #endif
    //sendValueStr += temp;
    sendValueStr += String(etvocval2);
    //Radon value
    sendValueStr += "&v05=";
    sendValueStr += String(mb_radon_ist_word);

    //Private key
    sendValueStr += "&v06=";
    sendValueStr += p_inputcloudkey;
    //Sensor id
    sendValueStr += "&v07=";
    sendValueStr += String(atoi(p_inputclouddevicec));
    sendValueStr += "&v08=";
    sendValueStr += WiFi.BSSIDstr();

    // f_pwm  //Lüfter Drehzahl: 

    // http://rec.radoncloud.com/s_get.php?set_data:&v00=2019-01-02&v01=01-30-00&v02=10245&v03=453&v04=-123&v05=12578&v06=3as44643euW&v07=15&v08=11:22:33:44:55:AD
    String client_send_str = "GET /" + p_inputcloudpage + "?" + sendValueStr + " HTTP/1.1\r\n" +
                             "Host: " + p_inputcloudserver + "\r\n" +
                             "Connection: close\r\n\r\n";
    // Send the sensor data to the mysql server
    cloud_werteaktual = "<span class='Stil5'>Cloud last upload " + p_uhrzeit_last + "</div>";
    radonClient.print(client_send_str);
    #ifdef RADONCLOUD_DEBUG
    Serial.print("RadonCloud = "); Serial.println(client_send_str);
    #endif
    gcloudUpdateFlag = false;

                #ifdef RADONCLOUD_DEBUG
                String line_t = ""; 
                unsigned long lasttime = millis();
                while (!radonClient.available() && millis() - lasttime < 1000) {delay(1);}   // wait max 1s for data
                // Read all the lines of the reply from server and print them to Serial
                  while (radonClient.available()) {
                  String line = radonClient.readStringUntil('\n');
                  Serial.println(line);
                }
                #endif




}
  //******************************************************************************




  //******************************************************************************
  // aktualisiere DIV in Footer
  void updateDIVs(){

        if(chart_page == 0){     //1=Chart rADON anzeigen
           p_chart_or_in = p_chartin;
           p_chart2_or_in = p_chart2in;
        }  
        if(chart_page == 1){     //1=Chart rADON anzeigen
           p_chart_or_in = p_chartout;
           p_chart2_or_in = p_chart2in;
        }  
        if(chart_page == 2){     //2=Chart co2 anzeigen
           p_chart_or_in = p_chartin;
           p_chart2_or_in = p_chart2out;
        }   
        if(chart_page == 3){     //1=Chart rADON anzeigen
           p_chart_or_in = p_chartin;
           p_chart2_or_in = p_chart2in;
        }   
        if(chart_page == 4){     //1=Chart rADON anzeigen
           p_chart_or_in = p_chartin;
           p_chart2_or_in = p_chart2in;
        } 
        if(chart_page == 5){     //1=Chart rADON anzeigen
           p_chart_or_in = p_chartin;
           p_chart2_or_in = p_chart2in;
        }  
        if(chart_page == 6){     //1=Chart rADON anzeigen
           p_chart_or_in = p_chartin;
           p_chart2_or_in = p_chart2in;
        }  
  }
  //******************************************************************************



  //****************************************************************************
 void updatemeshviews(){
      p_mesh_in = p_mesh_in_v;
    if (p_sett06 == 1){  //Mesh Eingeschaltet 
      p_mesh_in = p_mesh_in_v;
      p_meshchart_in2 = p_meshchart_in2_v; 
   
    }else{
      p_mesh_in = p_mesh_in_h;
      p_meshchart_in2 = p_meshchart_in2_h; 

    } 

 }


  //****************************************************************************
 void updatefanviews(){

       //Serial.println("vanAktiveConfig: " + String(vanAktiveConfig));   
       //Serial.println("p_vanonoff: " + p_vanonoff);    

      if (p_sett11 == 1){  //view FAN Eingeschaltet      || p_vanonoff == "on"
       
         if (p_vanonoff == "off"){
          p_vanchart_in = p_vanchart_in_h; 
          p_van_in = p_van_in_h;
          p_vanchart_in2 = p_vanchart_in2_h;
          p_vanconf_in3 = p_vanconf_in3_h;
         }else{
          p_vanchart_in = p_vanchart_in_v; 
          p_van_in = p_van_in_v;
          p_vanchart_in2 = p_vanchart_in2_v;
          p_vanconf_in3 = p_vanconf_in3_v;
         }


      }else{
          p_vanchart_in = p_vanchart_in_h; 
          p_van_in = p_van_in_h;
          p_vanchart_in2 = p_vanchart_in2_h;
          p_vanconf_in3 = p_vanconf_in3_h;
      }  

      //Serial.println("a: " + p_vanchart_in); 
      //Serial.println("a: " + p_van_in); 
      //Serial.println("a: " + p_vanchart_in2); 
      //Serial.println("a: " + p_vanconf_in3); 

 }
 //-------------------------------



 void updateluefeter(){

        vent_min_stufe = p_inputvanmin.toInt();
        vent_max_stufe = p_inputvanmax.toInt();
     
        // 300
        pwm_radon_min = vent_min_stufe;  
        //Serial.println("pwm_radon_min: " + String(pwm_radon_min));                    
        // 900
        pwm_radon_max = vent_max_stufe;
        //Serial.println("pwm_radon_max: " + String(pwm_radon_max));
        // 600
        pwm_radon_range = pwm_radon_max - pwm_radon_min;
        //Serial.println("pwm_radon_range: " + String(pwm_radon_range));
        pwm_faktor = pwm_radon_range / 21;  //raster
        //Serial.println("pwm_faktor: " + String(pwm_faktor));
        //     200                  500               300
        //      0!                  100                300
        //Serial.println("mb_radon_ist_word: " + String(mb_radon_ist_word));
        if(mb_radon_ist_word>vent_min_stufe){
          pwm_radon_value = mb_radon_ist_word - vent_min_stufe; 
        }else{
          pwm_radon_value = 0;  
        }
        //Serial.println("pwm_radon_value: " + String(pwm_radon_value));

        pwm_raster = pwm_radon_value / pwm_faktor;
        //Serial.println("pwm_raster: " + String(pwm_raster));
    
                      msg_TGp[0] = 0xFE;
                      msg_TGp[1] = 0x01;
                      msg_TGp[2] = 0x01;
                      //Serial1.write(msg_TGp, 3);
                      //Serial.println("Taste 1: ");
  
                                            
                      msg_TGm[0] = 0xFE;
                      msg_TGm[1] = 0x02;
                      msg_TGm[2] = 0x02;
                      //Serial1.write(msg_TGm, 3);
                      //Serial.println("Taste 2: ");



              if (pwm_raster <= 0) {
                if(f_pwm > 0){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m0: ");

                }
              }
              else if (pwm_raster <= 1) {
                if(f_pwm < 5){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                  //Serial.println("Taste p1: ");
                }
                if(f_pwm > 5){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m1: ");
                }
              }
              else if (pwm_raster <= 2) {
                if(f_pwm < 10){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                  //Serial.println("Taste p2: ");
                }
                if(f_pwm > 10){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m2: ");
                }
              }
              else if (pwm_raster <= 3) {
                if(f_pwm < 15){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                  //Serial.println("Taste p3: ");
                }
                if(f_pwm > 15){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m3: ");
                }
              }
              else if (pwm_raster <= 4) {
                if(f_pwm < 20){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                  //Serial.println("Taste p4: ");
                }
                if(f_pwm > 20){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m4: ");
                }
              }
              else if (pwm_raster <= 5) {
                if(f_pwm < 25){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                  //Serial.println("Taste p5: ");
                }
                if(f_pwm > 25){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m5: ");
                }
              }
              else if (pwm_raster <= 6) {
                if(f_pwm < 30){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 30){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m6: ");
                }
              }
              else if (pwm_raster <= 7) {
                if(f_pwm < 35){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 35){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m7: ");
                }
              }
              else if (pwm_raster <= 8) {
                if(f_pwm < 40){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 40){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m8: ");
                }
              }
              else if (pwm_raster <= 9) {
                if(f_pwm < 45){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 45){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m9: ");
                }
              }
              else if (pwm_raster <= 10) {
                if(f_pwm < 50){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 50){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m10: ");
                }
              }
              else if (pwm_raster <= 11) {
                if(f_pwm < 55){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 55){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m11: ");
                }
              }
              else if (pwm_raster <= 12) {
                if(f_pwm < 60){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 60){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m12: ");
                }
              }
              else if (pwm_raster <= 13) {
                if(f_pwm < 65){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 65){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m13: ");
                }
              }
              else if (pwm_raster <= 14) {
                if(f_pwm < 70){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 70){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m14: ");
                }
              }
              else if (pwm_raster <= 15) {
                if(f_pwm < 75){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 75){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste m15: ");
                }
              }
              else if (pwm_raster <= 16) {
                if(f_pwm < 80){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 80){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                }
              }
              else if (pwm_raster <= 17) {
                if(f_pwm < 85){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 85){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                }
              }
              else if (pwm_raster <= 18) {
                if(f_pwm < 90){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 90){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                }
              }
              else if (pwm_raster <= 19) {
                if(f_pwm < 95){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 95){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                }
              }
              else if (pwm_raster <= 20) {
                if(f_pwm < 100){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                }
                if(f_pwm > 100){
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                }
              }
              else {
                if(f_pwm < 100){
                  Serial1.write(msg_TGp, 3);
                  tG1_page = true;
                  //Serial.println("Taste px: ");
                }else{
                  Serial1.write(msg_TGm, 3);
                  tG2_page = true;
                  //Serial.println("Taste mx: ");
                }
              }

 }

  //**************************************************************************







//******************************************************************************
//                            Update LED                                        *
//******************************************************************************

  //Update RGB LED colors accordingly to temp and hum values
  void updateColors(){
   
    strip1.clear();

    //Number of lit LEDs (temperature)
    int tempLEDs;
    long Farbe;
    tempLEDs = LED_COUNT;
      if (p_sett09 == 1){  //view LED Eingeschaltet  
       
        if (ledAktiveConfig == true){

          if(mb_radon_ist_word < ledGreenVal){
              #ifdef LEDDebug
                 Serial.println("--> LED off");  
              #endif
              Farbe = strip1.Color(0, 0, 0);//off


          }else if(mb_radon_ist_word < ledOrangeVal){
              #ifdef LEDDebug
                 Serial.println("--> LED Green");  
              #endif
              Farbe = strip1.Color(0, ledgammaVal, 0);//grün

          }else if(mb_radon_ist_word < ledRedVal){
              #ifdef LEDDebug
                 Serial.println("--> LED Orange");  
              #endif
              Farbe = strip1.Color(ledgammaVal, ledgammaVal/3, 0);//orange
        
          }else{

              #ifdef LEDDebug
                 Serial.println("--> LED Red");  
              #endif
              //Turn on LEDs RED
              
               /*
              for(int i=0; i<tempLEDs; i++) {
                //Serial.println(String(i));  
                strip1.setPixelColor(i, strip1.Color(ledgammaVal, 0, 0)); //rot
                strip1.show(); 
                delay(50); 
                strip1.setPixelColor(i, strip1.Color(0, 0, 0)); //rot 
              }
               */
              
              Farbe = strip1.Color(ledgammaVal, 0, 0);//rot

          }

            strip1.fill(Farbe, 0, tempLEDs);
            strip1.show();

        }else{

              //Turn off LEDs 
              Farbe = strip1.Color(0, 0, 0);//off
              strip1.fill(Farbe, 0, tempLEDs);
              strip1.show();
        }

      }else{
              //Turn off LEDs 
              Farbe = strip1.Color(0, 0, 0);//off
              strip1.fill(Farbe, 0, tempLEDs);
              strip1.show();
      }

  }
  //******************************************************************************



  //******************************************************************************
  String header;
  //uint16_t webport_t = 80;
   uint16_t webport_t = atoi(p_inputwebport.c_str());

   void on_AsyncWebServer()
  {
      // Set web server port number to 80
      //WiFiServer server(webport);

      //p_inputwebport.toCharArray(p_inputwebportc, 4); 
      //uint16_t webport_t = atoi(p_inputtcpportc); 
      webport_t = atoi(p_inputwebport.c_str());

     // AsyncWebServer server(aWebPort);
     
  }  
     
      

      AsyncWebServer server(webport_t);
     //AsyncWebServer server(aWebPort);
     // Variable to store the HTTP request
  
     

  //******************************************************************************




   //****************************************************************** 
  // getsearch
   void on_LED_Search()
  {
  
      p_getsearch = "0";
      int vorgabetime = 0;
      

      if (gLedSearchFlag == false){
        vorgabetime = 10;
      }else{
        vorgabetime = 100;
      }
      

      int tempLEDstart;
      int tempLEDboot = vorgabetime;
      long Farbe;
      tempLEDstart = LED_COUNT;

        for(int u=0; u<tempLEDboot; u++) {
           for(int i=0; i<tempLEDstart; i++) {
             if (gLedDeleteFlag == true){
               strip1.setPixelColor(i, strip1.Color(153, 51, 255)); //lila
             }else{  
               strip1.setPixelColor(i, strip1.Color(255, 255, 255)); //weiss
             }
             strip1.show(); 
             delay(50); 
             strip1.setPixelColor(i, strip1.Color(0, 0, 0)); //aus 
          }
        }
              
        Farbe = strip1.Color(0, 0, 0);
        strip1.fill(Farbe, 0, tempLEDstart);
        strip1.show();

        gledUpdateFlag = true;  // farbe einstellen wie aktuell gefordert
        gLedDeleteFlag = false;  // bit löschen für delete Garph
        gLedSearchFlag = false;  // Search bit löschen

 } 
  //****************************************************************** 





 //******************************************************************************
 //                          Pushover PushSafer
 //******************************************************************************

WiFiClient client2;

 
//******************************************************************************
 String push_title = "                              ";
 String push_message = "                                                                                                    ";

/*
SOUND
0 = Lautlos
1 = Ahem (IM)
2 = Applaus (Mail)
3 = Pfeil (Reminder)
4 = Baby (SMS)
5 = Glocke (Alarm)
6 = Fahrradklingel (Alarm2)
7 = Boing (Alarm3)
8 = Buzzer (Alarm4)
9 = Kamera (Alarm5)
10 = Auto Hupe (Alarm6)
11 = Registrierkasse (Alarm7)
12 = Glockenspiel (Alarm8)
13 = Knarrende Tür (Alarm9)
14 = Kuckucksuhr (Alarm10)
15 = Verbindung trennen (Call)
16 = Hund (Call2)
17 = Türklingel (Call3)
18 = Fanfare (Call4)
19 = Pistole (Call5)
20 = Hupen (Call6)
21 = Maultrommel (Call7)
22 = Morsen (Call8)
23 = Elektrizität (Call9)
24 = Radio Tuner (Call10)
25 = Sirene
26 = Militär Trompeten
27 = Ufo
28 = Whah Whah Whah
29 = Mann sagt Goodbye
30 = Mann sagt Hello
31 = Mann sagt No
32 = Mann sagt Ok
33 = Mann sagt Ooohhhweee
34 = Mann sagt Warning
35 = Mann sagt Welcome
36 = Mann sagt Yeah
37 = Mann sagt Yes
38 = Beep kurz
39 = Weeeee kurz
40 = Cut in and out kurz
41 = Finger an Glas schnipsen kurz
42 = Wa Wa Waaaa kurz
43 = Laser kurz
44 = Wind Spiel kurz
45 = Echo kurz
46 = Zipper kurz
47 = HiHat kurz
48 = Beep 2 kurz
49 = Beep 3 kurz
50 = Beep 4 kurz
51 = The Alarm is armed
52 = The Alarm is disarmed
53 = The Backup is ready
54 = The Door is closed
55 = The Door is opend
56 = The Window is closed
57 = The Window is open
58 = The Light is off
59 = The Light is on
60 = The Doorbell rings
61 = Pager kurz
62 = Pager lang

ICONS
https://www.pushsafer.com/de/pushapi#api-read


        p_pushonoff = preferences.getString("p_pushon", "off"); 
        p_pushkey = preferences.getString("p_pushkey", "11111NoaO1ohRpg222226677"); 
        p_pushmessage = preferences.getString("p_pushmessage", "Push Message"); 
        p_pushtitle = preferences.getString("p_pushtitle", "Modbus Push"); 
        p_pushsound = preferences.getString("p_sound", "8"); 
        p_pushvibration = preferences.getString("p_vibration", "3"); 
        p_pushicon = preferences.getString("p_icon", "91"); 
        c = preferences.getString("p_iconcolor", "#FF0000"); 
        p_pushpriority = preferences.getString("p_priority", "2"); 
        p_pushdevice = preferences.getString("p_pushdevice", "41828"); 
        p_pushvalue = preferences.getString("p_pushvalue", "300"); 
        p_pushvaluei = p_pushvalue.toInt();

*/

  void push_nachricht()
  {

      gpushUpdateFlag = false;
     
      //p_pushvaluei = p_pushvalue.toInt();


      //PushsaferKey = "XqLUBNqaO1oaRpggaX0h";
      PushsaferKey = p_pushkey;
      Pushsafer pushsafer(PushsaferKey, client2);

      String line_t = "                                                                                                   "; 
      String line_t2 = "                                                                                                   "; 
      
      line_t2 = p_pushmessage;

        if (p_pushmessage.indexOf("xxxx")>=1) {   // Searchstring exists?
            line_t = p_pushmessage;
            uint32_t position1 = line_t.indexOf("xxxx") + 5;              
            uint32_t position4 = position1 - 5;
            uint32_t positionlen = line_t.length();
             
            //Serial.println();
            //Serial.print("--->> ");
            //Serial.println(position1);  //19
            //Serial.println(positionlen);  //39

            //Serial.print("--->> ");
            //Serial.println(line_t.substring(0, position4));  // adonwert von x
            line_t2 = line_t.substring(0, position4);
            line_t2 += p_pushvalue;      //mb_radon_ist_word
           // Serial.print("--->> ");
            //Serial.println(line_t.substring(position1, positionlen));
            line_t2 += line_t.substring(position1, positionlen);

            //r2_val1 = line_t.substring(position1, position4);

        }
        else if(p_pushmessage.indexOf("XXXX")>=1) {  

            line_t = p_pushmessage;
            uint32_t position1 = line_t.indexOf("XXXX") + 5;              
            uint32_t position4 = position1 - 5;
            uint32_t positionlen = line_t.length();
             
            //Serial.println();
            //Serial.print("--->> ");
            //Serial.println(position1);  //19
            //Serial.println(positionlen);  //39

            //Serial.print("--->> ");
            //Serial.println(line_t.substring(0, position4));  // adonwert von x
            line_t2 = line_t.substring(0, position4);
            line_t2 += p_pushvalue;   //eco2val1
           // Serial.print("--->> ");
            //Serial.println(line_t.substring(position1, positionlen));
            line_t2 += line_t.substring(position1, positionlen);

            //r2_val1 = line_t.substring(position1, position4);
                   

        }

      push_message = line_t2;


      struct PushSaferInput input;
      input.message = push_message;
      input.title = p_pushtitle;
      //input.sound = "8";
      input.sound = p_pushsound;
      //input.vibration = "3";
      input.vibration = p_pushvibration;
      //input.icon = "91";
      input.icon = p_pushicon;
      //input.iconcolor = "#FF0000";
      input.iconcolor = "#";
      input.iconcolor += p_pushiconcolor;
      //input.priority = "2";
      input.priority = p_pushpriority;
      //input.device = "41828";      // Device ID:  http://pushsafer.com
      input.device = p_pushdevice;  
      pushsafer.sendEvent(input);

      #ifdef PushDebug
      Serial.println("Pushover send!");          //Variable counter Seriell ausgeben
      #endif



     

  }
//******************************************************************************








//******************************************************************************
#ifdef Push2
//WiFiClient config;

gpushUpdateFlag = false;

//Config config;
char pushMessage[100];
bool testPushover = false;
char batCharString[5];


//globals
struct Config {//full configuration file
  char ssid[50];
  char pw[50];
  int wifiTimeout;

  char trigSelect[10];
  char triggerOpensMessage[50];
  char triggerClosesMessage[50];
  char buttonMessage[50];
  int  timerCountDown;
  char timerSelect[10];
  char StillOpenMessage[50];
  char StillClosedMessage[50];
  double batteryThreshold;
  double batteryOffset;
  char pushOverEnable[3];
  char pushUserKey[50];
  char pushAPIKey[50];
  char pushSaferEnable[3];
  char pushSaferKey[50];
  char iftttEnable[3];
  char iftttMakerKey[50];
  char udpEnable[3];
  char tcpEnable[3];
  char udpTargetIP[20];
  char udpStaticIP[20];
  char udpGatewayAddress[20];
  char udpSubnetAddress[20];
  char udpPrimaryDNSAddress[20];
  char udpSecondaryDNSAddress[20];
  char udpSSID[50];
  char udpPW[50];
  int udpPort;
  char rtcCountdownMinute[3];
  char mqttEnable[3];
  int mqttPort;
  char mqttServer[50];
  char mqttTopic[50];
  char mqttSecureEnable[3];
  char mqttUser[50];
  char mqttPW[50];
  char staticIPenable[3];
  char staticIP[20];
  char staticGatewayAddress[20];
  char staticSubnetAddress[20];
  char staticPrimaryDNSAddress[20];
  char staticSecondaryDNSAddress[20];
  int udpBlastCount;
  int udptimeBetweenBlasts;
  char highSpeed[3];

};

  char pushOverEnable[3];
  char pushUserKey[50];
  char pushAPIKey[50];
  char pushSaferEnable[3];
  char pushSaferKey[50];
   char trigName[50];
   String httpPush = "";
   String postPush = "";
   boolean _htmlPush = true;

  
            String _token = "uxmzobmehgsw7ggy91yvfee8hqf2ri";  //pushAPIKey;
            String _user = "Iphone_Holger";  //pushUserKey;
            //String _message = pushMessage;
            String _pushMessage = "Hallo ESP 32";//pushMessage;
            String _device = "Iphone_Holger";
            String _title = trigName;
            String _url = "";
            String _url_title = "";
            int8_t _priority = 0;
            uint16_t _retry;
            uint16_t _expire;
            
            //boolean _html;
            //uint16_t _timeout = 5000;
            String _sound = "bike";

    const char *root_cert =
    "-----BEGIN CERTIFICATE-----\n"
    "MIIFWjCCA0KgAwIBAgIQbkepxlqz5yDFMJo/aFLybzANBgkqhkiG9w0BAQwFADBH\n"
    "MQswCQYDVQQGEwJVUzEiMCAGA1UEChMZR29vZ2xlIFRydXN0IFNlcnZpY2VzIExM\n"
    "QzEUMBIGA1UEAxMLR1RTIFJvb3QgUjIwHhcNMTYwNjIyMDAwMDAwWhcNMzYwNjIy\n"
    "MDAwMDAwWjBHMQswCQYDVQQGEwJVUzEiMCAGA1UEChMZR29vZ2xlIFRydXN0IFNl\n"
    "cnZpY2VzIExMQzEUMBIGA1UEAxMLR1RTIFJvb3QgUjIwggIiMA0GCSqGSIb3DQEB\n"
    "AQUAA4ICDwAwggIKAoICAQDO3v2m++zsFDQ8BwZabFn3GTXd98GdVarTzTukk3Lv\n"
    "CvptnfbwhYBboUhSnznFt+4orO/LdmgUud+tAWyZH8QiHZ/+cnfgLFuv5AS/T3Kg\n"
    "GjSY6Dlo7JUle3ah5mm5hRm9iYz+re026nO8/4Piy33B0s5Ks40FnotJk9/BW9Bu\n"
    "XvAuMC6C/Pq8tBcKSOWIm8Wba96wyrQD8Nr0kLhlZPdcTK3ofmZemde4wj7I0BOd\n"
    "re7kRXuJVfeKH2JShBKzwkCX44ofR5GmdFrS+LFjKBC4swm4VndAoiaYecb+3yXu\n"
    "PuWgf9RhD1FLPD+M2uFwdNjCaKH5wQzpoeJ/u1U8dgbuak7MkogwTZq9TwtImoS1\n"
    "mKPV+3PBV2HdKFZ1E66HjucMUQkQdYhMvI35ezzUIkgfKtzra7tEscszcTJGr61K\n"
    "8YzodDqs5xoic4DSMPclQsciOzsSrZYuxsN2B6ogtzVJV+mSSeh2FnIxZyuWfoqj\n"
    "x5RWIr9qS34BIbIjMt/kmkRtWVtd9QCgHJvGeJeNkP+byKq0rxFROV7Z+2et1VsR\n"
    "nTKaG73VululycslaVNVJ1zgyjbLiGH7HrfQy+4W+9OmTN6SpdTi3/UGVN4unUu0\n"
    "kzCqgc7dGtxRcw1PcOnlthYhGXmy5okLdWTK1au8CcEYof/UVKGFPP0UJAOyh9Ok\n"
    "twIDAQABo0IwQDAOBgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNV\n"
    "HQ4EFgQUu//KjiOfT5nK2+JopqUVJxce2Q4wDQYJKoZIhvcNAQEMBQADggIBALZp\n"
    "8KZ3/p7uC4Gt4cCpx/k1HUCCq+YEtN/L9x0Pg/B+E02NjO7jMyLDOfxA325BS0JT\n"
    "vhaI8dI4XsRomRyYUpOM52jtG2pzegVATX9lO9ZY8c6DR2Dj/5epnGB3GFW1fgiT\n"
    "z9D2PGcDFWEJ+YF59exTpJ/JjwGLc8R3dtyDovUMSRqodt6Sm2T4syzFJ9MHwAiA\n"
    "pJiS4wGWAqoC7o87xdFtCjMwc3i5T1QWvwsHoaRc5svJXISPD+AVdyx+Jn7axEvb\n"
    "pxZ3B7DNdehyQtaVhJ2Gg/LkkM0JR9SLA3DaWsYDQvTtN6LwG1BUSw7YhN4ZKJmB\n"
    "R64JGz9I0cNv4rBgF/XuIwKl2gBbbZCr7qLpGzvpx0QnRY5rn/WkhLx3+WuXrD5R\n"
    "RaIRpsyF7gpo8j5QOHokYh4XIDdtak23CZvJ/KRY9bb7nE4Yu5UC56GtmwfuNmsk\n"
    "0jmGwZODUNKBRqhfYlcsu2xkiAhu7xNUX90txGdj08+JN7+dIPT7eoOboB6BAFDC\n"
    "5AwiWVIQ7UNWhwD4FFKnHYuTjKJNRn8nxnGbJN7k2oaLDX5rIMHAnuFl2GqjpuiF\n"
    "izoHCBy69Y9Vmhh1fuXsgWbRIXOhNUQLgD1bnF5vKheW0YMjiGZt5obicDIvUiLn\n"
    "yOd/xCxgXS/Dr55FBcOEArf9LAhST4Ldo/DUhgkC\n"
    "-----END CERTIFICATE-----\n";



//******************************************************************************
  void push_nachricht2()
  {


   //boolean pushOver() {
          //if (strcmp(config.pushOverEnable, "t") == 0) {//only if enabled

            WiFiClientSecure clientsec;
            uint32_t _timestamp = 0;
            //uint32_t postPushLength = 0;

            Serial.println("sending to pushover");
            Serial.println(_pushMessage);

          
            postPush = "token="; 
            postPush += _token;
            postPush += "&user="; 
            postPush += _user;
            postPush += "&title="; 
            postPush += _title;
            postPush += "&message="; 
            postPush += _pushMessage;
            postPush += "&device"; 
            postPush += _device;
            postPush += "&url="; 
            postPush += _url;
            postPush += "&url_title="; 
            postPush += _url_title;
            postPush += "&priority="; 
            postPush += _priority;
            postPush += "&retry="; 
            postPush += _retry;
            postPush += "&expire=";
            postPush += _expire;
            postPush += "&sound="; 
            postPush += _sound;

            if (_timestamp != 0) postPush += String("&timestamp=") + _timestamp;

            Serial.println(postPush);
          
          
            clientsec.setCACert(root_cert);          // Setze Google Fingerprint
         
            if (!clientsec.connect("api.pushover.net", 443)) {  // Starte SSL Verbindung   
              Serial.println("couldn't connect..");
              //clientsec.stop();
              return;
            }

            //String post = String("token=") + _token + "&user=" + _user + "&title=" + _title + "&message=" + _message + "&device=" + _device + "&url=" + _url + "&url_title=" + _url_title + "&priority=" + _priority + "&retry=" + _retry + "&expire=" + _expire + "&sound=" + _sound;

            //Serial.println(post);
            
            //if (_htmlPush == true) postPush += String("&html=1");
             //= String("POST /1/messages.json HTTP/1.1\r\nHost: api.pushover.net\r\nConnection: close\r\nAccept: Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nContent-Length: ") + post.length() + "\r\n\r\n" + post;
            //postPushLength = postPush.length();
           
            httpPush = "POST /1/messages.json HTTP/1.1\r\nHost: api.pushover.net\r\nConnection: close\r\nAccept: Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nContent-Length: " + String(postPush.length()) + "\r\n\r\n" + postPush;
            clientsec.print(httpPush);
            //let's wait for something to come back... only a few seconds
            unsigned long startTimePush = millis();
            while (millis() - startTimePush < 5000) {
              if (clientsec.available()){
                Serial.println("From Server");
                break;
              }
            }
            while (clientsec.available() != 0) {
              Serial.print(char(clientsec.read()));
            }
            clientsec.stop();

            //return true;

          //}
         // return false;
        //}


  }
  #endif
//******************************************************************************







  //******************************************************************************
  //******************************************************************************
  //**                          S E T U P                                      ***
  //******************************************************************************
  //******************************************************************************
// Setup() - initialization happens here
void setup() {



  //******************************************************************************
  //                              VARS CALC                                      *
  //******************************************************************************
        val3max = 300;
        vredTo = val3max;
        vredFrom = 200;
        vyellowTo = vredFrom;
        vyellowFrom = 100;
        vgreenTo = vyellowFrom;
        vgreenFrom = 50;

        val1max = 600;
        vredTo2 = val1max;
        vredFrom2 = 500;
        vyellowTo2 = vredFrom2;
        vyellowFrom2 = 400;
        vgreenTo2 = vyellowFrom2;
        vgreenFrom2 = 300;

        val2max = 60;
        vredTo3 = val2max;
        vredFrom3 = 50;
        vyellowTo3 = vredFrom3;
        vyellowFrom3 = 40;
        vgreenTo3 = vyellowFrom3;
        vgreenFrom3 = 30;

        val1_color = "0, 0, 0, 0.3";
        val2_color = "0, 0, 0, 0.3";
        val3_color = "0, 0, 0, 0.3";


  //******************************************************************************
  //                       Starte Debug Seriell                                  *
  //******************************************************************************
  Serial.begin(115200);
  while (!Serial) {}
  //Serial.println("__ Serial Debug OK __");


//pushOver();

  //******************************************************************************
  //                                EEPROM                                       *
  //******************************************************************************
    EEPROM.begin(EEPROM_SIZE);
    
    //Write data into eeprom
    int address = 0;
    int boardId = 80;  //uint16_t

    EEPROM.write(address, boardId);//EEPROM.put(address, boardId);
    //address += sizeof(boardId); //update address value

    //float param = 26.5;
    //EEPROM.writeFloat(address, param);//EEPROM.put(address, param);
    EEPROM.commit();


    //Read data from eeprom
      address = 0;
      int readId;
      readId = EEPROM.read(address); //EEPROM.get(address,readId);
      //Serial.print("Read Id = ");
      //Serial.println(readId);
      address += sizeof(readId); //update address value

      float readParam;
      EEPROM.get(address, readParam); //readParam=EEPROM.readFloat(address);
      //Serial.print("Read param = ");
      //Serial.println(readParam);

      EEPROM.end();



  //******************************************************************************
  //                            Starte LED                                       *
  //******************************************************************************
    // Gib deinen Setup-Code hier ein, um ihn einmal auszuführen:
    strip1.begin();
    strip1.show();
    strip1.setPixelColor(0, strip1.Color(0, 0, 0));
    strip1.setPixelColor(1, strip1.Color(0, 0, 0));
    strip1.setPixelColor(2, strip1.Color(0, 0, 0));
    strip1.setPixelColor(3, strip1.Color(0, 0, 0));
    strip1.show();




  //******************************************************************************
  //                            Start  EEPROM                                    *
  //****************************************************************************** 
  //  https://randomnerdtutorials.com/esp32-save-data-permanently-preferences/
  
  Preferences preferences;
  preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden
  //preferences.clear();                                  //Alle "Dateien" unter dem Ordner eenvs löschen
  //preferences.remove("ee_var_01");                          //"Datei" ee_var_01 löschen

  //unsigned int ee_int_01 = preferences.getUInt("ee_int_01", 0);  //"Datei" ee_int_01 auslesen und in ee_int_01 counter schreiben", 0" bedeutet, falls ee_int_01 nicht existiert standardwert 0 übergeben
  //unsigned long ee_long_01 = preferences.getULong("ee_long_01", 0); 
  //String ee_string_01 = preferences.getString("ee_string_01", "0"); 
  //uint8_t ee_char_01 = preferences.getUChar("ee_char_01", 0);
   
  //------------------------- 
  ee_var_01 = preferences.getUInt("ee_var_01", 0); 
  ee_var_01++;                                               //Variable counter um 1 erhöhen
  #ifdef NVS_DEBUG
  Serial.printf("Boot Anzahl: %u\n", ee_var_01);          //Variable counter Seriell ausgeben
  #endif
  preferences.putUInt("ee_var_01", ee_var_01);                  //Variable counter unter "Datei" ee_var_01 speichern
  //------------------------

  //------------------------- 
  ee_var_02 = preferences.getUInt("ee_var_02", 0); 
  //Serial.printf("Saving: %u\n", ee_var_02);                     //Variable counter Seriell ausgeben
  preferences.putUInt("ee_var_02", ee_var_02);                  //Variable counter unter "Datei" ee_var_02 speichern
  //------------------------



  ee_wifires = preferences.getUInt("ee_wifires", 0);              //"Datei" ee_wifires auslesen
  ee_wifires++; 
  preferences.putUInt("ee_wifires", ee_wifires);                  //Variable counter unter "Datei" ee_wifires speichern 
  #ifdef NVS_DEBUG
  Serial.printf("Boot Anzahl für Reset WLAN: %u\n", ee_wifires);          //Variable counter Seriell ausgeben
  #endif
  

      //---------------- WLAN RESET mit Boot Counter  -----------------------
      //if (ee_wifires >= 6){
      if (ee_wifires >= 6){  
            ee_wifires = 0;

            preferences.putUInt("ee_wifires", ee_wifires);                  //Variable counter unter "Datei"  speichern
            
            ee_portalTimeout = 320;
            preferences.putUInt("ePortalTime", ee_portalTimeout);                  //Variable counter unter "Datei" ee_portalTimeout speichern 
            
            preferences.end();                                      //Preferences beenden

            Serial.println("Erase WLAN settings and restart ...");
            Serial.printf("Portal Timeout: %u\n", ee_portalTimeout);          //Variable counter Seriell ausgeben
            WiFiManager wifiManager;
            wifiManager.resetSettings();
            delay(500);
            ESP.restart(); 
      }
        //----------------------------------------------------------------------



        //******************************************************************************
        //                             EEPROM   lesen                                  *
        //****************************************************************************** 
        //Serial.println(p_inputstaticip); 


        p_inputpwchange = preferences.getString("p_inputpwchange", "          ");  
        
        if (p_inputpwchange != "          "){
          if (p_inputpwchange != ""){
            p_inputpasswort_vorgabe = p_inputpwchange;
            if (p_inputpasswort_vorgabe != "root"){
              #ifdef WEB_DEBUG
                Serial.println("PW geändert: " + p_inputpasswort_vorgabe);
              #endif 
            }
          }
        }
        p_inputpwchange = ""; // leeren das im Web nichts drinsteht

        p_inputstaticip = preferences.getString("p_staticip", "152.158.158.251"); 
        p_inputsubnetmask = preferences.getString("p_subnetmask", "255.255.255.0"); 
        p_inputntp = preferences.getString("p_ntp", "pool.ntp.org"); 
        p_inputname = preferences.getString("p_name", "modbus"); 
        p_inputipchange = preferences.getString("p_ipchange", "0"); 
        p_inputwifidns = preferences.getString("p_wifidns", "152.158.158.251"); 
        

        p_inputip01 = preferences.getString("p_inputip01", "000.000.000.000"); 
        p_inputip02 = preferences.getString("p_inputip02", "000.000.000.000"); 
        p_inputip03 = preferences.getString("p_inputip03", "000.000.000.000"); 
        p_inputip04 = preferences.getString("p_inputip04", "000.000.000.000"); 
        p_inputip05 = preferences.getString("p_inputip05", "000.000.000.000"); 

        p_room01 = preferences.getString("p_room01", "----------"); 
        p_room02 = preferences.getString("p_room02", "----------"); 
        p_room03 = preferences.getString("p_room03", "----------"); 
        p_room04 = preferences.getString("p_room04", "----------"); 
        p_room05 = preferences.getString("p_room05", "----------"); 

        p_ipparson = preferences.getString("p_ipparson", "0"); 



        p_mqonoff = preferences.getString("p_mqon", "off"); 
        p_inputmqclient = preferences.getString("p_mqclie", "client"); 
        p_inputmqserver = preferences.getString("p_mqserv", "mqtt.io"); 
        p_inputmqport = preferences.getString("p_mqport", "1883"); 
        p_inputmquser = preferences.getString("p_mquser", "user"); 
        p_inputmqpass = preferences.getString("p_mqpass", "pass"); 
        p_inputmqtopic = preferences.getString("p_mqtopic", "radonvalue"); 
        p_inputmqtopic1 = preferences.getString("p_mqtopic1", "co2value"); 
        p_inputmqtopic2 = preferences.getString("p_mqtopic2", "tvocvalue"); 

        p_cloudonoff = preferences.getString("p_clon", "off"); 
        p_inputcloudserver = preferences.getString("p_clserv", "rec.radoncloud.com"); 
        p_inputclouduser = preferences.getString("p_cluser", "user"); 
        p_inputclouddevice = preferences.getString("p_cldevice", "5487"); 
        p_inputcloudpage = preferences.getString("p_clpage", "s_get.php"); 
        p_inputcloudkey = preferences.getString("p_clkey", "3as44643euW"); 

        p_inputgateway = preferences.getString("p_gateway", "192.168.178.1"); 
        p_inputtcpport = preferences.getString("p_tcpport", "502"); 
        p_inputwebport = preferences.getString("p_webport", "80"); 
        p_inputbaudrate = preferences.getString("p_baudrate", "9600"); 
        p_inputdatabits = preferences.getString("p_databits", "8"); 
        p_inputparity = preferences.getString("p_parity", "none"); 
        p_inputstopbit = preferences.getString("p_stopbit", "1"); 
        p_inputrestimeout = preferences.getString("p_restimeout", "1000"); 

        ee_portalTimeout = preferences.getUInt("ePortalTime", 320);              //"Datei" ee_portalTimeout auslesen

        p_ledonoff = preferences.getString("p_ledon", "off"); 
        p_inputledred = preferences.getString("p_ledred", "600"); 
        p_inputledorange = preferences.getString("p_ledorange", "300"); 
        p_inputledgreen = preferences.getString("p_ledgreen", "100"); 
        p_inputledfunk = preferences.getString("p_ledfunk", "radon"); 
        p_inputledgamma = preferences.getString("p_ledtime", "200"); 

        p_vanonoff = preferences.getString("p_vanon", "off"); 
        p_inputvanmax = preferences.getString("p_vanmax", "600"); 
        p_inputvanmin = preferences.getString("p_vanmin", "300");
        

        p_pushonoff = preferences.getString("p_pushon", "off"); 
        p_pushkey = preferences.getString("p_pushkey", "11111NoaO1ohRpg222226677"); 
        p_pushmessage = preferences.getString("p_pushmessage", "Push Message"); 
        p_pushtitle = preferences.getString("p_pushtitle", "Modbus Push"); 
        p_pushsound = preferences.getString("p_sound", "8"); 
        p_pushvibration = preferences.getString("p_vibration", "3"); 
        p_pushicon = preferences.getString("p_icon", "91"); 
        p_pushiconcolor = preferences.getString("p_iconcolor", "FF0000"); 
        p_pushpriority = preferences.getString("p_priority", "2"); 
        p_pushdevice = preferences.getString("p_pushdevice", "41828"); 
        p_pushvalue = preferences.getString("p_pushvalue", "300"); 
        p_pushvaluei = p_pushvalue.toInt();

        p_sett01 = preferences.getUInt("p_sett01", 1); 
        p_sett02 = preferences.getUInt("p_sett02", 0); 
        p_sett03 = preferences.getUInt("p_sett03", 0); 
        p_sett04 = preferences.getUInt("p_sett04", 0); 
        p_sett05 = preferences.getUInt("p_sett05", 0); 
        p_sett06 = preferences.getUInt("p_sett06", 0); 
        p_sett07 = preferences.getUInt("p_sett07", 0); 
        p_sett08 = preferences.getUInt("p_sett08", 0); 
        p_sett09 = preferences.getUInt("p_sett09", 0); 
        p_sett10 = preferences.getUInt("p_sett10", 0); 
        p_sett11 = preferences.getUInt("p_sett11", 0); 

        changesetValue();


        ledRedVal = atoi(p_inputledred.c_str());
        ledOrangeVal = atoi(p_inputledorange.c_str());
        ledGreenVal = atoi(p_inputledgreen.c_str());
        ledgammaVal = atoi(p_inputledgamma.c_str());
        if(ledgammaVal == 0){
        ledgammaVal = 1;
        }
        if(ledgammaVal > 255){
        ledgammaVal = 255;
        p_inputledgamma = "255";
        preferences.putString("p_ledtime", p_inputledgamma);                         //Variable speichern
        }

        p_inputtcpport.toCharArray(p_inputtcpportc, 4); 
        port = atoi(p_inputtcpportc); 

        vent_min_stufe = p_inputvanmin.toInt();
        vent_max_stufe = p_inputvanmax.toInt();


          //-------------------------------------------------------------------------------
          //------------------------------------------------------------------------------



   //*******************************************************************************************************





  //******************************************************************************
  //                       Starte WiFi Verbindung                                *
  //******************************************************************************
    //WiFiManager
    //Local intialization. Once its business is done, there is no need to keep it around
    WiFiManager wifiManager;

    
    //DEBUG_ERROR
    //#define DEBUG_NOTIFY
    //#define DEBUG_VERBOSE
    //DEBUG_DEV
    //DEBUG_MAX
    
    //wifiManager.setDebugOutput(true); 
    //wifiManager.setDebugOutput(false);  

          if(p_inputipchange == "1"){
            if (p_inputstaticip != "152.158.158.251"){
            
              #ifdef WIFI_DEBUG
              Serial.println("Wifi IP Adress User Config");
              #endif

              IPAddress _ip,_dns,_gw,_sn;
              _ip.fromString(p_inputstaticip);
              _gw.fromString(p_inputgateway);
              _sn.fromString(p_inputsubnetmask);

              // p_inputwifidns
              _dns.fromString(p_inputwifidns);
              //_dns.fromString(static_dns);
              wifiManager.setSTAStaticIPConfig(_ip, _gw, _sn);
              // p_inputipchange = preferences.getString("p_ipchange", "0"); 

            }
          }


    wifiManager.setHostname("Modbus-Gateway");

      //const char* menu[] = {"wifi","wifinoscan","info","param","close","sep","erase","restart","exit"};
      
    const char* menu[] = {"wifi","wifinoscan","restart","exit"};
    wifiManager.setMenu(menu,4);

    wifiManager.setConfigPortalTimeout(ee_portalTimeout);  // Zeit in secunden

     //in seconds
    //wifiManager.setTimeout(300);


    // wifiManager.setConnectRetries(3);
    // wifiManager.setDarkMode(true);
    // wifiManager.setParamsPage(false);
    // wifiManager.setWiFiAutoReconnect(true);
    // wifiManager.setConfigPortalBlocking(true);

      wifiManager.setTitle("WLAN Config");
     // wifiManager.setHostname("Modbus.local");



      wifiManager.setSaveConfigCallback(saveConfigCallback);
      wifiManager.setWebServerCallback(WebServerCallback);
      wifiManager.setConfigResetCallback(ConfigResetCallback);
      wifiManager.setSaveParamsCallback(SaveParamsCallback);
     // wifiManager.setPreSaveConfigCallback(PreSaveConfigCallback);
      wifiManager.setAPCallback(configModeCallback);
      
      //wifiManager.setShowInfoUpdate(true);
      //wifiManager.setShowInfoErase(true);

      
      //wifiManager.getWiFiespInfo();
      //wifiManager.getInfoData("k");


     

    //wifiManager.setRetryAttempts(20);
    //set custom ip for portal   
    //wifiManager.setAPStaticIPConfig(IPAddress(10,0,1,1), IPAddress(10,0,1,1), IPAddress(255,255,255,0));
    //fetches ssid and pass from eeprom and tries to connect
    //if it does not connect it starts an access point with the specified name
    //here  "AutoConnectAP"
    //and goes into a blocking loop awaiting configuration


    wifiManager.autoConnect("Modbus Gateway");


    //or use this for auto generated name ESP + ChipID
      //exit after config instead of connecting

    //set config save notify callback
    //wifiManager.setSaveConfigCallback(saveConfigCallback);

      //wifiManager.setBreakAfterConfig(true);

    // Start WiFi Manager mit Timeout Überprüfung. Nach Timeout... Tiefschlaf
    //if (!wifiManager.startConfigPortal("Modbus Gateway")) {
      //Serial.println("failed to connect and hit timeout");
      //delay(3000);
      //reset and try again, or maybe put it to deep sleep
      //ESP.deepSleep(0); // sleep forever
    //}

    //ESP_ERROR_CHECK( esp_wifi_set_storage(WIFI_STORAGE_RAM) );






/*
    if(WiFi.localIP().toString() != p_inputstaticip){ //wurde verändert aber durch WIFImanager überschrieben
      if(p_inputstaticip != "152.158.158.251"){   //nicht start konfig 

        Serial.println("IP wurde verändert aber durch WIFImanager überschrieben");

            getIpAddress(p_inputstaticip); 
            Serial.print("IP Address=");             
            Serial.print(IpPartAddress[0]); Serial.print("."); Serial.print(IpPartAddress[1]); Serial.print("."); 
            Serial.print(IpPartAddress[2]); Serial.print("."); Serial.println(IpPartAddress[3]); 
            IPAddress local_IP( IpPartAddress[0], IpPartAddress[1], IpPartAddress[2], IpPartAddress[3] );
            Serial.println(local_IP);

            getIpAddress(p_inputsubnetmask);
            Serial.print("Submask="); 
            Serial.print(IpPartAddress[0]); Serial.print("."); Serial.print(IpPartAddress[1]); Serial.print("."); 
            Serial.print(IpPartAddress[2]); Serial.print("."); Serial.println(IpPartAddress[3]); 
            IPAddress subnet(IpPartAddress[0], IpPartAddress[1], IpPartAddress[2], IpPartAddress[3]);
            Serial.println(subnet);

            getIpAddress(p_inputgateway);        
            Serial.print("IP gateway="); 
            Serial.print(IpPartAddress[0]); Serial.print("."); Serial.print(IpPartAddress[1]); Serial.print("."); 
            Serial.print(IpPartAddress[2]); Serial.print("."); Serial.println(IpPartAddress[3]);         
            IPAddress gateway(IpPartAddress[0], IpPartAddress[1], IpPartAddress[2], IpPartAddress[3]);
            Serial.println(gateway);

            IPAddress primaryDNS(8, 8, 8, 8); 
            IPAddress secondaryDNS(8, 8, 4, 4);
            // This part of code will try create static IP address
            if (!WiFi.config(local_IP, gateway, subnet, primaryDNS, secondaryDNS)) {
                Serial.println("STA Failed to configure");
            }

           // Preferences preferences;
            //preferences.end();                                      //Preferences beenden
            //Serial.println("Reboot");
            //delay(1000);
            //ESP.restart(); 

      } 
    }
*/

      // if(p_inputstaticip != "152.158.158.251"){   //nicht start konfig 

      // }

      //Serial.println(p_inputstaticip); 



      //tries to connect to last known settings if it does not connect it starts an access point with the specified name
      //here  "AutoConnectAP" with password "password" and goes into a blocking loop awaiting configuration
     
      if (!wifiManager.autoConnect()) {
        //Preferences preferences;
        //preferences.end();                                      //Preferences beenden
        #ifdef WIFI_DEBUG
        Serial.println("wifi failed to connect, we should reset as see if it connects");
        #endif
        delay(1000);
        ESP.restart(); 
      }else{
       
         #ifdef WIFI_DEBUG
           Serial.println("Wifi auto Connect"); 
         #endif
     
          ee_portalTimeout = 30;                                            // kürzer wegen neu Booten
          Serial.printf("Portal Timeout: %u\n", ee_portalTimeout);          //Variable counter Seriell ausgeben
          preferences.putUInt("ePortalTime", ee_portalTimeout);                  //Variable counter unter "Datei" ee_portalTimeout speichern 

      }
      
      //Serial.println(WiFi.mode(WIFI_STA));   //1=ok
 
    // IP Change for WIFIMANAGER

    if(p_inputipchange == "0"){
      Serial.println("WriteipValuechange()  p_inputipchange = 0");
      
      
      p_inputwifidns = WiFi.dnsIP(0).toString();               //Variable speichern
      WriteipValuechange();
    }
    
    if(WiFi.localIP() =! p_inputstaticip){
      Serial.println("WiFi.localIP() =! p_inputstaticip");
      p_inputstaticip = WiFi.localIP().toString();                    //Variable speichern
      p_inputgateway = WiFi.gatewayIP().toString();                   //Variable speichern
      p_inputsubnetmask = WiFi.subnetMask().toString();               //Variable speichern
      p_inputwifidns = WiFi.dnsIP(0).toString();               //Variable speichern

      WriteipValuechange();
    }


    #ifdef WIFI_DEBUG
      Serial.print(F("Wifimanager IP --> "));
      Serial.println(WiFi.localIP());
      Serial.print(F("Wifimanager GW --> "));
      Serial.println(WiFi.gatewayIP());
      Serial.print(F("Wifimanager SM --> "));
      Serial.println(WiFi.subnetMask());
      Serial.print(F("Wifimanager DNS 1 --> "));
      Serial.println(WiFi.dnsIP(0));
      Serial.println("---------------------------");



      Serial.print("Config IP --> ");             
      Serial.println(p_inputstaticip);   
      Serial.print("Config GW --> "); 
      Serial.println(p_inputgateway);
      Serial.print("Config SM --> "); 
      Serial.println(p_inputsubnetmask);    
      Serial.print(F("Config DNS 1 --> "));
      Serial.println(p_inputwifidns);  // p_inputwifidns   WiFi.dnsIP(0)
      Serial.println("---------------------------");
    #else
   
      #ifdef IPM_DEBUG
        Serial.println("---------------------------");
        Serial.print(F("Wifimanager IP    --> "));
        Serial.println(WiFi.localIP());
        Serial.print(F("Wifimanager GW    --> "));
        Serial.println(WiFi.gatewayIP());
        Serial.print(F("Wifimanager SM    --> "));
        Serial.println(WiFi.subnetMask());
        Serial.print(F("Wifimanager DNS 1 --> "));
        Serial.println(WiFi.dnsIP(0));
        Serial.println("---------------------------");
      #endif

    #endif


     


/*
     if(WiFi.status() != WL_CONNECTED){
        Serial.println("WiFi.status NOT CONNECTED");
     }else{
        Serial.println("WiFi.status CONNECTED");
     }
*/
    
    
    
     // p_inputstaticip = WiFi.localIP().toString();                    //Variable speichern
     // p_inputgateway = WiFi.gatewayIP().toString();                   //Variable speichern
     // p_inputsubnetmask = WiFi.subnetMask().toString();               //Variable speichern
     // WriteipValue();
      


      /*
      //setze hier statische IP
      IPAddress _ip,_gw,_sn,_dns;
      _ip.fromString(static_ip);
      _gw.fromString(static_gw);
      _sn.fromString(static_sn);
      _dns.fromString(static_dns);
      wifiManager.setSTAStaticIPConfig(_ip, _gw, _sn);
      */





    //wifiManager.setAPCallback(configModeCallback);
    //fetches ssid and pass and tries to connect
    //if it does not connect it starts an access point with the specified name
    //here  "AutoConnectAP"
    //and goes into a blocking loop awaiting configuration
    /*
    if (!wifiManager.autoConnect()) {
      Serial.println("failed to connect and hit timeout");
      //reset and try again, or maybe put it to deep sleep
      ESP.restart();
      delay(1000);
    }*/
    


    /*
      // Connect to WiFi
      WiFi.begin(ssid, pass);
      delay(200);
      while (WiFi.status() != WL_CONNECTED) {
        Serial.print('.');
        delay(1000);
      }
    */

  //******************************************************************************
  //                          Starte Webserver                                   *
  //******************************************************************************

  on_AsyncWebServer();
  
  //*******************************************************************************





  //******************************************************************************
  //                            Weller Lüfter                                    *
  //******************************************************************************

  //HardwareSerial Serial1(1);
  #define SERIAL1_RXPIN 33            // receive  UART1  SD3  GPIO10
  #define SERIAL1_TXPIN 26//34            // transmit  UART1  SD2  GPIO 9 

  Serial1.begin(1200, SERIAL_8N1, SERIAL1_RXPIN, SERIAL1_TXPIN);
  Serial.setTimeout(200); // standard 1000 milliseconds
  inputString.reserve(20);
  //SoftwareSerial mySerial(SERIAL1_RXPIN, SERIAL1_TXPIN); // RX, TX


  //*******************************************************************************






  //******************************************************************************
  //                       Starte Modbus RTU                                     *
  //******************************************************************************

  // Init Serial1/2 conneted to the RTU Modbus
 // (Fill in your data here!)


  #define SERIAL2_RXPIN 16            // receive  UART2    gelb    GPIO16  PIN25  RXD2  
  #define SERIAL2_TXPIN 17            // transmit  UART2   grün    GPIO17  PIN27  TXD2
  //Serial2.begin(9600, SERIAL_8N1, GPIO_NUM_17, GPIO_NUM_16);

  Serial2.begin(mbus_baud, SERIAL_8N1, SERIAL2_RXPIN, SERIAL2_TXPIN);


  //#ifdef WEB_DEBUG
  //Serial.println("__ Serial 1 OK __");
  //#endif
  //-------------------------------------------------------------
  



//******************************************************************************
//                       Setup Modbus server                                   *
//******************************************************************************
#ifndef MB_Gateway

  // Set up test memory
  for (uint16_t i = 0; i < 4; ++i) {
    memo[i] = (i * 2) << 8 | ((i * 2) + 1);
  }

  // Define and start RTU server
  MBserver.registerWorker(2, READ_INPUT_REGISTER, &FC03);     // FC=04 for serverID=2
  p_inputtcpport.toCharArray(p_inputtcpportc, 4); 
  port = atoi(p_inputtcpportc); 
  MBserver.start(port, 2, 20000);
  //-------------------------------------------------------------

#endif








//------------------------------------------------------------------------------





  //******************************************************************************
  //                       Starte SPIFFS Dateisystem                             *
  //****************************************************************************** 

    if(!SPIFFS.begin(FORMAT_SPIFFS_IF_FAILED)){
        #ifdef NVS_DEBUG
        Serial.println("SPIFFS Mount Failed");
        #endif
        return;
    }else{
        #ifdef NVS_DEBUG
        Serial.println("SPIFFS mounted correctly.");   
        #endif 
    }

 
    #ifdef NVS_DEBUG
    // Get all information of SPIFFS
    unsigned int totalBytes = SPIFFS.totalBytes();
    unsigned int usedBytes = SPIFFS.usedBytes();
    Serial.println("===== File system info =====");
    Serial.print("Total space:      ");
    Serial.print(totalBytes);
    Serial.println("byte");
    Serial.print("Total space used: ");
    Serial.print(usedBytes);
    Serial.println("byte");
    Serial.println();  
    #endif 
    //listDir(SPIFFS, "/", 0);
    //writeFile(SPIFFS, "/hello.txt", "Hello ");
    //appendFile(SPIFFS, "/hello.txt", "World!\r\n");
    //readFile(SPIFFS, "/lightman.js");
    //readFile(SPIFFS, "/lightman.js");
    //readFile(SPIFFS, "/mobil04.html");
   // renameFile(SPIFFS, "/hello.txt", "/foo.txt");
    //readFile(SPIFFS, "/foo.txt");
    //deleteFile(SPIFFS, "/foo.txt");
    //testFileIO(SPIFFS, "/test.txt");
   // deleteFile(SPIFFS, "/test.txt");
    //Serial.println( "Test complete" );
    
  // Dateisystem formatieren
  //SPIFFS.format();



  //datei_schreiben();
  //datei_lesen();
  //datei_lesen_line();

  //----------------------------------------------------------------




  //******************************************************************************
  //                           Starte MQTT Setup                                 *
  //****************************************************************************** 

   
  //client.setServer(mqttServer, mqttport);

  p_inputmqserver.toCharArray(p_inputmqserverc, 40);
  p_inputmqporti = p_inputmqport.toInt();
  
      //WiFiClient Client;
      const int httpPortmqtt = 1883;
      IPAddress servermqtt(52,54,110,50);  // io.adafruit.com

  client.setServer(servermqtt, httpPortmqtt);
  //client.setServer(p_inputmqserverc, p_inputmqporti);

  client.setCallback(callback);





  //******************************************************************************
  //                           Starte CO2 Setup                                 *
  //****************************************************************************** 
  #ifdef CO2_on
   
    #ifdef CO2_DEBUG
    Serial.println("setup: Starting CCS811 basic demo");
    Serial.print("setup: ccs811 lib  version: ");
    Serial.println(CCS811_VERSION);
    #endif

    // Enable I2C
    Wire.begin();
  
    // Enable CCS811
    ccs811.set_i2cdelay(50); // Needed for ESP8266 because it doesn't handle I2C clock stretch correctly
    //bool okco2 ;
     //= ccs811.begin();
    ccs811.begin();
    #ifdef CO2_DEBUG
    //if ( !okco2 ) Serial.println("setup: CCS811 begin FAILED");
    #endif

    #ifdef CO2_DEBUG
    // Print CCS811 versions
    Serial.print("setup: hardware    version: "); Serial.println(ccs811.hardware_version(), HEX);
    Serial.print("setup: bootloader  version: "); Serial.println(ccs811.bootloader_version(), HEX);
    Serial.print("setup: application version: "); Serial.println(ccs811.application_version(), HEX);
    #endif
  
    // Start measuring
    //okco2 = 
    ccs811.start(CCS811_MODE_10SEC);
    #ifdef CO2_DEBUG
    //if ( !okco2 ) Serial.println("setup: CCS811 start FAILED");
    #endif


  #endif



  //******************************************************************************
  //                     INIT Async WebServer Request                            *
  //****************************************************************************** 

    // Route for root / web page
  server.on("/", HTTP_GET, [](AsyncWebServerRequest *request){
      
      #ifdef WEB_DEBUG
        pauseWebpage = 2;
        Serial.println(request->url());
        Serial.print("Received request from client with IP: ");
        IPAddress remote_ip = request->client()->remoteIP();
        request_remoteIP_temp = remote_ip.toString(); 
        Serial.println(request_remoteIP_01);
        
        //request_remoteIP_temp = request_remoteIP_01;

        /*
        Serial.println(request->version());       // uint8_t: 0 = HTTP/1.0, 1 = HTTP/1.1
        Serial.println(request->method());        // enum:    HTTP_GET, HTTP_POST, HTTP_DELETE, HTTP_PUT, HTTP_PATCH, HTTP_HEAD, HTTP_OPTIONS
        Serial.println(request->url());          // String:  URL of the request (not including host, port or GET parameters)
        Serial.println(request->host());         // String:  The requested host (can be used for virtual hosting)
        Serial.println(request->contentType());   // String:  ContentType of the request (not avaiable in Handler::canHandle)
        Serial.println(request->contentLength()); // size_t:  ContentLength of the request (not avaiable in Handler::canHandle)
        Serial.println(request->multipart());     // bool:    True if the request has content type "multipart"
        */
      #endif


      select_reboot = 1;
      p_inputsavebit = "savebit";
      p_inputsavebit_txt = "";    

      p_getapmodus = "";
      p_getreboot = "";
      p_getsearch = "";
      p_getdelete = "";
      p_getscan = "";
      p_getradonaktual = "";
      val4 ++;

    if(chart_page <= 2){ 
      chart_page = 3;
     }



      if(chart_page == 3){
        if(gauge_page == true){  
          request->send(200, "text/html", SendHTMLc(val1, val2, val3, val4)); 
        }else{
          request->send(200, "text/html", SendHTMLf(val1, val2, val3, val4)); 
        }
      }
      if(chart_page == 4){
      request->send(200, "text/html", SendHTMLe(r0_val1, r0_val2, r0_val3, r1_val1, r1_val2, r1_val3, r2_val1, r2_val2, r2_val3, r3_val1, r3_val2, r3_val3, r4_val1, r4_val2, r4_val3, r5_val1, r5_val2, r5_val3)); 
      }

      if(chart_page == 5){
        request->send(200, "text/html", SendHTMLg(fval1, fval2, fval3, fval4, fval5, fval6, fval7, fval8, fval9, fval10, f_alarm_s, divfan7, vent_max_stufe, vent_min_stufe)); 
      }

    //}

  });



  server.on("/index.html", HTTP_GET, [](AsyncWebServerRequest *request){
      #ifdef WEB_DEBUG
     // Serial.println(request->url());
     // Serial.print("Received request from client with IP: ");
     // Serial.println(request->client()->remoteIP());
      #endif
      select_reboot = 1;
      p_inputsavebit = "savebit";
      p_inputsavebit_txt = "";

      p_getapmodus = "";
      p_getreboot = "";
      p_getsearch = "";
      p_getdelete = "";
      p_getscan = "";
      p_getradonaktual = "";
      val4 = 0;
      pauseWebpage = 5;

      if(chart_page == 3 || chart_page == 4 || chart_page == 5){
        chart_page = 0;
      }

      if(chart_page == 0){  
      //request->send_P(200, "text/html", index_html, processor);
      
      AsyncWebServerResponse *response = request->beginResponse_P(200, "text/html", index_html, processor);
      response->addHeader("Server","Radon Web Server");
      request->send(response);


      }else{
        if(chart_page == 1){ 
          request->send_P(200, "text/html", index_htmlb, processor); 
        }
        if(chart_page == 2){  
           request->send_P(200, "text/html", index_htmld, processor);   
        }
        if(chart_page == 6){  
           request->send_P(200, "text/html", index_htmle, processor);   
        }
      }




  });
  server.on("/index.htm", HTTP_GET, [](AsyncWebServerRequest *request){
      //Serial.println(request->url());
      select_reboot = 1;
      p_inputsavebit = "savebit";
      p_inputsavebit_txt = "";   

      p_getapmodus = "";
      p_getreboot = "";
      p_getsearch = "";
      p_getdelete = "";
      p_getscan = "";
      p_getradonaktual = "";  
      pauseWebpage = 5;

    if(chart_page >= 3){
      chart_page = 0;
    }

    updateDIVs();

    if(chart_page <= 2 || chart_page == 6){
      if(chart_page == 0){  
      request->send_P(200, "text/html", index_html, processor);
      }else{
        if(chart_page == 1){ 
          request->send_P(200, "text/html", index_htmlb, processor);  
        }
        if(chart_page == 2){  
           request->send_P(200, "text/html", index_htmld, processor);   
        }
        if(chart_page == 6){  
           request->send_P(200, "text/html", index_htmle, processor);   
        }
      }
    }else{
      if(chart_page == 3){
        if(gauge_page == true){  
          request->send(200, "text/html", SendHTMLc(val1, val2, val3, val4)); 
        }else{
          request->send(200, "text/html", SendHTMLf(val1, val2, val3, val4)); 
        }
      }
      if(chart_page == 4){
      request->send(200, "text/html", SendHTMLe(r0_val1, r0_val2, r0_val3, r1_val1, r1_val2, r1_val3, r2_val1, r2_val2, r2_val3, r3_val1, r3_val2, r3_val3, r4_val1, r4_val2, r4_val3, r5_val1, r5_val2, r5_val3)); 
      }
      if(chart_page == 5){
        request->send(200, "text/html", SendHTMLg(fval1, fval2, fval3, fval4, fval5, fval6, fval7, fval8, fval9, fval10, f_alarm_s, divfan7, vent_max_stufe, vent_min_stufe)); 
      }

    }



  });

  server.on("/radon.html", HTTP_GET, [](AsyncWebServerRequest *request){
      //Serial.println(request->url());
      #ifdef WEB_DEBUG
      //Serial.println(request->url());
      //Serial.print("Received request from client with IP: ");
      //Serial.println(request->client()->remoteIP());
      #endif

      select_reboot = 1;
      p_inputsavebit = "savebit";
      p_inputsavebit_txt = "";   

      p_getapmodus = "";
      p_getreboot = "";
      p_getscan = "";
      p_getradonaktual = "";  
      p_getsearch = "";
      p_getdelete = "";
      pauseWebpage = 5;


      request->send(200, "text/html", SendHTMLd(val1, val2, val3, val4)); 




  });
 

 
  server.on("/jquery.js", HTTP_GET, [](AsyncWebServerRequest *request){
    #ifdef WEB_DEBUG
    Serial.println(request->url());
    #endif
    pauseWebpage = 5;
    request->send(SPIFFS, "/jquery.js", "text/javascript");
  });

    server.on("/favicon.ico", HTTP_GET, [](AsyncWebServerRequest *request){
    #ifdef WEB_DEBUG  
    Serial.println(request->url());
    #endif
    pauseWebpage = 5;
    //request->send(SPIFFS, "/chart.js", "text/javascript");
    request->send(SPIFFS, "/favicon-32x32.png", "image/png");
  });

    server.on("/data.js", HTTP_GET, [](AsyncWebServerRequest *request){
    #ifdef WEB_DEBUG  
    Serial.println(request->url());
    #endif
    pauseWebpage = 5;
    request->send(SPIFFS, "/data.js", "text/javascript");
  });

  /*
    server.on("/chart.min.js", HTTP_GET, [](AsyncWebServerRequest *request){
    Serial.println(request->url());
    pauseWebpage = 5;
    request->send(SPIFFS, "/chart.min.js", "text/javascript");
  });
  */

  server.on("/lightman.js", HTTP_GET, [](AsyncWebServerRequest *request){
    Serial.println(request->url());
    pauseWebpage = 5;
    request->send(SPIFFS, "/lightman.js", "text/javascript");
  });

  server.on("/styles.css", HTTP_GET, [](AsyncWebServerRequest *request){
    #ifdef WEB_DEBUG
    Serial.println(request->url());
    #endif
    pauseWebpage = 5;
    if(chart_page <= 2|| chart_page == 6){
      request->send(SPIFFS, "/styles.css", "text/css");
      //request->send(SPIFFS, "/styles.css", "text");
    }
  });
  
 
  server.on("/ipaddress-validation.js", HTTP_GET, [](AsyncWebServerRequest *request){
    #ifdef WEB_DEBUG
    Serial.println(request->url());
    #endif
    request->send(SPIFFS, "/ipaddress-validation.js", "text/javascript");
  });
 
  server.on("/line.js", HTTP_GET, [](AsyncWebServerRequest *request){
    #ifdef WEB_DEBUG
    Serial.println(request->url());
    #endif
    pauseWebpage = 5;
    request->send(SPIFFS, "/line.js", "text/javascript");
  });
 
  server.on("/jsthree.js", HTTP_GET, [](AsyncWebServerRequest *request){
    #ifdef WEB_DEBUG
    Serial.println(request->url());
    #endif
    pauseWebpage = 5;
    request->send(SPIFFS, "/jsthree.js", "text/javascript");
    //request->send(SPIFFS, "/jsthree.js", "text");
  });
 
  server.on("/gloader.js", HTTP_GET, [](AsyncWebServerRequest *request){
    #ifdef WEB_DEBUG
    Serial.println(request->url());
    #endif
    pauseWebpage = 5;
    request->send(SPIFFS, "/gloader.js", "text/javascript");

  });



  server.on("/zonehead.js", HTTP_GET, [](AsyncWebServerRequest *request){
    //Serial.println(request->url());
    pauseWebpage = 5;
    request->send(SPIFFS, "/zonehead.js", "text/javascript");
    #ifdef WEB_DEBUG
    Serial.println("/zonehead.js");
    #endif
    if(mb_afrg_Radon == 1){  // Abfrage wenn aktion gestartet
      ms6 = millis();
      mb_afrg_Radon = 2; 
    }
  });  
   
  server.on("/newurl.js", HTTP_GET, [](AsyncWebServerRequest *request){
    #ifdef WEB_DEBUG
    Serial.println(request->url());
    #endif
    pauseWebpage = 5;
    request->send(SPIFFS, "/newurl.js", "text/javascript");
  });  
   
   /*
  server.on("/chartlbl.js", HTTP_GET, [](AsyncWebServerRequest *request){
    Serial.println(request->url());
    pauseWebpage = 5;
    request->send(SPIFFS, "/chartlbl.js", "text/javascript");
    Serial.println("/chartlbl.js ende");
  });  
*/



      server.on("/chartdiv.js", HTTP_GET, [](AsyncWebServerRequest *request){
        // Serial.println("/chartdiv.js " + String(chart_page));
         pauseWebpage = 5;
        //request->send(SPIFFS, "/chartdiv.js", "text/javascript");

            if(chart_page == 1 || chart_page == 6){     
                             
                   stringdata = "data : [" + String(charInts[0]) + "," + String(charInts[1]) + "," + String(charInts[2]) + "," + String(charInts[3]) + "," + String(charInts[4]) + "," + String(charInts[5]) + "," + String(charInts[6]) + "," + String(charInts[7]) + "," + String(charInts[8]) + "," + String(charInts[9]) + "," + String(charInts[10]) + "," + String(charInts[11]) + "," + String(charInts[12]) + "," + String(charInts[13]) + "," + String(charInts[14]) + "," + String(charInts[15]) + "," + String(charInts[16]) + "," + String(charInts[17]) + "," + String(charInts[18]) + "," + String(charInts[19]) + "," + String(charInts[20]) + "," + String(charInts[21]) + "," + String(charInts[22]) + "," + String(charInts[23]) + "," + String(charInts[24]) + "," + String(charInts[25]) + "," + String(charInts[26]) + "," + String(charInts[27]) + "," + String(charInts[28]) + "," + String(charInts[29]) + "," + String(charInts[30]) + "," + String(charInts[31]) + "," + String(charInts[32]) + "," + String(charInts[33]) + "," + String(charInts[34]) + "," + String(charInts[35]) + "," + String(charInts[36]) + "," + String(charInts[37]) + "," + String(charInts[38]) + "," + String(charInts[39]) + "," + String(charInts[40]) + "," + String(charInts[41]) + "," + String(charInts[42]) + ",],";
                             
                                  request->send(200, "text/javascript", "var ctx = document.getElementById('myChart').getContext('2d');var myChart = new Chart(ctx, {type:'line',data: {" 
                                        + stringtime + 
                                        "datasets: [ { " 
                                        + stringdata +
                                        "lineTension: 0.3, linecapBezierPoints: 1.9,label: \"Live Radon Bq/m3\",borderColor: \"rgb(62,149,205)\",backgroundColor: \"rgb(62,149,205,0.1)\",borderWidth:2,pointStyle:'rectRot',tension: 0.1,pointRadius:2,}]},});"
                                       
                                        "var ctx2 = document.getElementById('myChart2').getContext('2d');var myChart2 = new Chart(ctx2, {type:'bar',data: {" 
                                        + stringtime2 + 
                                        "datasets: [ { " 
                                        + stringdata2 +
                                        "lineTension: 0.5,linecapBezierPoints: 2.9,label: \"Day Radon Bq/m3\",borderColor: [\""+ rgbchart01 +"\",\""+ rgbchart02 +"\",\""+ rgbchart03 +"\",\""+ rgbchart04 +"\",\""+ rgbchart05 +"\",\""+ rgbchart06 +"\",\""+ rgbchart07 +"\",\""+ rgbchart08 +"\",\""+ rgbchart09 +"\",\""+ rgbchart10 +"\",\""+ rgbchart11 +"\",\""+ rgbchart12 +"\",\""+ rgbchart13 +"\",\""+ rgbchart14 +"\"],backgroundColor: \"rgb(62,149,205,0.4)\",borderWidth:2,}]},});"
                                                                               
                                        );
            }
               //Serial.println("/chartdiv.js ende ");
      });  

      server.on("/chartdiv3.js", HTTP_GET, [](AsyncWebServerRequest *request){
        // Serial.println("/chartdiv3.js " + String(chart_page));
         pauseWebpage = 5;
        //request->send(SPIFFS, "/chartdiv.js", "text/javascript");
          //#ifdef CO2_on
            if(chart_page == 2){ 
                     stringdata = "data : [" + String(charInts3[0]) + "," + String(charInts3[1]) + "," + String(charInts3[2]) + "," + String(charInts3[3]) + "," + String(charInts3[4]) + "," + String(charInts3[5]) + "," + String(charInts3[6]) + "," + String(charInts3[7]) + "," + String(charInts3[8]) + "," + String(charInts3[9]) + "," + String(charInts3[10]) + "," + String(charInts3[11]) + "," + String(charInts3[12]) + "," + String(charInts3[13]) + "," + String(charInts3[14]) + "," + String(charInts3[15]) + "," + String(charInts3[16]) + "," + String(charInts3[17]) + "," + String(charInts3[18]) + "," + String(charInts3[19]) + "," + String(charInts3[20]) + "," + String(charInts3[21]) + "," + String(charInts3[22]) + "," + String(charInts3[23]) + "," + String(charInts3[24]) + "," + String(charInts3[25]) + "," + String(charInts3[26]) + "," + String(charInts3[27]) + "," + String(charInts3[28]) + "," + String(charInts3[29]) + "," + String(charInts3[30]) + "," + String(charInts3[31]) + "," + String(charInts3[32]) + "," + String(charInts3[33]) + "," + String(charInts3[34]) + "," + String(charInts3[35]) + "," + String(charInts3[36]) + "," + String(charInts3[37]) + "," + String(charInts3[38]) + "," + String(charInts3[39]) + "," + String(charInts3[40]) + "," + String(charInts3[41]) + "," + String(charInts3[42]) + ",],";
    
                                  request->send(200, "text/javascript", "var ctx3 = document.getElementById('myChart3').getContext('2d');var myChart = new Chart(ctx3, {type:'line',data: {" 

                                         + stringtime + 
                                        "datasets: [ { " 
                                        + stringdata +
                                        "lineTension: 0.3, linecapBezierPoints: 1.9,label: \"CO2 ppm\",borderColor: \"rgb(162,149,25)\",backgroundColor: \"rgb(162,149,25,0.1)\",borderWidth:2,pointStyle:'rectRot',tension: 0.1,pointRadius:2,}]},"
                                        

                                       "options: {interaction: {intersect: false,mode: 'index',},"
                                       "plugins: {title: {display: true,text: (ctx3) => 'Tooltip position mode: ' + ctx3.chart.options.plugins.tooltip.position,},}}"

                                        "});"
                                       
                                        );
            }
          //#endif 
              // Serial.println("/chartdiv3.js ende ");
      });  

      server.on("/chartdiv4.js", HTTP_GET, [](AsyncWebServerRequest *request){
        // Serial.println("/chartdiv4.js " + String(chart_page));
         pauseWebpage = 5;
        //request->send(SPIFFS, "/chartdiv.js", "text/javascript");
          //#ifdef CO2_on
            if(chart_page == 2 || chart_page == 6){ 
                     stringdata = "data : [" + String(charInts4[0]) + "," + String(charInts4[1]) + "," + String(charInts4[2]) + "," + String(charInts4[3]) + "," + String(charInts4[4]) + "," + String(charInts4[5]) + "," + String(charInts4[6]) + "," + String(charInts4[7]) + "," + String(charInts4[8]) + "," + String(charInts4[9]) + "," + String(charInts4[10]) + "," + String(charInts4[11]) + "," + String(charInts4[12]) + "," + String(charInts4[13]) + "," + String(charInts4[14]) + "," + String(charInts4[15]) + "," + String(charInts4[16]) + "," + String(charInts4[17]) + "," + String(charInts4[18]) + "," + String(charInts4[19]) + "," + String(charInts4[20]) + "," + String(charInts4[21]) + "," + String(charInts4[22]) + "," + String(charInts4[23]) + "," + String(charInts4[24]) + "," + String(charInts4[25]) + "," + String(charInts4[26]) + "," + String(charInts4[27]) + "," + String(charInts4[28]) + "," + String(charInts4[29]) + "," + String(charInts4[30]) + "," + String(charInts4[31]) + "," + String(charInts4[32]) + "," + String(charInts4[33]) + "," + String(charInts4[34]) + "," + String(charInts4[35]) + "," + String(charInts4[36]) + "," + String(charInts4[37]) + "," + String(charInts4[38]) + "," + String(charInts4[39]) + "," + String(charInts4[40]) + "," + String(charInts4[41]) + "," + String(charInts4[42]) + ",],";
    
                                  request->send(200, "text/javascript", "var ctx4 = document.getElementById('myChart4').getContext('2d');var myChart = new Chart(ctx4, {type:'line',data: {" 

                                         + stringtime + 
                                        "datasets: [ { " 
                                        + stringdata +
                                        "lineTension: 0.3, linecapBezierPoints: 1.9,label: \"TVAC ppb\",borderColor: \"rgb(112,149,85)\",backgroundColor: \"rgb(112,49,85,0.1)\",borderWidth:2,pointStyle:'rectRot',tension: 0.1,pointRadius:2,}]},"
                                        
                                        "options: {tooltips: {callbacks: {labelColor(tooltipItem, chart) {return {borderColor: 'rgb(255, 0, 0)',backgroundColor: 'rgb(255, 0, 0)'};},"
                                        " labelTextColor(tooltipItem, chart) {return 'lightgray';}}},"
                                        " scales: {yAxes: [{ticks: {beginAtZero: true}}]}}"    
                                        
                                        "});"
                                       
                                        );
            }
          //#endif 
            //   Serial.println("/chartdiv4.js ende ");
      });  


    server.on("/chartdiv5.js", HTTP_GET, [](AsyncWebServerRequest *request){
        // Serial.println("/chartdiv5.js " + String(chart_page));
         pauseWebpage = 5;
        //request->send(SPIFFS, "/chartdiv.js", "text/javascript");
          //#ifdef luefter_on
            if(chart_page == 6){ 
                     stringdata = "data : [" + String(charInts5[0]) + "," + String(charInts5[1]) + "," + String(charInts5[2]) + "," + String(charInts5[3]) + "," + String(charInts5[4]) + "," + String(charInts5[5]) + "," + String(charInts5[6]) + "," + String(charInts5[7]) + "," + String(charInts5[8]) + "," + String(charInts5[9]) + "," + String(charInts5[10]) + "," + String(charInts5[11]) + "," + String(charInts5[12]) + "," + String(charInts5[13]) + "," + String(charInts5[14]) + "," + String(charInts5[15]) + "," + String(charInts5[16]) + "," + String(charInts5[17]) + "," + String(charInts5[18]) + "," + String(charInts5[19]) + "," + String(charInts5[20]) + "," + String(charInts5[21]) + "," + String(charInts5[22]) + "," + String(charInts5[23]) + "," + String(charInts5[24]) + "," + String(charInts5[25]) + "," + String(charInts5[26]) + "," + String(charInts5[27]) + "," + String(charInts5[28]) + "," + String(charInts5[29]) + "," + String(charInts5[30]) + "," + String(charInts5[31]) + "," + String(charInts5[32]) + "," + String(charInts5[33]) + "," + String(charInts5[34]) + "," + String(charInts5[35]) + "," + String(charInts5[36]) + "," + String(charInts5[37]) + "," + String(charInts5[38]) + "," + String(charInts5[39]) + "," + String(charInts5[40]) + "," + String(charInts5[41]) + "," + String(charInts5[42]) + ",],";
    
                                  request->send(200, "text/javascript", "var ctx5 = document.getElementById('myChart5').getContext('2d');var myChart = new Chart(ctx5, {type:'line',data: {" 

                                         + stringtime + 
                                        "datasets: [ { " 
                                        + stringdata +
                                        "lineTension: 0.3, linecapBezierPoints: 1.9,label: \"Fan %\",borderColor: \"rgb(162,149,25)\",backgroundColor: \"rgb(162,149,25,0.1)\",borderWidth:2,pointStyle:'rectRot',tension: 0.1,pointRadius:2,}]},"
                                        

                                       "options: {interaction: {intersect: false,mode: 'index',},"
                                       "plugins: {title: {display: true,text: (ctx5) => 'Tooltip position mode: ' + ctx3.chart.options.plugins.tooltip.position,},}}"

                                        "});"
                                       
                                        );
            }
          //#endif 
              // Serial.println("/chartdiv5.js ende ");
      });  

    server.on("/chartdiv6.js", HTTP_GET, [](AsyncWebServerRequest *request){
        // Serial.println("/chartdiv6.js " + String(chart_page));
         pauseWebpage = 5;
        //request->send(SPIFFS, "/chartdiv6.js", "text/javascript");
          //#ifdef luefter_on
            if(chart_page == 6){ 
                     stringdata = "data : [" + String(charInts[0]) + "," + String(charInts[1]) + "," + String(charInts[2]) + "," + String(charInts[3]) + "," + String(charInts[4]) + "," + String(charInts[5]) + "," + String(charInts[6]) + "," + String(charInts[7]) + "," + String(charInts[8]) + "," + String(charInts[9]) + "," + String(charInts[10]) + "," + String(charInts[11]) + "," + String(charInts[12]) + "," + String(charInts[13]) + "," + String(charInts[14]) + "," + String(charInts[15]) + "," + String(charInts[16]) + "," + String(charInts[17]) + "," + String(charInts[18]) + "," + String(charInts[19]) + "," + String(charInts[20]) + "," + String(charInts[21]) + "," + String(charInts[22]) + "," + String(charInts[23]) + "," + String(charInts[24]) + "," + String(charInts[25]) + "," + String(charInts[26]) + "," + String(charInts[27]) + "," + String(charInts[28]) + "," + String(charInts[29]) + "," + String(charInts[30]) + "," + String(charInts[31]) + "," + String(charInts[32]) + "," + String(charInts[33]) + "," + String(charInts[34]) + "," + String(charInts[35]) + "," + String(charInts[36]) + "," + String(charInts[37]) + "," + String(charInts[38]) + "," + String(charInts[39]) + "," + String(charInts[40]) + "," + String(charInts[41]) + "," + String(charInts[42]) + ",],";
    
                                  request->send(200, "text/javascript", "var ctx5 = document.getElementById('myChart6').getContext('2d');var myChart = new Chart(ctx5, {type:'line',data: {" 

                                         + stringtime + 
                                        "datasets: [ { " 
                                        + stringdata +
                                        "lineTension: 0.3, linecapBezierPoints: 1.9,label: \"Live Radon Bq/m3\",borderColor: \"rgb(62,149,205)\",backgroundColor: \"rgb(62,149,205,0.1)\",borderWidth:2,pointStyle:'rectRot',tension: 0.1,pointRadius:2,}]}," 
                                        

                                       "options: {interaction: {intersect: false,mode: 'index',},"
                                       "plugins: {title: {display: true,text: (ctx5) => 'Tooltip position mode: ' + ctx3.chart.options.plugins.tooltip.position,},}}"

                                        "});"
                                       
                                        );
            }
          //#endif 
              // Serial.println("/chartdiv6.js ende ");
      });       



  server.on("/get", HTTP_GET, [](AsyncWebServerRequest * request) {
      #ifdef WEB_DEBUG
      //Serial.println(request->url());
      //Serial.print("Received request from client with IP: ");
      //Serial.println(request->client()->remoteIP());
      #endif
    pauseWebpage = 5;
    //request->send(200, "text/plain", readRoom2temp().c_str());

    int paramsNr = request->params();
    //Serial.println(paramsNr);
 
    for(int i=0;i<paramsNr;i++){
        AsyncWebParameter* p = request->getParam(i);
        //AsyncWebParameter* p = request->getParam(0);
        #ifdef WEB_DEBUG
        Serial.println("----------------------------------");
        Serial.println("Logout Timer: " + String(Web_logout_time) + " Minuten");
       // Serial.print("Param name: ");
       // Serial.println(p->name());
        //Serial.print("Param value: ");
        #endif
        


        //-------------------------------------------------------
        if(p->name() == "inputchart"){

          if (p->value() == "0"){
            chart_page = 0;
          }else{
            chart_page = 0; //erst löschen
            if (p->value() == "1"){
            chart_page = 1;   //Chart  oder Anzeigen
            }
            if (p->value() == "2"){
            chart_page = 2;   //ChaRT CO2  Anzeigen
            }
            if (p->value() == "3"){
            chart_page = 3;   //live  oder Anzeigen
            } 
            if (p->value() == "4"){
            gMESHUpdateFlag = true;
            gMESHUpdateFlag2 = true;
            gMESHUpdateFlag3 = true;
            gMESHUpdateFlag4 = true;
            gMESHUpdateFlag5 = true;
            chart_page = 4;   //live  oder Anzeigen
            } 
            if (p->value() == "5"){
            chart_page = 5;   //fan
            } 
            if (p->value() == "6"){
            chart_page = 6;   //Chart  fan
            } 
          }

        }
        //-------------------------------------------------

        //-------------------------------------------------------
        if(p->name() == "loginoutt"){

          if (chart_page == 0){
           if(web_write_ok == 0){  
              zone_view ="display: block; overflow: hidden; height: 105px; padding-top: 0px; margin-top: 0px; padding-bottom: 0px; margin-bottom: 0px;'";
              //zone_view ="";
           }else{
              //zone_view ="<div class='zoneblock' style='display: block; overflow: hidden; height: 105px; padding-top: 0px; margin-top: 0px; padding-bottom: 0px; margin-bottom: 0px;'>";  
              zone_view ="display: block; overflow: hidden; height: 105px; padding-top: 0px; margin-top: 0px; padding-bottom: 0px; margin-bottom: 0px;'";
              //zone_view ="";
           }
          }
        }
        //-------------------------------------------------





       //---------------------------------------------------- 
        if(p->name() == "inputpasswort"){
            p_inputpasswort = p->value();
            if(p_inputpasswort == p_inputpasswort_vorgabe || p_inputpasswort == p_inputpasswort_admin){  
                if(web_write_ok == 1){ 
                    //schon pw eingegeben
                    Web_logout_time = 11;
                    p_inputsavebit = "savebit";
                    p_inputsavebit_txt = "";
                }else{ 
                    //pw ok       
                    web_write_ok = 1;
                   if(p->name() != "inputchart"){
                      Web_logout_time = 11;
                      web_write_green_red = 1;
                      p_inputsavebit = "savebit_green";
                      p_inputsavebit_txt = "Passwort OK";
                      
                   }

                }
            }else{
              //pw  falsch  
                 web_write_ok = 0; 
              if(p->name() != "inputchart"){
                web_write_green_red = 2;  
                p_inputsavebit = "savebit_red";
                p_inputsavebit_txt = "Wrong Passwort";
              }
            }  
        }
        //-------------------------------------------------------

        //-------------------------------------------------------
        // ab hier nur wenn PW richtig eingeben
        //-------------------------------------------------------

        #ifdef WEB_DEBUG
        Serial.println("web_write_ok: " + String(web_write_ok));
        Serial.println("wp->name()  : " + p->name());
        Serial.println("wp->value() : " + p->value());
        #endif
                    #ifdef NVS_DEBUG
                    Serial.println("---- Bit  GRAPH del. = " + String(gGraphDeleteFlag));
                    #endif
            //-----------------------------------------------
              if(p->name() == "getgauge"){
  
                    p_getgetgauge = p->value();
                   
                    if (p_getgetgauge == "0"){
                      gauge_page = false;
                    }else{
                      gauge_page = true;
                    }

                    // gauge_page = !gauge_page; // switch the display

              }
            //-----------------------------------------------

            //-----------------------------------------------
              tG_x_page = 0;
              if(p->name() == "TG1"){
  
                    p_getTG1 = p->value();

                      tG_x_page = 1;
                      Serial.println("Taste 1: ");
                      
                      msg_TG[0] = 0xFE;
                      msg_TG[1] = 0x01;
                      msg_TG[2] = 0x01;
                      Serial1.write(msg_TG, 3);
                      delay(300);
                      Serial1.write(msg_TG, 3);
                      //Serial.println("Taste 1: ");
              }
              if(p->name() == "TG2"){
  
                    p_getTG2 = p->value();

                      tG_x_page = 2;
                      Serial.println("Taste 2: ");
                                            
                      msg_TG[0] = 0xFE;
                      msg_TG[1] = 0x02;
                      msg_TG[2] = 0x02;
                      Serial1.write(msg_TG, 3);
                      delay(300);
                      Serial1.write(msg_TG, 3);
                      //Serial.println("Taste 2: ");
              }
              if(p->name() == "TG3"){
  
                    p_getTG3 = p->value();

                      tG_x_page = 3;
                      Serial.println("Taste 3: ");
                                            
                      msg_TG[0] = 0xFE;
                      msg_TG[1] = 0x04;
                      msg_TG[2] = 0x04;
                      Serial1.write(msg_TG, 3);
                      delay(300);
                      Serial1.write(msg_TG, 3);
              }
              if(p->name() == "TG4"){
  
                    p_getTG4 = p->value();

                      tG_x_page = 4;
                      Serial.println("Taste 4: ");
                                            
                      msg_TG[0] = 0xFE;
                      msg_TG[1] = 0x08;
                      msg_TG[2] = 0x08;
                      Serial1.write(msg_TG, 3);
                      delay(300);
                      Serial1.write(msg_TG, 3);
              }
            //-----------------------------------------------


        if(p->name() != "inputpasswort"){
       
        if(web_write_ok == 1){   
            #ifdef WEB_DEBUG
            Serial.println("schreiben freigegeben........... ");
            #endif
            if(p->name() == "inputstaticip"){
                //if(p_inputstaticip == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputstaticip = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Reboot in 10 sec.";
                    splitAdress = p_inputstaticip;
                    //WriteipValuechange();
                    Web_logout_time = 11;
                    abfrage_eingabe = 1;
               // } 
            //------------------------------------------------
            }
            else if(p->name() == "inputsubnetmask"){
               // if(p_inputsubnetmask == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputsubnetmask = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Reboot in 10 sec.";
                    splitAdress = p_inputsubnetmask;
                   // WriteipValuechange();
                    Web_logout_time = 11;
                    abfrage_eingabe = 1;
                //}
            //-----------------------------------------------
            }
            else if(p->name() == "inputgateway"){
               // if(p_inputgateway == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputgateway = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Reboot in 10 sec.";
                    splitAdress = p_inputgateway;
                    //WriteipValuechange();
                    Web_logout_time = 11;
                    abfrage_eingabe = 1;
               // }
            //-----------------------------------------------
            }
            else if(p->name() == "inputdnss"){ //NTP
               // if(p_inputntp == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputntp = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Reboot in 10 sec.";
                    splitAdress = p_inputntp;
                   // WriteipValuechange();
                    Web_logout_time = 11;
               // }
            //-----------------------------------------------
            }
            else if(p->name() == "inputname"){ //Name
               //Serial.println("-->value() : " + p->value());
               //if(p_inputname == p->value()){ 
                    //wert gleich

                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputname = p->value();
                    p_inputsavebit = "savebit_green";
                   // p_inputsavebit_txt = "DNS Saved, please reboot";
                    p_inputsavebit_txt = "Reboot in 10 sec.";
                    p_inputname.toCharArray(p_inputnamec, 10); 
                    WiFiManager wifiManager;
                    wifiManager.setHostname(p_inputnamec);
                    //WriteipValuechange();
                    WriteipValuechange();
                    select_reboot = 2;
                    Web_logout_time = 11;
               // }

            //-----------------------------------------------
            }
            else if(p->name() == "inputtcpport"){
               // if(p_inputtcpport == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputtcpport = p->value();
                    p_inputsavebit = "savebit_green";
                    //p_inputsavebit_txt = "TCP Port Saved";
                    p_inputsavebit_txt = "Reboot in 10 sec.";
                    Web_logout_time = 11;
                   // WriteSensorValue();
                    select_reboot = 2;
               // }
            //-----------------------------------------------
            }
            else if(p->name() == "inputwebport"){
               // if(p_inputwebport == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputwebport = p->value();
                    p_inputsavebit = "savebit_green";
                    //p_inputsavebit_txt = "Webport Saved";
                    p_inputsavebit_txt = "Reboot in 10 sec.";
                    select_reboot = 2;
                    Web_logout_time = 11;
                    WriteWebValue();
               // }
            //-----------------------------------------------
            }
            else if(p->name() == "inputbaudrate"){
               // if(p_inputbaudrate == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{   
                    if(p_inputpasswort == p_inputpasswort_admin){  
                      p_inputbaudrate = p->value();
                      p_inputsavebit = "savebit_green";
                      p_inputsavebit_txt = "RS485 Saved";
                      Web_logout_time = 11;
                     // WriteSensorValue();
                    }else{
                      web_write_green_red = 2;  
                      p_inputsavebit = "savebit_red";
                      p_inputsavebit_txt = "No Admin";
                    }

               // }
            //-----------------------------------------------
            }
            else if(p->name() == "inputdatabits"){
                //if(p_inputdatabits == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{  
                  if(p_inputpasswort == p_inputpasswort_admin){    
                      p_inputdatabits = p->value();
                      p_inputsavebit = "savebit_green";
                      p_inputsavebit_txt = "RS485 Saved";
                      Web_logout_time = 11;
                     // WriteSensorValue();
                  }else{
                      web_write_green_red = 2;  
                      p_inputsavebit = "savebit_red";
                      p_inputsavebit_txt = "No Admin";
                  }
                //}
            //-----------------------------------------------
            }
            else if(p->name() == "inputparity"){
                //if(p_inputparity == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                  if(p_inputpasswort == p_inputpasswort_admin){    
                      p_inputparity = p->value();
                      p_inputsavebit = "savebit_green";
                      p_inputsavebit_txt = "RS485 Saved";
                      Web_logout_time = 11;
                     // WriteSensorValue();
                  }else{
                      web_write_green_red = 2;  
                      p_inputsavebit = "savebit_red";
                      p_inputsavebit_txt = "No Admin";
                  }
               //}
            //-----------------------------------------------
            }
            else if(p->name() == "inputstopbit"){
                //if(p_inputstopbit == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{  
                  if(p_inputpasswort == p_inputpasswort_admin){    
                      p_inputstopbit = p->value();
                      p_inputsavebit = "savebit_green";
                      p_inputsavebit_txt = "RS485 Saved";
                      Web_logout_time = 11;
                      //WriteSensorValue();
                  }else{
                      web_write_green_red = 2;  
                      p_inputsavebit = "savebit_red";
                      p_inputsavebit_txt = "No Admin";
                  }
                //}
            //-----------------------------------------------
            }
            else if(p->name() == "inputrestimeout"){
               // if(p_inputrestimeout == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   //p_inputsavebit_txt = "";
                //}else{    
                    p_inputrestimeout = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "RS485 Saved";
                    Web_logout_time = 11;
                    WriteSensorValue();
                //}
        
        
            }
            else if(p->name() == "inputpwchange"){
                if(p_inputpwchange == p->value()){ 
                    //wert gleich
                    p_inputsavebit = "savebit";
                    p_inputsavebit_txt = "";
                }else{    
                    p_inputpwchange = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "New PW saved";
                    Web_logout_time = 11;
                    WritePW();
                }
        
        
          //-----------------------------------------------
               }
            if(p->name() == "inputip01"){
               // if(p_inputip01 == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputip01 = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                    mesh_01_val = " class='Stil1' ";
                    if (p_inputip01 != "000.000.000.000"){
                     mesh_werteaktual = "<span class='Stil5'>Mesh aktiviert</div>"; 
                     mesh_aktiv = " class='Stil1a' ";
                    }else{
                     mesh_werteaktual = "Mesh deaktiviert";  
                     mesh_aktiv = " class='Stil1b' ";  
                    }
                    
                    ip_write_sel = 1;
                  //  Writeip15Value();
                    Web_logout_time = 11;

               // } 
          //-----------------------------------------------
               }
            if(p->name() == "inputip02"){
               // if(p_inputip02 == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputip02 = p->value();
                    mesh_02_val = " class='Stil1' ";
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                    ip_write_sel = 2;
                    //Writeip15Value();
                    Web_logout_time = 11;

                //} 
          //-----------------------------------------------
               }
            if(p->name() == "inputip03"){
                //if(p_inputip03 == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
               // }else{    
                    p_inputip03 = p->value();
                    mesh_03_val = " class='Stil1' ";
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                    ip_write_sel = 3;
                    //Writeip15Value();
                    Web_logout_time = 11;

                //} 
          //-----------------------------------------------
               }
            if(p->name() == "inputip04"){
               // if(p_inputip04 == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputip04 = p->value();
                    mesh_04_val = " class='Stil1' ";
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                    ip_write_sel = 4;
                    //Writeip15Value();
                    Web_logout_time = 11;

                //} 
          //-----------------------------------------------
               }
            if(p->name() == "inputip05"){
               // if(p_inputip05 == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
               // }else{    
                    p_inputip05 = p->value();
                    mesh_05_val = " class='Stil1' ";
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                    ip_write_sel = 5;
                   // Writeip15Value();
                    Web_logout_time = 11;

               // }                 
            //-----------------------------------------------
                }
            if(p->name() == "room01"){
               // if(p_room01 == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_room01 = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                    //Writeip15Value();
                    Web_logout_time = 11;

               // }                 
            //-----------------------------------------------
                }
            if(p->name() == "room02"){
               // if(p_room02 == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
               // }else{    
                    p_room02 = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                   // Writeip15Value();
                    Web_logout_time = 11;

               // }                 
            //-----------------------------------------------                     
                 }
            if(p->name() == "room03"){
               // if(p_room03 == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
               // }else{    
                    p_room03 = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                   // Writeip15Value();
                    Web_logout_time = 11;

                //}                 
            //-----------------------------------------------          
                }
            if(p->name() == "room04"){
               // if(p_room04 == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_room04 = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                    //Writeip15Value();
                    Web_logout_time = 11;

               // }                 
            //-----------------------------------------------  
                }
            if(p->name() == "room05"){
               // if(p_room05 == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_room05 = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Mesh Saved";
                    Writeip15Value();
                    Web_logout_time = 11;

                //}                 
            //-----------------------------------------------           
           
                }
            else if(p->name() == "inputcloudserver"){
               // if(p_inputcloudserver == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputcloudserver = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Cloud Saved";
                    Web_logout_time = 11;
                   // WriteCloudValue();
                //}
            //-----------------------------------------------
                }
            else if(p->name() == "inputclouddevice"){
              //  if(p_inputclouddevice == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputclouddevice = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Cloud Saved";
                    Web_logout_time = 11;
                   // WriteCloudValue();
                //} 
            //-----------------------------------------------
                }
            else if(p->name() == "inputclouduser"){
               // if(p_inputclouduser == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
               // }else{    
                    p_inputclouduser = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Cloud Saved";
                    Web_logout_time = 11;
                   // WriteCloudValue();
               // } 

            //-----------------------------------------------
                }
            else if(p->name() == "inputcloudpage"){
               // if(p_inputcloudpage == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
               // }else{    
                    p_inputcloudpage = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Cloud Saved";
                    Web_logout_time = 11;
                   // WriteCloudValue();
               // }
            //-----------------------------------------------
              }
            else if(p->name() == "inputcloudonoff"){
               // if(p_cloudonoff == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_cloudonoff = p->value();
                    if (p->value() == "on") cloudAktiveConfig = true;
                    if (p->value() == "off") cloudAktiveConfig = false;
                    if(cloudAktiveConfig == true){
                       cloud_aktiv = " class='Stil1a' ";
                       cloud_werteaktual = "<span class='Stil5'>CLOUD aktiviert</div>";
                    }
                    if(cloudAktiveConfig == false){
                       cloud_aktiv = " class='Stil1b' ";
                       cloud_werteaktual = "CLOUD deaktiviert";
                    }
                    
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Cloud " + p->value() + " Saved";
                    Web_logout_time = 11;
                    //WriteCloudValue();
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "inputcloudkey"){
                //if(p_inputcloudkey == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputcloudkey = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Cloud Saved";
                    Web_logout_time = 11;
                    WriteCloudValue();
               //}
      
 
            //-----------------------------------------------
              }
            else if(p->name() == "inputledonoff"){
                //if(p_ledonoff == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                      #ifdef WEB_DEBUG
                        Serial.println("inputledonoff ändern... ");
                      #endif

                    p_ledonoff = p->value();
                    if (p->value() == "on") ledAktiveConfig = true;
                    if (p->value() == "off") ledAktiveConfig = false;
                    if(ledAktiveConfig == true){
                       lEd_aktiv = " class='Stil1a' ";
                       led_werteaktual = "<span class='Stil5'>LED aktiviert</div>";

                    }
                    if(ledAktiveConfig == false){
                       lEd_aktiv = " class='Stil1b' ";
                       led_werteaktual = "LED deaktiviert";
                    }
                    
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "LED " + p->value() + " Saved";
                    Web_logout_time = 11;
                    //WriteLedValue();
                    msLed = millis() - 9 * 1000L;
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "inputledred"){
                //if(p_inputledred == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputledred = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "LED Saved";
                    Web_logout_time = 11;
                   // WriteLedValue();
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "inputledorange"){
                //if(p_inputledorange == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputledorange = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "LED Saved";
                    Web_logout_time = 11;
                    //WriteLedValue();
                //}
            //-----------------------------------------------
                }
            else if(p->name() == "inputledgreen"){
               // if(p_inputledgreen == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputledgreen = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "LED Saved";
                    Web_logout_time = 11;
                   // WriteLedValue();
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "inputledfunk"){
               // if(p_inputledfunk == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputledfunk = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "LED Saved";
                    Web_logout_time = 11;
                    //WriteLedValue();
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "inputledgamma"){
                //if(p_inputledgamma == p->value()){ 
                    //wert gleich
                     // #ifdef WEB_DEBUG
                        //Serial.println("inputledgamma gleich ");
                     // #endif
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{  
                      #ifdef WEB_DEBUG
                        Serial.println("inputledgamma ändern... ");
                      #endif
                    p_inputledgamma = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "LED Saved";
                    Web_logout_time = 11;
                    WriteLedValue();
                    msLed = millis() - 9 * 1000L;
                //}

 

               //     


           //-----------------------------------------------
                }
            else if(p->name() == "setting01"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett01t = 0;
                    p_settxx = p->value(); 
                    p_sett01t = p_settxx.toInt();        // s_div_c01    div_c01     
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                    
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting02"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett02t = 0;
                    p_settxx = p->value(); 
                    p_sett02t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting03"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett03t = 0;
                    p_settxx = p->value(); 
                    p_sett03t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;  
                    bit_settx = true;                  
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting04"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett04t = 0;
                    p_settxx = p->value(); 
                    p_sett04t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting05"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett05t = 0;
                    p_settxx = p->value(); 
                    p_sett05t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting06"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett06t = 0;
                    p_settxx = p->value(); 
                    p_sett06t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting07"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett07t = 0;
                    p_settxx = p->value(); 
                    p_sett07t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting08"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett08t = 0;
                    p_settxx = p->value(); 
                    p_sett08t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting09"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett09t = 0;
                    p_settxx = p->value(); 
                    p_sett09t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting10"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett10t = 0;
                    p_settxx = p->value(); 
                    p_sett10t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                  
            //-----------------------------------------------
                }
            else if(p->name() == "setting11"){
                      #ifdef WEB_DEBUG
                        Serial.println("setting ändern... ");
                      #endif
                    p_sett11t = 0;
                    p_settxx = p->value(); 
                    p_sett11t = p_settxx.toInt();                 
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "please reload Page";
                    Web_logout_time = 11;
                    bit_settx = true;
                    //WriteSettingValue();

         //-----------------------------------------------
              }
            else if(p->name() == "inputvanonoff"){
                //if(p_ledonoff == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                      #ifdef WEB_DEBUG
                        Serial.println("inputfanonoff ändern... ");
                      #endif

                    p_vanonoff = p->value();
                    if (p->value() == "on") vanAktiveConfig = true;
                    if (p->value() == "off") vanAktiveConfig = false;
                    if(vanAktiveConfig == true){
                       van_aktiv = " class='Stil1a' ";
                       van_werteaktual = "<span class='Stil5'>FAN aktiviert</div>";

                    }
                    if(vanAktiveConfig == false){
                       van_aktiv = " class='Stil1b' ";
                       van_werteaktual = "FAN deaktiviert";
                    }
                    
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "FAN " + p->value() + " Saved";
                    Web_logout_time = 11;
                    //WriteLedValue();
                    msLed = millis() - 9 * 1000L;
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "inputvanmax"){
                //if(p_inputledred == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputvanmax = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "FAN Saved";
                    Web_logout_time = 11;
                   // WriteLedValue();
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "inputvanmin"){
                //if(p_inputledorange == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputvanmin = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "FAN Saved";
                    Web_logout_time = 11;
                    WritevanValue();
                //}



            //-----------------------------------------------
              }
            else if(p->name() == "inputpushoff"){
                //if(p_pushonoff == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_pushonoff = p->value();
                    if (p->value() == "on") pushAktiveConfig = true;
                    if (p->value() == "off") pushAktiveConfig = false;
                    if(pushAktiveConfig == true){
                       push_aktiv = " class='Stil1a' ";
                       push_werteaktual = "<span class='Stil5'>Push aktiviert</div>";

                    }
                    if(pushAktiveConfig == false){
                       push_aktiv = " class='Stil1b' ";
                       push_werteaktual = "Push deaktiviert";
                    }
                    
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "LED " + p->value() + " Saved";
                    Web_logout_time = 11;
                    //WritePushValue();

               // }
            //-----------------------------------------------
                }
            else if(p->name() == "pushkey"){
               // if(p_pushkey == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_pushkey = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    //WritePushValue();
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "pushmessage"){
                if(p_pushmessage == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                }else{    
                    p_pushmessage = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    //WritePushValue();
                }
            //-----------------------------------------------
                }
            else if(p->name() == "pushtitle"){
               // if(p_pushtitle == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_pushtitle = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    //WritePushValue();
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "pushsound"){
               // if(p_pushsound == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_pushsound = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    //WritePushValue();
               // }
            //-----------------------------------------------
                }
            else if(p->name() == "pushvibration"){
               // if(p_pushvibration == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_pushvibration = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    //WritePushValue();
               // } 
            //-----------------------------------------------
                }
            else if(p->name() == "pushicon"){
               // if(p_pushicon == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_pushicon = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    //WritePushValue();
                //}  
            //-----------------------------------------------
                }
            else if(p->name() == "pushiconcolor"){
               // if(p_pushiconcolor == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_pushiconcolor = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    //WritePushValue();
                //}  
            //-----------------------------------------------
                }
            else if(p->name() == "pushpriority"){
                //if(p_pushpriority == p->value()){ 
                    //wert gleich
                  //  p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
               // }else{    
                    p_pushpriority = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    //WritePushValue();
                //}  
            //-----------------------------------------------
                }
            else if(p->name() == "pushdevice"){
               // if(p_pushdevice == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_pushdevice = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    //WritePushValue();
                //}  
            //-----------------------------------------------
                }
            else if(p->name() == "pushvalue"){
               // if(p_pushvalue == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
 
                //}else{    
                    p_pushvalue = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Push Saved";
                    Web_logout_time = 11;
                    WritePushValue();
               //}  



            //-----------------------------------------------
              }
            else if(p->name() == "inputmqonoff"){
                //if(p_mqonoff == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_mqonoff = p->value();
                    if (p->value() == "on") mqttdAktiveConfig = true;
                    if (p->value() == "off") mqttdAktiveConfig = false;
                    if(mqttdAktiveConfig == true) {
                      mQtt_aktiv = " class='Stil1a' ";
                      mq_werteaktual = "<span class='Stil5'>MQTT aktiviert</div>";
                    }
                    if(mqttdAktiveConfig == false) {
                      mQtt_aktiv = " class='Stil1b' ";
                      mq_werteaktual = "MQTT deaktiviert";
                    }
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "MQTT " + p->value() + " Saved";
                    Web_logout_time = 11;
                    //WriteMqttValue();
               // }
            //-----------------------------------------------
              }
            else if(p->name() == "inputmqclient"){
                //if(p_inputmqclient == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputmqclient = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "MQTT Saved";
                    Web_logout_time = 11;
                    //WriteMqttValue();

               // }
            //-----------------------------------------------
                }
            else if(p->name() == "inputmqserver"){
              //  if(p_inputmqserver == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputmqserver = p->value();                  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "MQTT Saved";
                    Web_logout_time = 11;
                    //WriteMqttValue();
              // }
            //-----------------------------------------------
              }
            else if(p->name() == "inputmqport"){
               // if(p_inputmqport == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputmqport = p->value();
                    //Serial.println("--> wp->name(): " + p->name());
                    //Serial.println("--> wp->value(): " + p->value());
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "MQTT Saved";
                    Web_logout_time = 11;
                    //WriteMqttValue();
                //}
            //-----------------------------------------------
                }
            else if(p->name() == "inputmquser"){
                //if(p_inputmquser == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputmquser = p->value();                    
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "MQTT Saved";
                    Web_logout_time = 11;
                   // WriteMqttValue();
                //}
            //-----------------------------------------------
                  }
            else if(p->name() == "inputmqpass"){
               // if(p_inputmqpass == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputmqpass = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "MQTT Saved";
                    Web_logout_time = 11;
                   // WriteMqttValue();
                //}
            //-----------------------------------------------
                    }
            else if(p->name() == "inputmqtopic"){
               // if(p_inputmqtopic == p->value()){ 
                    //wert gleich
                   // p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputmqtopic = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "MQTT Saved";
                    Web_logout_time = 11;
                    //WriteMqttValue();
               // }
            //-----------------------------------------------
                    }
            else if(p->name() == "inputmqtopic1"){
               // if(p_inputmqtopic1 == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                   // p_inputsavebit_txt = "";
                //}else{    
                    p_inputmqtopic1 = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "MQTT Saved";
                    Web_logout_time = 11;
                    //WriteMqttValue();
               // }
            //-----------------------------------------------
                    }
            else if(p->name() == "inputmqtopic2"){
               // if(p_inputmqtopic2 == p->value()){ 
                    //wert gleich
                    //p_inputsavebit = "savebit";
                    //p_inputsavebit_txt = "";
                //}else{    
                    p_inputmqtopic2 = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "MQTT Saved";
                    Web_logout_time = 11;
                    WriteMqttValue();
                //}
            //-----------------------------------------------
                    }
            else if(p->name() == "loginoutt"){
  
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Logout";
                    Web_logout_time = 0;
                    web_write_ok = 0 ; 


            //-----------------------------------------------
            }
            else if(p->name() == "getapmodus"){
                if(p_getapmodus == p->value()){ 
                    //wert gleich
                    // Wenn Scan erfogreich, dann p_getapmodus=""
                    p_inputsavebit = "savebit";
                    p_inputsavebit_txt = "";
                }else{    
                    p_getapmodus = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "AP WIFI Modus aktiviert";
                    Web_logout_time = 11;
                    select_apmodus = 1;

                }





            }
            else if(p->name() == "getreboot"){
                if(p_getreboot == p->value()){ 
                    //wert gleich
                    p_inputsavebit = "savebit";
                    p_inputsavebit_txt = "";
                    select_reboot = 0;
                }else{    
                    // hier noch speer wenn neu Bootet und Variable leer ist und vom Browser erneut versehentlich gesendet wurde
        #ifdef WEB_DEBUG
        Serial.println("getreboot: " + p_getreboot);
        #endif
                    p_getreboot = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Reboot in 10 sec.";
                    select_reboot = 2;
                }
            //-----------------------------------------------
            }
            else if(p->name() == "getsearch"){
                if(p_getsearch == p->value()){ 
                    //wert gleich
                    p_inputsavebit = "savebit";
                    p_inputsavebit_txt = "";
                    select_reboot = 0;
                }else{    

                    p_getsearch = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Search start...";
                    ms6 = millis();
                    gLedSearchFlag = true;
                    strip1.setPixelColor(0, strip1.Color(255, 255, 255)); //weiss
                    strip1.setPixelColor(1, strip1.Color(255, 255, 255)); //weiss
                    strip1.setPixelColor(2, strip1.Color(255, 255, 255)); //weiss
                    strip1.setPixelColor(3, strip1.Color(255, 255, 255)); //weiss
                    strip1.show(); 

                } 
            //-----------------------------------------------
            }
            else if(p->name() == "getdelete"){
                if(p_getdelete == p->value()){ 
                    //wert gleich
                    p_inputsavebit = "savebit";
                    p_inputsavebit_txt = "";
                    select_reboot = 0;
                    //Turn off LEDs 
                    strip1.setPixelColor(0, strip1.Color(0, 0, 0)); //0
                    strip1.setPixelColor(1, strip1.Color(0, 0, 0)); //0
                    strip1.setPixelColor(2, strip1.Color(0, 0, 0)); //0
                    strip1.setPixelColor(3, strip1.Color(0, 0, 0)); //0
                    strip1.show(); 
                   

                }else{    

                    p_getdelete = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "Graph delete...";
                   
                    ms6 = millis();
                    gLedDeleteFlag = true;
                    gGraphDeleteFlag = true;
                    #ifdef NVS_DEBUG
                    Serial.println("---- Bit  GRAPH delete = " + String(gGraphDeleteFlag));
                    #endif
                    strip1.setPixelColor(0, strip1.Color(153, 51, 255)); //lila
                    strip1.setPixelColor(1, strip1.Color(153, 51, 255)); //lila
                    strip1.setPixelColor(2, strip1.Color(153, 51, 255)); //lila
                    strip1.setPixelColor(3, strip1.Color(153, 51, 255)); //lila
                    strip1.show(); 

                } 




            //-----------------------------------------------
            }
            else if(p->name() == "getscan"){
                if(p_getscan == p->value()){ 
                    //wert gleich
                    // Wenn Scan erfogreich, dann p_MB_scan_resault=""
                    p_inputsavebit = "savebit";
                    p_inputsavebit_txt = "";
                }else{  
        #ifdef WEB_DEBUG
        Serial.println("getscan: " + p_getscan);
        #endif
                  if(p_inputpasswort == p_inputpasswort_admin){   
                    p_getscan = p->value();
                    p_inputsavebit = "savebit_green";
                    p_inputsavebit_txt = "SCAN RTU Slaves, wait 2 minutes and Reload Page";
                    Web_logout_time = 11;
                    select_slave_scan = 1;
                  }else{
                      web_write_green_red = 2;  
                      p_inputsavebit = "savebit_red";
                      p_inputsavebit_txt = "No Admin";
                  }
                }
            //-----------------------------------------------
            }
            else if(p->name() == "getradonaktual"){
                if(p_getradonaktual == p->value()){ 
                    //wert gleich
                    // 
                    p_inputsavebit = "savebit";
                    p_inputsavebit_txt = "";
                }else{    
        #ifdef WEB_DEBUG
        Serial.println("Sensor abfrage gestartet ");
        #endif
                    p_getradonaktual = p->value();
                    mb_werteaktual = "Sensor abfrage gestartet";
                    #ifdef MBDebug
                    Serial.println("--> gestartet"); 
                    #endif 
                    val_sensor_aktual = 2;
                    Web_logout_time = 11;

                    mb_afrg_Radon = 1; // Abfrage start nach reload Page

                    p_inputsavebit_txt = "Sensor abfrage gestartet";
                    p_inputsavebit = "savebit_green";

                    // Read register

                }
            //-----------------------------------------------








            }  
            //---------------------------------------------------

        }else{
             if(p->name() != "inputchart"){
                p_inputsavebit = "savebit_red";
                p_inputsavebit_txt = "Please Login";
             }
        }
        }



        updateDIVs(); 
        if (bit_settx == true){
          WriteSettingValue();
          changesetValue();
          bit_settx = false;
        }

        if(web_write_ok == 1){ 
           p_logout_or_in= p_logout;
           divpw = divon2;  
           divsetting = divon2;
        }else{  
           p_logout_or_in= p_login;
           divpw = divhidden2; 
           divsetting = divhidden2; 
        }  
        //-------------------------------------------------------
        #ifdef WEB_DEBUG
        Serial.println("wp->name()  : " + p->name());
        Serial.println("wp->value() : " + p->value());
        Serial.println("-------------------");
        #endif
    }

    // request->send(SPIFFS, "/index.html", "text/html");
    #ifdef WEB_DEBUG
    Serial.println("--> HTML Senden"); 
    #endif

    if(chart_page <= 2 || chart_page == 6 ){
      if(chart_page == 0){  
      request->send_P(200, "text/html", index_html, processor);
      }else{
         if(chart_page == 1){ 
          request->send_P(200, "text/html", index_htmlb, processor);  
        }
        if(chart_page == 2){  
           request->send_P(200, "text/html", index_htmld, processor);   
        }
        if(chart_page == 6){  
           request->send_P(200, "text/html", index_htmle, processor);   
        }
      }
    }else{
      if(chart_page == 3){  
        if(gauge_page == true){  
          request->send(200, "text/html", SendHTMLc(val1, val2, val3, val4)); 
        }else{
          request->send(200, "text/html", SendHTMLf(val1, val2, val3, val4)); 
        }
      }


      if(chart_page == 4){  
        request->send(200, "text/html", SendHTMLe(r0_val1, r0_val2, r0_val3, r1_val1, r1_val2, r1_val3, r2_val1, r2_val2, r2_val3, r3_val1, r3_val2, r3_val3, r4_val1, r4_val2, r4_val3, r5_val1, r5_val2, r5_val3)); 
      }
     
      if(chart_page == 5){  
        request->send(200, "text/html", SendHTMLg(fval1, fval2, fval3, fval4, fval5, fval6, fval7, fval8, fval9, fval10, f_alarm_s, divfan7, vent_max_stufe, vent_min_stufe)); 
      }

    }




      //-----------------------------------
      // VARS ändern für die Anzeigen
        p_sett01t = 0;
        p_sett02t = 0;
        p_sett03t = 0;
        p_sett04t = 0;
        p_sett05t = 0;
        p_sett06t = 0;
        p_sett07t = 0;
        p_sett08t = 0;
        p_sett09t = 0;
        p_sett10t = 0;
        p_sett11t = 0;

     //-----  FAN ------
  
      updatefanviews();
      updatemeshviews();

    //---------------------------------------------------------



    #ifdef WEB_DEBUG
    Serial.println("--> HTML Senden fertig"); 
    #endif
    //-- reeset
    //p_inputsavebit = "savebit";
    //p_inputsavebit_txt = "";
    
  });

  // Route to set GPIO to HIGH
  server.on("/on", HTTP_GET, [](AsyncWebServerRequest *request){
    //digitalWrite(ledPin, HIGH);  
    #ifdef WEB_DEBUG
    Serial.println("--> on route"); 
    #endif
    request->send(SPIFFS, "/index.html", String(), false, processor2);
  });


  server.on("/post", HTTP_POST, [](AsyncWebServerRequest *request){
      #ifdef WEB_DEBUG
      Serial.println("--> Post route");
      #endif
    request->send(200, "text/plain", "Post route");
  });
    server.on("getapmodus", HTTP_POST, [](AsyncWebServerRequest *request){
      #ifdef WEB_DEBUG
      Serial.println("--> Post route");
      #endif
    request->send(200, "text/plain", "Post route");
  });
    server.on("getreboot", HTTP_POST, [](AsyncWebServerRequest *request){
      #ifdef WEB_DEBUG
      Serial.println("--> Post route");
      #endif
    request->send(200, "text/plain", "Post route");
  });
    server.on("getsearch", HTTP_POST, [](AsyncWebServerRequest *request){
      #ifdef WEB_DEBUG
      Serial.println("--> Post route");
      #endif
    request->send(200, "text/plain", "Post route");
  });
    server.on("getdelete", HTTP_POST, [](AsyncWebServerRequest *request){
      #ifdef WEB_DEBUG
      Serial.println("--> Post route");
      #endif
    request->send(200, "text/plain", "Post route");
  });
    server.on("getscan", HTTP_POST, [](AsyncWebServerRequest *request){
      #ifdef WEB_DEBUG
      Serial.println("--> Post route");
      #endif
    request->send(200, "text/plain", "Post route");
  });  
 
  server.on("/put", HTTP_PUT, [](AsyncWebServerRequest *request){
      #ifdef WEB_DEBUG
      Serial.println("--> Put route");
      #endif
    request->send(200, "text/plain", "Put route");
  });
 
  //server.on("/get", HTTP_GET, [](AsyncWebServerRequest *request){
     // Serial.println("--> Get route");
    //request->send(200, "text/plain", "Get route");
  //});
 
  server.on("/any", HTTP_ANY, [](AsyncWebServerRequest *request){
      #ifdef WEB_DEBUG
      Serial.println("--> Any route");
      #endif
    request->send(200, "text/plain", "Any route");
  });






   p_inputname.toCharArray(p_inputnamec, 10);  

  #ifndef OTA_on_NMDS_off

    //******************************************************************************
    //                               MDNS                                          *
    //******************************************************************************
      // Set up mDNS responder:
      // - first argument is the domain name, in this example
      //   the fully-qualified domain name is "esp32.local"
      // - second argument is the IP address to advertise
      //   we send our IP address on the WiFi network


    if (!MDNS.begin(p_inputnamec)) {
        Serial.println("Error setting up MDNS responder!");
        while(1) {
            delay(1000);
        }
    }
    #ifdef WEB_DEBUG
    //Serial.println("mDNS responder started!");
    // Serial.println("http://" + String(p_inputnamec) + ".local/index.html");
    //Serial.println("TCP server started");
    #endif

  #endif





  //******************************************************************************
  //                        Starte Async WebServer                               *
  //****************************************************************************** 
    if(WiFi.status() != WL_CONNECTED) {
      //#ifdef WEB_DEBUG
      //Serial.println("--> Kein WLAN Async WebServer off");
      //#endif
      Async_WebServer_start = 0;
    }else{
      server.begin();
      //#ifdef WEB_DEBUG
      //Serial.println("--> WLAN on Async WebServer on");
      //#endif
      Async_WebServer_start = 1 ;
    }
  










  
  //******************************************************************************
  //                               ArduinoOTA                                          *
  //******************************************************************************
  #ifdef OTA_on_NMDS_off 
   ArduinoOTA
    .onStart([]() {
      String type;
      if (ArduinoOTA.getCommand() == U_FLASH)
        type = "sketch";
      else // U_SPIFFS
        type = "filesystem";

      // NOTE: if updating SPIFFS this would be the place to unmount SPIFFS using SPIFFS.end()
      Serial.println("Start updating " + type);
    })
    .onEnd([]() {
      Serial.println("\nEnd");
    })
    .onProgress([](unsigned int progress, unsigned int total) {
      Serial.printf("Progress: %u%%\r", (progress / (total / 100)));
    })
    .onError([](ota_error_t error) {
      Serial.printf("Error[%u]: ", error);
      if (error == OTA_AUTH_ERROR) Serial.println("Auth Failed");
      else if (error == OTA_BEGIN_ERROR) Serial.println("Begin Failed");
      else if (error == OTA_CONNECT_ERROR) Serial.println("Connect Failed");
      else if (error == OTA_RECEIVE_ERROR) Serial.println("Receive Failed");
      else if (error == OTA_END_ERROR) Serial.println("End Failed");
    });


    ArduinoOTA.setHostname(p_inputnamec);
    //ArduinoOTA.setPassword("1235");
    ArduinoOTA.begin();

  #else
  //******************************************************************************
  //                               MDNS                                          *
  //******************************************************************************
    // Add service to MDNS-SD
    MDNS.addService("http", "tcp", 80);
  


  #endif
 //********************************************************************************





  //******************************************************************************
  //                             Starte Zeitserver                               *
  //****************************************************************************** 
   //-----------------------------------------
    /*
    setupDateTime();
    Serial.println(DateTime.now());
    Serial.println("--------------------");
    Serial.println(DateTime.toString());
    Serial.println(DateTime.toISOString());
    Serial.println(DateTime.toUTCString());
    Serial.println("--------------------");
    Serial.println(DateTime.format(DateFormatter::COMPAT));
    Serial.println(DateTime.format(DateFormatter::DATE_ONLY));
    Serial.println(DateTime.format(DateFormatter::TIME_ONLY));
    Serial.println("--------------------");
    DateTimeParts p = DateTime.getParts();
    Serial.printf("%04d/%02d/%02d %02d:%02d:%02d %ld (%s)\n", p.getYear(),
                  p.getMonth(), p.getMonthDay(), p.getHours(), p.getMinutes(),
                  p.getSeconds(), p.getTime(), p.getTimeZone());
    Serial.println("--------------------");
    showTime();
   */
  
    NTP_setup();







  //******************************************************************************
  //                             INIT  Modbus                                    *
  //****************************************************************************** 
  // Set RTU Modbus message timeout to 2000ms
    MB.setTimeout(resp_tim_out);
    
  // Start ModbusRTU background task
    MB.begin(1);

   ModbusMessage n, m;  
   // Define message
  // ModbusMessage msg1;  

  // Define and start WiFi bridge
  // ServerID 2: Server with remote serverID 4, accessed through RTU client MB
  // Only FCs 03 and 04 accepted
  #ifdef MB_Gateway
    MBbridge.attachServer(2, 2, READ_HOLD_REGISTER, &MB);
    MBbridge.addFunctionCode(2, READ_INPUT_REGISTER);
    MBbridge.addFunctionCode(2, WRITE_HOLD_REGISTER);
  
    m.setMessage(2, ANY_FUNCTION_CODE, 0, 10);
    n = MBbridge.localRequest(m);
    
    char dataStringb[50] = {0};
    sprintf(dataStringb, "%02X %02X %02X %02X %02X",Expec_b[0],Expec_b[1],Expec_b[2],Expec_b[3],Expec_b[4]);  
    testOutput(makeVector(dataStringb), n);   
 

  // Check: print out all combinations served to Serial

    MBbridge.listServer();
 
  // Start the bridge. Port 502, 4 simultaneous clients allowed, 600ms inactivity to disconnect client

    MBbridge.start(port, m_max_clients, 60000);
  #endif  
    
    #ifdef MBDebug
    Serial.printf("Use the shown IP and port %d to send requests!\n", port);
    #endif
    


  //**************************************************************************************
  // Set up ModbusRTU client.
  // - provide onData handler function
    MB.onDataHandler(&handleData);
  // - provide onError handler function
    //MB.onErrorHandler(&handleError);
  //-----------------------------------------------------------------------




   






  //******************************************************************************
  //                     Ende SETUP Start Programm                               *
  //****************************************************************************** 
   NTPupdate();
   NTPCallback();
   gRADONupdateFlag = true;
   //IPAddress wIP = WiFi.localIP();
   //Serial.printf("IP address: %u.%u.%u.%u\n", wIP[0], wIP[1], wIP[2], wIP[3]);


   if (p_mqonoff == "on"){
      mqttdAktiveConfig = true;
   }else{
      mqttdAktiveConfig = false; 
   }  
   if(mqttdAktiveConfig == true){
    mQtt_aktiv = " class='Stil1a' ";
    mq_werteaktual = "<span class='Stil5'>MQTT aktiviert</div>";
   }
   if(mqttdAktiveConfig == false) mQtt_aktiv = " class='Stil1b' ";


   if (p_cloudonoff == "on"){
      cloudAktiveConfig = true;
   }else{
      cloudAktiveConfig = false; 
   }  
   if(cloudAktiveConfig == true){ 
      cloud_aktiv = " class='Stil1a' ";
      cloud_werteaktual = "<span class='Stil5'>CLOUD aktiviert</div>";
   }
   if(cloudAktiveConfig == false) cloud_aktiv = " class='Stil1b' ";
   
   

   if (p_ledonoff == "on"){
      ledAktiveConfig = true;
   }else{
      ledAktiveConfig = false; 
   }  
   if(ledAktiveConfig == true){ 
      lEd_aktiv = " class='Stil1a' ";
      led_werteaktual = "<span class='Stil5'>LED aktiviert</div>";
   }
   if(ledAktiveConfig == false) lEd_aktiv = " class='Stil1b' ";
   

   if (p_vanonoff == "on"){
      vanAktiveConfig = true;
   }else{
      vanAktiveConfig = false; 
   }  

   if(vanAktiveConfig == true){ 
      van_aktiv = " class='Stil1a' ";
      van_werteaktual = "<span class='Stil5'>VAN aktiviert</div>";
   }
   if(vanAktiveConfig == false) van_aktiv = " class='Stil1b' ";
   


   if (p_pushonoff == "on"){
      pushAktiveConfig = true;
   }else{
      pushAktiveConfig = false; 
   }  
   if(pushAktiveConfig == true){ 
      push_aktiv = " class='Stil1a' ";
      push_werteaktual = "<span class='Stil5'>Push aktiviert</div>";
   }
   if(pushAktiveConfig == false) push_aktiv = " class='Stil1b' ";



   msRs485 = millis();
   msRs485_start = msRs485;          


   //****************************************************************** 
   #ifdef led_on 

        gLedSearchFlag = false;
        on_LED_Search();

  #endif
  //****************************************************************** 




  //******************************************************************************
  //                         Starte Watchdog                                     *
  //******************************************************************************
  //Serial.println("Configuring WDT...");
  //esp_task_wdt_init(WDT_TIMEOUT, true); //enable panic so ESP32 restarts
  //esp_task_wdt_add(NULL); //add current thread to WDT watch




}
//---- setup() ------






//----- loop() -----
void loop() {
  


     //--------------------------------------------------------
 
      updatefanviews();
      updatemeshviews();

    //---------------------------------------------------------







  if (tG1_page == true){
    tG1_page = false;

      msg_TG[0] = 0xFE;
      msg_TG[1] = 0x01;
      msg_TG[2] = 0x01;
      Serial1.write(msg_TG, 3);
      delay(300);
      Serial1.write(msg_TG, 3);
      Serial.println("Auto Taste +: ");
  }

  if (tG2_page == true){
    tG2_page = false;

      msg_TG[0] = 0xFE;
      msg_TG[1] = 0x02;
      msg_TG[2] = 0x02;
      Serial1.write(msg_TG, 3);
      delay(300);
      Serial1.write(msg_TG, 3);
      Serial.println("Auto Taste -: ");

  }


    //esp_task_wdt_reset();
    if(gbootUpdateFlag == true){
      if(millis() > 200){
      // Serial.println("-- gbootUpdateFlag --"); 
       gbootUpdateFlag = false;
       ms_timer = millis();
       ms1 = millis();
       ms2 = millis();
       ms3 = millis();
       ms4 = millis();
       ms5 = millis();
       ms6 = millis();
       msRs485 = millis();
       msRs485_start = millis();
      }
    }


   //--- Timer -------------------------------------
   //-------------
   // alle 1sec.
   if (millis() - ms3 > 1000) {
      ms3 = millis(); 
      g_01sec_UpdateFlag = true;
      //Serial.println("-- Start 1sec --");

      runMillis= millis();
      allSeconds=millis()/1000;
      runHours= allSeconds/3600;
      secsRemaining=allSeconds%3600;
      runMinutes=secsRemaining/60;
      runSeconds=secsRemaining%60;
      sprintf(tbuf,"%02d:%02d:%02d",runHours,runMinutes,runSeconds);
      //Serial.println(tbuf);
   }

   // alle 10sec.
   if (millis() - ms2 > 10000) {
      ms2 = millis(); 
      g_10sec_UpdateFlag = true;
      //Serial.println("-- Start 10sec --");
      if (vanAktiveConfig == true){  //FAN Eingeschaltet)
        if (p_sett11 == 1){  //view FAN Eingeschaltet   
          updateluefeter();
        }
      }
      if (mqtt_con_err == true){
        mqtt_con_err = false; //reconnect bei fehler
        reconnect();
      }
      


   }
    // alle 60sec.
   if (millis() - ms1 > 60000) {
      ms1 = millis(); 
      //Serial.println("-- Start 60sec --");

      g_60sec_UpdateFlag = true;
      
      
   } 

   // alle 5min.
   if (millis() - ms5 > 300 * 1000L) {
      ms5 = millis();
      g_05min_UpdateFlag = true; 
      #ifdef TimeDebug
        Serial.println("-- Start 5min --");
      #endif
   }

    // alle 60min.
   if (millis() - ms4 > 3600 * 1000L) {
      ms4 = millis(); 
      g_60min_UpdateFlag = true;
      #ifdef TimeDebug
        Serial.println("-- Start 60min --");
      #endif
   } 
   //----------------------------------------------
  
  /*
   // alle 10sec.
    if (millis() - ms_timer > 10 * 1000L) {
      ms_timer = millis();
        Serial.println("-- 10sec. --");
        Serial.println(millis()); 
        Serial.println(ms_timer); 
        Serial.println(ms1); 
        Serial.println(ms2); 
        Serial.println(ms3); 
        Serial.println(ms4); 
        Serial.println(ms5); 
        Serial.println(ms6); 
        Serial.println(msRs485); 
        Serial.println(msRs485_start); 

        

    }
    */
    //---------------------------------------------


      #ifdef OTA_on_NMDS_off
        ArduinoOTA.handle();
      #else
        //MDNS.update();
      #endif

    //---------------------------------------------------------------------
      if(select_reboot == 2){                           // ESP Restart vom Webserver gesendet
        //damit nach dem neustart nicht von Browser erneut reboot kommt
       
          // eventuell noch das bit nach Zeit löschen??????
          if (ipchangeandreeboot == 1){    // IP Adresse gerändert
           
            ipchangeandreeboot = 0;

              if (p_inputstaticip != "152.158.158.251"){

                WiFiManager wifiManager;
                //wifiManager.setSTAStaticIPConfig(IPAddress(192,168,178,162), IPAddress(192,168,178,1), IPAddress(255,255,255,0)); 
                IPAddress _ip,_gw,_sn;
                _ip.fromString(p_inputstaticip);
                _gw.fromString(p_inputgateway);
                _sn.fromString(p_inputsubnetmask);
                //_dns.fromString(static_dns);
                wifiManager.setSTAStaticIPConfig(_ip, _gw, _sn);
                // p_inputipchange = preferences.getString("p_ipchange", "0"); 

                #ifdef WIFI_DEBUG      
                    Serial.println("IP Change for WIFIMANAGER");
                #endif


                getIpAddress(p_inputstaticip); 
                #ifdef WIFI_DEBUG
                Serial.print("IP Address=");             
                Serial.print(IpPartAddress[0]); Serial.print("."); Serial.print(IpPartAddress[1]); Serial.print("."); 
                Serial.print(IpPartAddress[2]); Serial.print("."); Serial.println(IpPartAddress[3]); 
                #endif 
                IPAddress local_IP( IpPartAddress[0], IpPartAddress[1], IpPartAddress[2], IpPartAddress[3] );
                #ifdef WIFI_DEBUG
                  Serial.println(local_IP);
                #endif  
                getIpAddress(p_inputsubnetmask);
                #ifdef WIFI_DEBUG
                Serial.print("Submask="); 
                Serial.print(IpPartAddress[0]); Serial.print("."); Serial.print(IpPartAddress[1]); Serial.print("."); 
                Serial.print(IpPartAddress[2]); Serial.print("."); Serial.println(IpPartAddress[3]); 
                #endif
                IPAddress subnet(IpPartAddress[0], IpPartAddress[1], IpPartAddress[2], IpPartAddress[3]);
                #ifdef WIFI_DEBUG
                  Serial.println(subnet);
                #endif
                getIpAddress(p_inputgateway);  
                #ifdef WIFI_DEBUG      
                Serial.print("IP gateway="); 
                Serial.print(IpPartAddress[0]); Serial.print("."); Serial.print(IpPartAddress[1]); Serial.print("."); 
                Serial.print(IpPartAddress[2]); Serial.print("."); Serial.println(IpPartAddress[3]);  
                #endif
                IPAddress gateway(IpPartAddress[0], IpPartAddress[1], IpPartAddress[2], IpPartAddress[3]);
                #ifdef WIFI_DEBUG
                  Serial.println(gateway);
                #endif
                IPAddress primaryDNS(8, 8, 8, 8); 
                IPAddress secondaryDNS(8, 8, 4, 4);
                // This part of code will try create static IP address
                #ifdef WIFI_DEBUG
                  if (!WiFi.config(local_IP, gateway, subnet, primaryDNS, secondaryDNS)) {
                    Serial.println("STA Failed to configure");
                  }
                #endif

                
              }

          abfrage_eingabe = 0;

          }
       
            Preferences preferences;
            preferences.end();                                      //Preferences beenden

          delay(5000);
          ESP.restart(); 

      }
    //-----select_reboot == 2-------------------------------------------


           

    //-------------------------------------------------------------------
    if (select_slave_scan == 1){
        select_slave_scan = 0;

        uint16_t start_address = 1;
        uint16_t words = 1;
        char dataStringb[50] = {0};
        
        // Timeout auf 500ms setzen - müsste reichen...
        MB.setTimeout(500);

        for (uint32_t scan_server = 2; scan_server < 50; scan_server++) {
          // Wir benutzen scan_server auch als Token!
          ModbusMessage n = MB.syncRequest(scan_server, (uint8_t)scan_server, READ_HOLD_REGISTER, start_address, words);
          Error err = n.getError();
          if (err == TIMEOUT) {
            //Serial.printf("%d antwortet nicht.\n", scan_server);
            p_MB_scan_resault = "<span class='Stil6'>nothing found until ID: " + String(scan_server) + "</div>";
          } else {
            ModbusError me(err);
            #ifdef MBDebug
            Serial.printf("%d hat geantwortet: %s\n", scan_server, (const char *)me);
            #endif
              sprintf(dataStringb, "0x%02X",scan_server);  
              p_MB_scan_resault = "<span class='Stil5'> " + String(dataStringb);
              p_MB_scan_resault += " OK</div>";
              //Serial.println(p_MB_scan_resault);
              MB.setTimeout(resp_tim_out);
              break;
              
          }
        }
    }
   //----- select_slave_scan == 1 ---------------------------------------------
   
   
    //---------------------------------------------------------------------------
    if (gRADONupdateFlag  == true){
        gRADONupdateFlag = false;
        mb_werteaktual = "<span class='Stil6'>Sensor connect failed!</div>"; //beim start erstmal error anzeigen
        val_sensor_aktual = 2;
        abfr_mb_finish = 0;
       // Serial.println("------------------------ abfr0 --"); 
        
        //Read register
          MB.setTimeout(500);
          ModbusMessage n = MB.syncRequest(2, 2, READ_HOLD_REGISTER, 0, 1);
          Error err = n.getError();
          if (err == TIMEOUT) {
             p_inputsavebit_txt = "<span class='Stil6'>Sensor connect failed!</div>";
             abfr_mb_finish = 2;
             #ifdef MBDebug
             Serial.println("READ_HOLD_REGISTER  --  Sensor abfrage fehlgeschlagen");
             #endif 
          } else {
             p_inputsavebit_txt = "Sensor Werte aktualisiert";
             #ifdef MBDebug
             Serial.println("READ_HOLD_REGISTER   --  Sensor Werte aktualisiert"); 
             #endif
             abfr_mb_finish = 1;
          }


          if (abfr_mb_finish == 1) {
            MB.setTimeout(resp_tim_out);
            Error errd = MB.addRequest(2, 2, READ_INPUT_REGISTER, 0, 6);
            //while (abfr_mb_finish <= 0) {
             // Serial.println("------------------------ abfr --"); 
              //Serial.println(errd); 
              
              if (errd!=SUCCESS ) {
                //ModbusError e(err);
                abfr_mb_finish = 2;
                //LOG_E("aaaError creating request: %02X - %s\n", (int)e, (const char *)e);
                p_inputsavebit_txt = "Sensor abfrage fehlgeschlagen";
                #ifdef MBDebug
                Serial.println("READ_INPUT_REGISTER  --  Sensor abfrage fehlgeschlagen"); 
                #endif
              }else{
                  //Serial.println("ok");
                  #ifdef MBDebug
                  Serial.println("READ_INPUT_REGISTER  --  Sensor Werte aktualisiert"); 
                  #endif
                  p_inputsavebit_txt = "Sensor Werte aktualisiert";
                abfr_mb_finish = 1;
              }
            //}
          }

           #ifdef MBDebug
              Serial.println("ABFRAGE fertig");
           #endif       
       


    }
    //----- gRADONupdateFlag = true ---------------------------------------------

   



     //-----------------------------------------------------------------------------
     //------------------  M Q T T -------------------------
    if (p_sett07 == 1){  //view MQTT Eingeschaltet  
      if (mqttdAktiveConfig == true) {   // MQTT Eingeschaltet
        if (gMQTTUpdateFlag == true) {
            gMQTTUpdateFlag = false;
          
           
               //WiFiClient Client;
               //const int httpPort = 80;
               //IPAddress server(185,3,235,169);  // rec.auto-steuerung.de
           
            if (!client.connected()) 
            {
            
              if(mqtt_con_err == false){
                #ifdef MQTT_DEBUG
                  Serial.println(String(p_time) + " | MQTT Start Reconnect");
                #endif
                mq_werteaktual = "<span class='Stil6'>MQTT connect failed</div>"; 
                reconnect();
              }

            }else{
                //client.loop();
                //char payLoad[1];
              
              mq_werteaktual = "<span class='Stil5'>MQTT Connected</div>"; 
              #ifdef MQTT_DEBUG
              Serial.println("--> MQTT Start publish!");
              #endif
            
              p_inputmqtopic.toCharArray(p_inputmqtopicc, 50);
              p_inputmqtopic1.toCharArray(p_inputmqtopic1c, 50);
              p_inputmqtopic2.toCharArray(p_inputmqtopic2c, 50);

              
              uint32_t positionlen = p_inputmqtopic.length();
              if (positionlen >= 1) { 
              #ifdef MQTT_DEBUG
              Serial.println("--> MQTT Topic: " + p_inputmqtopic);
              Serial.println("--> MQTT Value: " + String(mb_radon_ist_word));
              #endif
                client.publish(p_inputmqtopicc, String(mb_radon_ist_word).c_str());
              }
              #ifdef CO2_on
              uint32_t positionlen1 = p_inputmqtopic1.length();
              if (positionlen1 >= 1) { 
              #ifdef MQTT_DEBUG
              Serial.println("--> MQTT Topic: " + p_inputmqtopic1);
              Serial.println("--> MQTT Value: " + String(eco2val1));
              #endif
                client.publish(p_inputmqtopic1c, String(eco2val1).c_str());  
              }
              uint32_t positionlen2 = p_inputmqtopic2.length();
              if (positionlen2 >= 1) { 
              #ifdef MQTT_DEBUG
              Serial.println("--> MQTT Topic: " + p_inputmqtopic2);
              Serial.println("--> MQTT Value: " + String(etvocval2));
              #endif
                client.publish(p_inputmqtopic2c, String(etvocval2).c_str());
              }
              #endif
              
              #ifdef MQTT_DEBUG  
              Serial.println("--> MQTT publish finish");
              #endif
              //itoa(ledState2, p_inputmqtopicc, 10);
            // client.publish("radonvalue/feeds/radon.radon", "12");

          }
        }
      }
    }
    //-------------------------------------------------------------------------------





     //-----------------------------------------------------------------------------
     //------------------  C L O U D -------------------------
     if (p_sett08 == 1){  //view Cloud Eingeschaltet  
      if (cloudAktiveConfig == true) {   //Cloud Eingeschaltet

        if (gcloudUpdateFlag == true) {
          
            p_inputcloudserver.toCharArray(p_inputcloudserverc, 40);
            p_inputclouduser.toCharArray(p_inputclouduserc, 20);
            p_inputclouddevice.toCharArray(p_inputclouddevicec, 5);
            p_inputcloudpage.toCharArray(p_inputcloudpagec, 40);
            p_inputcloudkey.toCharArray(p_inputcloudkeyc, 40);
            p_inputcloudpage.toCharArray(p_inputcloudpagec, 20);

            #ifdef RADONCLOUD_DEBUG
            Serial.println("Server: " + String(p_inputcloudserverc));
            #endif
            RadonCloudUpload();
        
        }
      }
     }
    //-------------------------------------------------------------------------------










     //-----------------------------------------------------------------------------
     //------------------  P U H S H -------------------------

    if (pushAktiveConfig == true) {   //Push Eingeschaltet
     
       p_pushvaluei = p_pushvalue.toInt();
     
       if(gpushUpdateFlag_SR == false){
        if(push_val_vorgabe > p_pushvaluei){
          gpushUpdateFlag = true;
          gpushUpdateFlag_SR = true;  // Sperre aktiv
        }
       }

       if(push_val_vorgabe < p_pushvaluei){
          gpushUpdateFlag_SR = false;
       }

       

     
     
      if (gpushUpdateFlag == true) {    
         if (millis() - msPush > 300 * 1000L) {  // max alle 10min
         //if (millis() - msPush > 60 * 1000L) {  // max alle 10min
           
            #ifdef PushDebug
            Serial.println("Push senden...");         
            #endif
           
            push_nachricht();
            #ifdef Push2
              push_nachricht2();
            #endif
            msPush = millis(); 
         } 
      }


    }
    //-------------------------------------------------------------------------------





   //--------------------------------------------------------------------------------
   //--- 60 min ---------------------------------------------------------------------
   // alle 60min
   if (g_60min_UpdateFlag == true){ 
      g_60min_UpdateFlag = false;
      //if (millis() - ms4 > 3600 * 1000L) {
       // ms4 = millis();
       #ifdef TimeDebug
        Serial.println("-- 60min. --  ");
       #endif
       esp32_uptime ++;

       p_uptime = String(esp32_uptime);
      
        NTPupdate();
        NTPCallback();

       //sensor_vals_read = true;


    }
   //--- 60 min ---------------------------------------------------------------------
   //--------------------------------------------------------------------------------




   




   //--------------------------------------------------------------------------------
   //--- 60 sec. ---------------------------------------------------------------------
   // alle 60sec.
    // if (millis() - ms1 > 60 * 1000L) {
      //ms1 = millis();
   if (g_60sec_UpdateFlag == true){ 
      g_60sec_UpdateFlag = false;
      boot_min ++;


       gcloudUpdateFlag = true;

        //*************************************
        NTPCallback();
        //*************************************

        #ifdef TimeDebug
        Serial.println("-- 60sec. -- | "  + String(p_time) + " | " + timeClient.update());
        #endif


          Preferences preferences;
          preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden         
          ee_wifires = preferences.getUInt("ee_wifires", 0);              //"Datei" ee_wifires auslesen
          if (ee_wifires > 0){
           
            #ifdef NVS_DEBUG
            Serial.println("immer noch Boot Anzahl für Reset WLAN: " + String(ee_wifires));
            #endif
            ee_wifires = 0;
            preferences.putUInt("ee_wifires", ee_wifires);                  //Variable  speichern

          }



          //--- Text für Sensor aktualisieren
          if (val_sensor_aktual >= 1){
            val_sensor_aktual -- ; 
          }
            if (val_sensor_aktual == 0){
            if (abfr_mb_finish == 1) {
            //mb_werteaktual = "Messwerte &auml;lter als 10min";
            
            mb_werteaktual = "letzte aktualisierung: " + p_uhrzeit_last;
            
            }
          } 

          if (Web_logout_time >= 1){
            Web_logout_time -- ; 
            #ifdef WEB_DEBUG
            Serial.println("Logout Timer: " + String(Web_logout_time) + " Minuten");
            #endif
          }
          //----------------------------------

          //----- Logout Timer -----------
          if (Web_logout_time == 0){
            if (web_write_ok == 1){
              web_write_ok = 0 ; 
              divpw = divhidden2; 
              divsetting = divhidden2; 
            }
          }



       // Serial.printf("free heap: %d\n", ESP.getFreeHeap());


       if (p_sett06 == 1){  //view Mesh Eingeschaltet  
          gMESHUpdateFlag = true;
          gMESHUpdateFlag2 = true;
          gMESHUpdateFlag3 = true;
          gMESHUpdateFlag4 = true;
          gMESHUpdateFlag5 = true;
          toggle_client = 0;
       }



        //******************************************************************** 
        //---- PUSH Auswahl ----
          push_val_vorgabe = mb_radon_ist_word;
          
          if (p_pushmessage.indexOf("xxxx")>=1) {   // Searchstring exists?
          
          push_val_vorgabe = mb_radon_ist_word;

          }
          else if(p_pushmessage.indexOf("XXXX")>=1) {  
          
          push_val_vorgabe = eco2val1;

          }
        //******************************************************************** 


         
           // #ifdef PushDebug
            //Serial.println("-->Push Sperre " + String(gpushUpdateFlag_SR));
           // Serial.println("-->Push Flag " + String(gpushUpdateFlag));
           // Serial.println("-->Push Var " + String(p_pushvaluei));
           // #endif
     //Serial.println("-- 60sec. end --");

   }
   //--- 60 sec. ---------------------------------------------------------------------
   //---------------------------------------------------------------------------------

    //String divhidden = "<div id=\"hidden\" hidden>";
    //String divon = "<div id=\"on\">";







   //-------------------- ABFRAGE von SENSORWERTEN ------------------------------
   //----------------------------------------------------------------------------
    if(timeSyncron == false){
       // gDay, gMonth, gYear, gHour, gMinute, gSecond
      if (gMinute == 0 || gMinute == 15 || gMinute == 30 || gMinute == 45) {
        timeSyncron = true;
        ms5 = millis();
        g_05min_UpdateFlag = true;
        gRADONupdateFlag = true; // Abfrage von Sensorwerten
        minUpdateFlag = true;
        sensor_vals_read = true;

        #ifdef WEB_DEBUG
        Serial.println("ABFRAGE Sensordaten: " + p_time);
        #endif
      } 
    }else{
      if (gMinute == 58 || gMinute == 12 || gMinute == 28 || gMinute == 43){
        timeSyncron = false;
        #ifdef WEB_DEBUG
        Serial.println("Vorbereitung ABFRAGE Sensordaten: " + p_time);
        #endif
      }
    }
   //----------------------------------------------------------------------------
   //----------------------------------------------------------------------------


   //--------------------------------------------------------------------------------
   //--- 5 min ---------------------------------------------------------------------
   // alle 5min
    //if (millis() - ms5 > 300 * 1000L) {
     //   ms5 = millis();
    if (g_05min_UpdateFlag == true){ 
      g_05min_UpdateFlag = false;
         Serial.println("-- 5min. --");

        if(chart_page == 3 || chart_page == 4 || chart_page == 5){
          gRADONupdateFlag = true;
          gRADONupdateSinifferFlag = true;
        }

    }
   //--- 5 min ---------------------------------------------------------------------
   //--------------------------------------------------------------------------------




   //--------------------------------------------------------------------------------
   //--- 10 sec. ---------------------------------------------------------------------
   // alle 10sec.
   //if (millis() - ms2 > 10 * 1000L) {
   if (g_10sec_UpdateFlag == true){ 
      g_10sec_UpdateFlag = false;
      //ms2 = millis();
      //Serial.println("-- 10sec. -- ");
        //Serial.println("-- response / received size --");
        //Serial.println(s_response_size);
        //Serial.println(s_received_size);

        //if (ee_wifires > 0){
         //Serial.printf("Boot Anzahl für Reset WLAN: %u\n", ee_wifires);          //Variable counter Seriell ausgeben
        //}
        #ifndef CO2_on
           val1 = random(0, 50);
           val2 = random(50, 100);
        #else
        gCO2UpdateFlag = true;
        #endif

      if (ee_wifires > 0){
          ee_wifires = 0;
          Preferences preferences;
          preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden
          preferences.putUInt("ee_wifires", ee_wifires);                  //Variable  speichern
          
          ee_wifires = preferences.getUInt("ee_wifires", 0);              //"Datei" ee_wifires auslesen
          #ifdef NVS_DEBUG
          Serial.println("Boot Anzahl für Reset WLAN: " + String(ee_wifires));
          #endif
      }


        //------------------------------------------------------------------
        if (received_response__g == 0){
          received_response_size = received_response_size + response_size;
          response_size = 0;
          p_rs485_data = String(received_response_size) + " byte";
        
          if (received_response_size >= 1000 && received_response_size < 1000000){
              received_response_size_k = received_response_size / 1000;
              p_rs485_data = String(received_response_size_k) + " kbyte";
          }
          if (received_response_size >= 1000000 && received_response_size < 1000000000){
              received_response_size_m = received_response_size / 1000000;
              p_rs485_data = String(received_response_size_m) + " Mbyte";
          }
        }

        if (received_response_size >= 1000000000){
          received_response__g ++;
          received_response_size = 0;
          //p_rs485_data =  String(received_response__g) + " Gbyte";
        }  

        if (received_response__g >= 1){

          received_response_size = received_response_size + response_size;
           response_size = 0;
          p_rs485_data_b = String(received_response_size) + " byte";
        
          if (received_response_size >= 1000 && received_response_size < 1000000){
              received_response_size_k = received_response_size / 1000;
              p_rs485_data_b = String(received_response_size_k) + " kbyte";
          }
          if (received_response_size >= 1000000 && received_response_size < 1000000000){
              received_response_size_m = received_response_size / 1000000;
              p_rs485_data_b = String(received_response_size_m) + " Mbyte";
          }

          p_rs485_data =  String(received_response__g) + " Gbyte + " + p_rs485_data_b;

        }

        // überschreiben mit Anfragen
        #ifdef MB_Gateway
        received_count = MB.getMessageCount() - MBbridge.getMessageCount();
        received_count = received_count + MBbridge.getMessageCount();
        #endif
        

        msRs485 = millis();
        msRs485_diff = msRs485 - msRs485_start;
        //Serial.println(msRs485_diff);

        msRs485_diff = msRs485_diff / 7200000;  //Stunden
        //Serial.println(msRs485_diff);   

        msRs485_eintr = received_count / msRs485_diff;
       // p_rs485_data = String(msRs485_eintr) + " Counts/h";
        //Serial.println(msRs485_eintr);
        if (received_count > 30){
          p_rs485_data = String(msRs485_eintr) + " requests/h";
        }else{
          p_rs485_data = String(received_count) + " requests";
        }
        
        //-----------------------------------------------------------------------

        

        //-----------------------------------------------------------------------
        if(select_apmodus == 1){
          select_apmodus = 0;
           
           Serial.println("select_apmodus");
           
            Preferences preferences;
            preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden

            ee_portalTimeout = 320;                                          
            #ifdef WIFI_DEBUG
            Serial.printf("Portal Timeout: %u\n", ee_portalTimeout);          //Variable counter Seriell ausgeben
            #endif
            preferences.putUInt("ePortalTime", ee_portalTimeout);                  //Variable counter unter "Datei" ee_portalTimeout speichern 
            
            preferences.putString("p_ipchange", "0");                     //Variable speichern

            preferences.end();                                      //Preferences beenden
           
            WiFiManager wifiManager;
            wifiManager.resetSettings();
            delay(500);
            ESP.restart(); 

        }
        //-----------------------------------------------------------------------
        
       /*
       Serial.println("[MAIN] Free heap: %d bytes\n"+ String(ESP.getFreeHeap()));

       Serial.println("[MAIN] getChipRevision"+ String(ESP.getChipRevision()));
       Serial.println("[MAIN] getPsramSize"+ ESP.getPsramSize());
       Serial.println("[MAIN] getFlashChipSize"+ ESP.getFlashChipSize());
       Serial.println("[MAIN] getCpuFreqMHz"+ ESP.getCpuFreqMHz());
       Serial.println("[MAIN] getFreeHeap"+ ESP.getFreeHeap());
       Serial.println("[MAIN] getSketchSize"+ ESP.getSketchSize());
       Serial.println("[MAIN] getFreeSketchSpace"+ ESP.getFreeSketchSpace());
       Serial.println("[MAIN] temperatureRead"+ String(temperatureRead()));
       Serial.println("[MAIN] temperatureRead()+32)*1.8"+ String((temperatureRead()+32)*1.8));
       Serial.println("[MAIN] hallRead"+ hallRead());
       */

       //Serial.println("[MAIN] getCpuFreqMHz"+ ESP.getCpuFreqMHz());

    
    #ifdef CO2_on
    
     if (gCO2UpdateFlag == true){

       gCO2UpdateFlag = false;

      // Read
        uint16_t eco2, etvoc, errstat, raw;
        ccs811.read(&eco2, &etvoc, &errstat, &raw);
      
        // Print measurement results based on status
        if ( errstat == CCS811_ERRSTAT_OK )
        {
          eco2val1 = eco2;
          etvocval2 = etvoc;
          val1 = eco2val1;
          val2 = etvocval2;


     //--------------------------------------------
     //--------  CO2  ------------
         if(val1 <= 600){  //  0-600

            val1max = 1000;// max wert 1000
            vredTo2 = val1max;
            vredFrom2 = 800;
            vyellowTo2 = vredFrom2;
            vyellowFrom2 = 600;
            vgreenTo2 = vyellowFrom2;
            vgreenFrom2 = 200;
            val1_color = "0, 250, 0, 0.3";  //grün
            #ifdef CO2_DEBUG
            Serial.println("<1000");
            #endif
           
          }else if(val1 <= 800){   //   600-800

           val1max = 1000;// max wert 1000
            vredTo2 = val1max;
            vredFrom2 = 800;
            vyellowTo2 = vredFrom2;
            vyellowFrom2 = 600;
            vgreenTo2 = vyellowFrom2;
            vgreenFrom2 = 200;
            val1_color = "250, 200, 0, 0.3"; //orange
            #ifdef CO2_DEBUG
            Serial.println("<1000");
            #endif
            
          }else if(val1 <= 1000){   //   800-1000

           val1max = 1000; // max wert 1000
            vredTo2 = val1max;
            vredFrom2 = 800;
            vyellowTo2 = vredFrom2;
            vyellowFrom2 = 600;
            vgreenTo2 = vyellowFrom2;
            vgreenFrom2 = 200;
            val1_color = "250, 0, 0, 0.3"; //rot
            #ifdef CO2_DEBUG
            Serial.println("<1000");
            #endif
                    
          }else if(val1 <= 2000){   //  1000 - 2000

            val1max = 2000;    // max wert 2000
            vredTo2 = val1max;
            vredFrom2 = 1500;
            vyellowTo2 = vredFrom2;
            vyellowFrom2 = 600;
            vgreenTo2 = vyellowFrom2;
            vgreenFrom2 = 200;
            val1_color = "250, 200, 0, 0.3";
            #ifdef CO2_DEBUG
            Serial.println("<2000");
            #endif

          }else if(val1 <= 3000){

            val1max = 3000;
            vredTo2 = val1max;
            vredFrom2 = 1500;
            vyellowTo2 = vredFrom2;
            vyellowFrom2 = 600;
            vgreenTo2 = vyellowFrom2;
            vgreenFrom2 = 200;
            val1_color = "250, 0, 0, 0.3";
            #ifdef CO2_DEBUG
            Serial.println("<3000");
            #endif

          }else{

            val1max = val1 + 500;
            vredTo2 = val1max;
            vredFrom2 = 800;
            vyellowTo2 = vredFrom2;
            vyellowFrom2 = 600;
            vgreenTo2 = vyellowFrom2;
            vgreenFrom2 = 200;
            val1_color = "250, 0, 0, 0.3";
            #ifdef CO2_DEBUG
            Serial.println(">3000");
            #endif
          }


     //--------------------------------------------
     //--------  TVOC  ------------
         if(val2 <= 50){   //  0 - 50

            val2max = 100;    // max wert 10
            vredTo3 = val2max;
            vredFrom3 = 80;
            vyellowTo3 = vredFrom3;
            vyellowFrom3 = 50;
            vgreenTo3 = vyellowFrom3;
            vgreenFrom3 = 20;
            val2_color = "0, 250, 0, 0.3";  //grün


          }else if(val2 <= 80){  //  50  - 80

            val2max = 100;    // max wert 100
            vredTo3 = val2max;
            vredFrom3 = 80;
            vyellowTo3 = vredFrom3;
            vyellowFrom3 = 50;
            vgreenTo3 = vyellowFrom3;
            vgreenFrom3 = 20;
            val2_color = "250, 200, 0, 0.3"; //  orange

          }else if(val2 <= 100){

            val2max = 100;    // max wert 100
            vredTo3 = val2max;
            vredFrom3 = 80;
            vyellowTo3 = vredFrom3;
            vyellowFrom3 = 50;
            vgreenTo3 = vyellowFrom3;
            vgreenFrom3 = 20;
            val2_color = "250, 0, 0, 0.3";//  rot

          }else if(val2 <= 150){

            val2max = 150; // max wert 150
            vredTo3 = val2max;
            vredFrom3 = 80;
            vyellowTo3 = vredFrom3;
            vyellowFrom3 = 50;
            vgreenTo3 = vyellowFrom3;
            vgreenFrom3 = 20;
            val2_color = "250, 0, 0, 0.3";//  rot
        
          }else{

            val2max = val2 + 100; 
            vredTo3 = val2max;
            vredFrom3 = 80;
            vyellowTo3 = vredFrom3;
            vyellowFrom3 = 50;
            vgreenTo3 = vyellowFrom3;
            vgreenFrom3 = 20;
            val2_color = "250, 0, 0, 0.3";//  rot

          }


          r0_val1 = String(eco2val1);
          r0_val2 = String(etvocval2);  

  


          #ifdef CO2_DEBUG
          Serial.print("CCS811: ");
          Serial.print("eco2=");
          Serial.print(eco2val1);           
          Serial.print(" ppm  ");
      
          Serial.print("etvoc=");
          Serial.print(etvocval2);
          Serial.print(" ppb  ");
          Serial.println();
          #endif
        }
        else if ( errstat == CCS811_ERRSTAT_OK_NODATA )
        {
          #ifdef CO2_DEBUG
          Serial.println("CCS811: waiting for (new) data");
          #endif
        } else if ( errstat & CCS811_ERRSTAT_I2CFAIL )
        {
          #ifdef CO2_DEBUG
          Serial.println("CCS811: I2C error");
          #endif
        }
        else
        {
          #ifdef CO2_DEBUG
          Serial.print("CCS811: errstat=");
          Serial.print(errstat, HEX);
          Serial.print("=");
          Serial.println( ccs811.errstat_str(errstat) );
          #endif
        }

     }

    #endif





   //------------------------------------------------------------------------

     //Serial.println("---- Bit  GRAPH delete = " + String(gGraphDeleteFlag));


   }
   //--- 10 sec. ---------------------------------------------------------------------
   //--------------------------------------------------------------------------------







   //--------    Radon Value Led    --------
   //--------------------------------------------------------------------------------

      //------- LED update ----------
      if (p_sett09 == 1){  //view LED Eingeschaltet  
        if (gledUpdateFlag == true){
          gledUpdateFlag = false;
          //if (ledAktiveConfig == false){

            #ifdef led_on 
              updateColors();    // LEDs
            #endif
          //}
        
        }
      }
      //--------------------------------------

      if (millis() - msLed > 20 * 1000L) {
          msLed = millis();

          if (ledAktiveConfig == true){
            #ifdef led_on 
              updateColors();    // LEDs
            #endif
          }
      }
   //------ led ---------------------------------------------------------------------
   //--------------------------------------------------------------------------------







  //------------ Timer -------------------
  //---------Verzögerung 10 Sec. -----------------------------------------------------------
   if (millis() - ms6 > 10 * 1000L) {
      ms6 = millis();

     if(mb_afrg_Radon == 2){
       mb_afrg_Radon = 0;
       gModbusValupdateFlag = true;
     }
    
      if (gLedSearchFlag == true || gLedDeleteFlag == true){
        on_LED_Search();
      }

      
   }
  //---------------------------------------------------------------------------------------
  //------------------------------------



  //---------------------------------------------------------------------------
      if (gModbusValupdateFlag == true)  {
            gModbusValupdateFlag = false;

                        // Read register
                        abfr_mb_finish = 0;
                        Error errc = MB.addRequest(2, 2, READ_INPUT_REGISTER, 0, 6);
                      
                        //while (abfr_mb_finish <= 0) {
                          if (errc==TIMEOUT) {
                            //ModbusError e(err);
                            //LOG_E("aaaError creating request: %02X - %s\n", (int)e, (const char *)e);
                            p_inputsavebit_txt = "Sensor abfrage fehlgeschlagen";
                            p_inputsavebit = "savebit_red";
                            #ifdef MBDebug
                            Serial.println("--> fehlgeschlagen");  
                            #endif
                            abfr_mb_finish = 2;
                          }
                          if (errc==ACKNOWLEDGE) {
                            p_inputsavebit = "savebit_green";
                            p_inputsavebit_txt = "Sensor Werte aktualisiert";
                            abfr_mb_finish = 1;
                          }


      }
   //---------------------------------------------------------------------------





   //--- 1 sec. ---------------------------------------------------------------------
   // alle 1sec.
    //if (millis() - ms3 > 1 * 1000L) {
     // ms3 = millis();
   if (g_01sec_UpdateFlag == true){ 
      g_01sec_UpdateFlag = false;
      //Serial.println("-- 1sec. --");
      mesh_02_val = " <div style=\"background-color: orange;\"> ";

      if (pauseWebpage > 0){
        pauseWebpage --;
      }
     
      //---- wird angesprungen wenn im WM die Daten geändert wurden.
      if (shouldSaveConfig == true){
          shouldSaveConfig = false;
        
            Serial.println("-->> ESP nach AP Modus !");

            Preferences preferences;
            preferences.begin("eenvs", false);                         //Ordner eenvs anlegen/verwenden
           
            ee_wifires = 0;
            preferences.putUInt("ee_wifires", ee_wifires);                  //Variable counter unter "Datei"  speichern
           
            ee_portalTimeout = 30;                                            // kürzer wegen neu Booten
            Serial.printf("Portal Timeout: %u\n", ee_portalTimeout);          //Variable counter Seriell ausgeben
            preferences.putUInt("ePortalTime", ee_portalTimeout);                  //Variable counter unter "Datei" ee_portalTimeout speichern 
           
            preferences.end();                                      //Preferences beenden
  
            Serial.println("-->> now restart ......");
            delay(1000);
            ESP.restart(); 
      }

      


    }
   //--- 1 sec. ---------------------------------------------------------------------




      //--------------------- WLAN RESET mit Boot Button ---------------------------
        b_BOOT = digitalRead(PIN_BOOT_BUTTON);
        if( b_BOOT == HIGH) { 
            reset_timer_wlan = 20;
        }
      //-----------------------------------------------------------------------------






    //--------------------- Messwerte ---------------------------
    if (sensor_vals_read == true){
      sensor_vals_read = false;
    
      #ifdef WEB_DEBUG
        measurement = hallRead();
        measurement_lage = measurement;
        Serial.println("---------------------------------");
        Serial.print("Hall sensor measurement: ");
        Serial.println(measurement_lage); 
      #endif

      #ifdef WEB_DEBUG
        measurement_temp = (temprature_sens_read() - 32) / 1.8;
        Serial.print("Temperature: ");
        // Convert raw temperature in F to Celsius degrees
        Serial.print(measurement_temp);  
        Serial.println(" °C");
        Serial.println("---------------------------------");
      #endif

    }
    //------------------------------------------------------------





    //------------------------------------------------------------------
    if (gGraphDeleteFlag == true && gGraphDeleteFlag == 1){
       gGraphDeleteFlag = false;
        Serial.println("---- GRAPH delete -------");
        chartime00 = "";
        chartime00a = "";
        chartime00b = "";
        chartime01 = "";
        chartime01a = "";
        chartime01b = "";
        chartime02 = "";
        chartime02a = "";
        chartime02b = "";
        chartime03 = "";
        chartime03a = "";
        chartime03b = "";
        chartime04 = "";
        chartime04a = "";
        chartime04b = "";
        chartime05 = "";
        chartime05a = "";
        chartime05b = "";
        chartime06 = "";
        chartime06a = "";
        chartime06b = "";
        chartime07 = "";
        chartime07a = "";
        chartime07b = "";
        chartime08 = "";
        chartime08a = "";
        chartime08b = "";
        chartime09 = "";
        chartime09a = "";
        chartime09b = "";
        chartime10 = "";
        chartime10a = "";
        chartime10b = "";
        chartime11 = "";
        chartime11a = "";
        chartime11b = "";
        chartime12 = "";
        chartime12a = "";
        chartime12b = "";
        chartime13 = "";
        chartime13a = "";
        chartime13b = "";

        radon_tag = 0;
        radon_tag01 = 0;
        radon_tag02 = 0;
        radon_tag03 = 0;
        radon_tag04 = 0;
        radon_tag05 = 0;
        radon_tag06 = 0;
        radon_tag07 = 0;
        radon_tag08 = 0;
        radon_tag09 = 0;
        radon_tag10 = 0;
        radon_tag11 = 0;
        radon_tag12 = 0;
        radon_tag13 = 0;
        radon_tag14 = 0;
        radonTagCount = 0;
        radonTagEintrCount = 0;
        radonMore14Day = 0;
        charcount = 0;
        chartumlauf = 0;
        

          // Wiederhole 41 Mal:
          for (int i=0; i <= 41; i++){
            charInts4[i] = 0;
            charInts3[i] = 0;
            charInts[i] = 0;
            charInts5[i] = 0;
          } 

          datei_schreiben();  // tvoc Daten
          datei_schreiben2();  // co2 Daten
          datei_schreiben3();  // radon Daten
          datei_schreiben5();  // Hz Daten
          WritedChartValue();
         
         // balken auf 0
         stringdata2 = "data : [" + String(radon_tag01) + "," + String(radon_tag02) + "," + String(radon_tag03) + "," + String(radon_tag04) + "," + String(radon_tag05) + "," + String(radon_tag06) + "," + String(radon_tag07) + "," + String(radon_tag08) + "," + String(radon_tag09) + "," + String(radon_tag10) + "," + String(radon_tag11) + "," + String(radon_tag12) + "," + String(radon_tag13) + "," + String(radon_tag14) + ",],";


    }
    //----------------------------------------------------------------------




    //--------------------------------------------------------------------------------------------
      if(gMESHUpdateFlag == true){
        //mesh_werteaktual = "Mesh deaktiviert";  
        //mesh_aktiv = " class='Stil1b' ";  
          mesh_01_val = " class='Stil1' ";
        //**************************************************************************
          if (p_room01 != "----------" && p_inputip01 != "000.000.000.000"){
            //if (p_inputip01 != "000.000.000.000"){
              div01 = divon;
              if (toggle_client == 0){
                toggle_client = 1; 
                gMESHUpdateFlag = false;
                //-------------
                #ifdef MeshDebug
                Serial.println("------------------------------------");
                Serial.println("Room 1");
                #endif
                mesh_werteaktual = "<span class='Stil5'>Mesh aktiviert</div>"; 
                mesh_aktiv = " class='Stil1a' ";

                p_inputip01.toCharArray(p_inputip01c, 15);
                // http://192.168.178.62/radon.html
                #ifdef MeshDebug
                Serial.print("connecting to ");
                Serial.println(p_inputip01);
                #endif
                // Use WClient class to create TCP connections
                WiFiClient client;
                const int httpPort = 80;
                
                if (!client.connect(p_inputip01c, httpPort)) {
                  #ifdef MeshDebug
                    Serial.println("connection failed");
                    Serial.println("------------------------------------");
                  #endif
                  mesh_01_val = " class='Stil8' ";
                  toggle_client = 0; 
                  div01rg = divr;
                  return;
                }
                div01rg = divg;
                mesh_01_val = " class='Stil7' ";
                // We now create a URI for the request
                String url = "/radon.html";
                
                //Serial.print("Requesting URL: ");
                //Serial.println(url);
                
                // This will send the request to the server
                client.print(String("GET ") + url + " HTTP/1.1\r\n" +
                            "Host: " + "192.168.178.62" + "\r\n" + 
                            "Connection: close\r\n\r\n");
                // start waiting for the response    

                String line_t = ""; 

                unsigned long lasttime = millis();
                while (!client.available() && millis() - lasttime < 1000) {delay(1);}   // wait max 1s for data
                // Read all the lines of the reply from server and print them to Serial

                
                  while (client.available()) {
                  
                  String line = client.readStringUntil('\n');
                
                  if (line.indexOf("var1")>=1) {   // Searchstring exists?
                  
                    line_t = line;
                  // Serial.println(line_t);

                    uint32_t position1 = line_t.indexOf(">CO2:") + 5;
                          //Serial.println(position1);
                    
                    uint32_t position2 = line_t.indexOf(">TVOC:") + 6;
                        // Serial.println(position2);
                    
                    uint32_t position3 = line_t.indexOf(">Radon:") + 7;
                          //Serial.println(position3);
                  
                    uint32_t position4 = line_t.indexOf("ppm<") - 3;
                          //Serial.println(position4);
                    
                    uint32_t position5 = line_t.indexOf("ppb<") - 3;
                          //Serial.println(position5);
                    
                    uint32_t position6 = line_t.indexOf("bqm3<") - 0;
                          //Serial.println(position6);

                    //Serial.println(line_t);
                    #ifdef MeshDebug
                      Serial.println();
                      Serial.print("CO2 ");
                      Serial.println(line_t.substring(position1, position4));
                    #endif
                    r1_val1 = line_t.substring(position1, position4);
                    #ifdef MeshDebug
                      Serial.print("TVOV ");
                      Serial.println(line_t.substring(position2, position5));
                    #endif
                    r1_val2 = line_t.substring(position2, position5);
                    #ifdef MeshDebug
                      Serial.print("Radon ");
                      Serial.println(line_t.substring(position3, position6));
                    #endif
                    r1_val3 = line_t.substring(position3, position6);

                    //String radonSubString = line_t.substring(position3,position6);
                    //int radon = atoi(radonSubString.c_str());

                  }
                  //Serial.print(line);
                }
                #ifdef MeshDebug
                Serial.println();
                Serial.println("closing connection Room 1");
                Serial.println("------------------------------------");
                #endif
                toggle_client = 0; 
                //----------
              }
           // }
          }else{
            div01 = divhidden;
          }
        //**************************************************************************
        
      }  


      //--------------------------------------------------------------------------------------------
      if(gMESHUpdateFlag2 == true){
          mesh_02_val = " class='Stil1' ";
        //************************************************************************** 
          if (p_room02 != "----------" && p_inputip02 != "000.000.000.000"){
            //if (p_inputip02 != "000.000.000.000"){
              div02 = divon;
              if (toggle_client == 0){
                  
                  gMESHUpdateFlag2 = false;
                  toggle_client = 1; 
                  #ifdef MeshDebug
                    Serial.println("------------------------------------");
                    Serial.println("Room 2");
                  #endif
                  p_inputip02.toCharArray(p_inputip02c, 15);
                  #ifdef MeshDebug
                    Serial.print("connecting to ");
                    Serial.println(p_inputip02);
                  #endif
                  WiFiClient client;

                  const int httpPort = 80;
                    
                  if (!client.connect(p_inputip02c, httpPort)) {
                    #ifdef MeshDebug
                      Serial.println("connection failed");
                      Serial.println("------------------------------------");
                    #endif
                    mesh_02_val = " class='Stil8' ";
                    toggle_client = 0;
                    div02rg = divr;
                    return;
                  }
                  div02rg = divg;
                  mesh_02_val = " class='Stil7' ";
                  String url = "/radon.html";
                  client.print(String("GET ") + url + " HTTP/1.1\r\n" +
                                "Host: " + p_inputip02 + "\r\n" + 
                                "Connection: close\r\n\r\n");
                  String line_t = "";  
                  unsigned long lasttime = millis();
                  while (!client.available() && millis() - lasttime < 1000) {delay(1);}   // wait max 1s for data         
                      while (client.available()) {
                      String line = client.readStringUntil('\n');
                      if (line.indexOf("var1")>=1) {   // Searchstring exists?
                        line_t = line;
                        uint32_t position1 = line_t.indexOf(">CO2:") + 5;              
                        uint32_t position2 = line_t.indexOf(">TVOC:") + 6;
                        uint32_t position3 = line_t.indexOf(">Radon:") + 7;
                        uint32_t position4 = line_t.indexOf("ppm<") - 3;
                        uint32_t position5 = line_t.indexOf("ppb<") - 3;
                        uint32_t position6 = line_t.indexOf("bqm3<") - 0;
                       
                        #ifdef MeshDebug
                          Serial.println();
                          Serial.print("CO2 ");
                          Serial.println(line_t.substring(position1, position4));
                        #endif
                        
                          r2_val1 = line_t.substring(position1, position4);
                        #ifdef MeshDebug
                          Serial.print("TVOV ");
                          Serial.println(line_t.substring(position2, position5));
                        #endif
                          r2_val2 = line_t.substring(position2, position5);
                        #ifdef MeshDebug
                          Serial.print("Radon ");
                          Serial.println(line_t.substring(position3, position6));
                        #endif
                          r2_val3 = line_t.substring(position3, position6);
                      }
                    }
                    #ifdef MeshDebug
                      Serial.println();
                      Serial.println("closing connection Room 2");
                      Serial.println("------------------------------------");
                    #endif
                    toggle_client = 0; 
                    //----------
              }
           // }
          }else{
            div02 = divhidden;
          }
        //**************************************************************************
      }      
      //--------------------------------------------------------------------------------------------

   
      //--------------------------------------------------------------------------------------------
      if(gMESHUpdateFlag3 == true){   
          mesh_03_val = " class='Stil1' "; 
        //************************************************************************** 
         if (p_room03 != "----------" && p_inputip03 != "000.000.000.000"){
            //if (p_inputip02 != "000.000.000.000"){
              div03 = divon;
              if (toggle_client == 0){
                  
                  gMESHUpdateFlag3 = false;
                  toggle_client = 1; 
                  #ifdef MeshDebug
                    Serial.println("------------------------------------");
                    Serial.println("Room 3");
                  #endif
                  p_inputip03.toCharArray(p_inputip03c, 15);
                  #ifdef MeshDebug
                    Serial.print("connecting to ");
                    Serial.println(p_inputip03);
                  #endif
                  WiFiClient client;

                  const int httpPort = 80;
                    
                  if (!client.connect(p_inputip03c, httpPort)) {
                    #ifdef MeshDebug
                      Serial.println("connection failed");
                      Serial.println("------------------------------------");
                    #endif
                    mesh_03_val = " class='Stil8' ";
                    toggle_client = 0;
                    div03rg = divr;
                    return;
                  }
                  div03rg = divg;
                  mesh_03_val = " class='Stil7' ";
                  String url = "/radon.html";
                  client.print(String("GET ") + url + " HTTP/1.1\r\n" +
                                "Host: " + p_inputip03 + "\r\n" + 
                                "Connection: close\r\n\r\n");
                  String line_t = "";  
                  unsigned long lasttime = millis();
                  while (!client.available() && millis() - lasttime < 1000) {delay(1);}   // wait max 1s for data         
                      while (client.available()) {
                      String line = client.readStringUntil('\n');
                      if (line.indexOf("var1")>=1) {   // Searchstring exists?
                        line_t = line;
                        uint32_t position1 = line_t.indexOf(">CO2:") + 5;              
                        uint32_t position2 = line_t.indexOf(">TVOC:") + 6;
                        uint32_t position3 = line_t.indexOf(">Radon:") + 7;
                        uint32_t position4 = line_t.indexOf("ppm<") - 3;
                        uint32_t position5 = line_t.indexOf("ppb<") - 3;
                        uint32_t position6 = line_t.indexOf("bqm3<") - 0;
                        #ifdef MeshDebug
                          Serial.println();
                          Serial.print("CO2 ");
                          Serial.println(line_t.substring(position1, position4));
                        #endif
                          r3_val1 = line_t.substring(position1, position4);
                        #ifdef MeshDebug
                          Serial.print("TVOV ");
                          Serial.println(line_t.substring(position2, position5));
                        #endif
                          r3_val2 = line_t.substring(position2, position5);
                        #ifdef MeshDebug
                          Serial.print("Radon ");
                          Serial.println(line_t.substring(position3, position6));
                        #endif
                        r3_val3 = line_t.substring(position3, position6);
                      }
                    }
                    #ifdef MeshDebug
                      Serial.println();
                      Serial.println("closing connection Room 3");
                      Serial.println("------------------------------------");
                    #endif
                    toggle_client = 0; 
                    //----------
              }
           // }
          }else{
            div03 = divhidden;
          }
        //**************************************************************************
      }      

   
      //--------------------------------------------------------------------------------------------
      if(gMESHUpdateFlag4 == true){
        //************************************************************************** 
         if (p_room04 != "----------" && p_inputip04 != "000.000.000.000"){
            //if (p_inputip02 != "000.000.000.000"){
              div04 = divon;
              if (toggle_client == 0){
                  
                  gMESHUpdateFlag4 = false;
                  toggle_client = 1; 
                  #ifdef MeshDebug
                    Serial.println("------------------------------------");
                    Serial.println("Room 4");
                  #endif
                    p_inputip04.toCharArray(p_inputip04c, 15);
                  #ifdef MeshDebug
                    Serial.print("connecting to ");
                    Serial.println(p_inputip04);
                  #endif
                  WiFiClient client;
                  const int httpPort = 80;
                    
                  if (!client.connect(p_inputip04c, httpPort)) {
                    #ifdef MeshDebug
                      Serial.println("connection failed");
                      Serial.println("------------------------------------");
                    #endif
                    mesh_04_val = " class='Stil8' ";
                    toggle_client = 0;
                    div04rg = divr;
                    return;
                  }
                  div04rg = divg;
                  mesh_04_val = " class='Stil7' ";
                  String url = "/radon.html";
                  client.print(String("GET ") + url + " HTTP/1.1\r\n" +
                                "Host: " + p_inputip04 + "\r\n" + 
                                "Connection: close\r\n\r\n");
                  String line_t = "";  
                  unsigned long lasttime = millis();
                  while (!client.available() && millis() - lasttime < 1000) {delay(1);}   // wait max 1s for data         
                      while (client.available()) {
                      String line = client.readStringUntil('\n');
                      if (line.indexOf("var1")>=1) {   // Searchstring exists?
                        line_t = line;
                        uint32_t position1 = line_t.indexOf(">CO2:") + 5;              
                        uint32_t position2 = line_t.indexOf(">TVOC:") + 6;
                        uint32_t position3 = line_t.indexOf(">Radon:") + 7;
                        uint32_t position4 = line_t.indexOf("ppm<") - 3;
                        uint32_t position5 = line_t.indexOf("ppb<") - 3;
                        uint32_t position6 = line_t.indexOf("bqm3<") - 0;
                        #ifdef MeshDebug
                        Serial.println();
                        Serial.print("CO2 ");
                        Serial.println(line_t.substring(position1, position4));
                        #endif
                        r4_val1 = line_t.substring(position1, position4);
                        #ifdef MeshDebug
                        Serial.print("TVOV ");
                        Serial.println(line_t.substring(position2, position5));
                        #endif
                        r4_val2 = line_t.substring(position2, position5);
                        #ifdef MeshDebug
                        Serial.print("Radon ");
                        Serial.println(line_t.substring(position3, position6));
                        #endif
                        r4_val3 = line_t.substring(position3, position6);
                      }
                    }
                    #ifdef MeshDebug
                    Serial.println();
                    Serial.println("closing connection Room 4");
                    Serial.println("------------------------------------");
                    #endif
                    toggle_client = 0; 
                    //----------
              }
           // }
          }else{
            div04 = divhidden;
          }
        //**************************************************************************
      }      
   
   
      //--------------------------------------------------------------------------------------------
      if(gMESHUpdateFlag5 == true){
        //************************************************************************** 
        if (p_room05 != "----------" && p_inputip05 != "000.000.000.000"){
            //if (p_inputip02 != "000.000.000.000"){
              div05 = divon;
              if (toggle_client == 0){
                  
                  gMESHUpdateFlag5 = false;
                  toggle_client = 1; 
                  #ifdef MeshDebug
                    Serial.println("------------------------------------");
                    Serial.println("Room 5");
                  #endif
                  p_inputip03.toCharArray(p_inputip05c, 15);
                  #ifdef MeshDebug
                  Serial.print("connecting to ");
                  Serial.println(p_inputip05);
                  #endif
                  WiFiClient client;
                  const int httpPort = 80;
                    
                  if (!client.connect(p_inputip05c, httpPort)) {
                    #ifdef MeshDebug
                    Serial.println("connection failed");
                    Serial.println("------------------------------------");
                    #endif
                    mesh_05_val = " class='Stil8' ";
                    toggle_client = 0;
                    div05rg = divr;
                    return;
                  }
                  div05rg = divg;
                  mesh_05_val = " class='Stil7' ";
                  String url = "/radon.html";
                  client.print(String("GET ") + url + " HTTP/1.1\r\n" +
                                "Host: " + p_inputip05 + "\r\n" + 
                                "Connection: close\r\n\r\n");
                  String line_t = "";  
                  unsigned long lasttime = millis();
                  while (!client.available() && millis() - lasttime < 1000) {delay(1);}   // wait max 1s for data         
                      while (client.available()) {
                      String line = client.readStringUntil('\n');
                      if (line.indexOf("var1")>=1) {   // Searchstring exists?
                        line_t = line;
                        uint32_t position1 = line_t.indexOf(">CO2:") + 5;              
                        uint32_t position2 = line_t.indexOf(">TVOC:") + 6;
                        uint32_t position3 = line_t.indexOf(">Radon:") + 7;
                        uint32_t position4 = line_t.indexOf("ppm<") - 3;
                        uint32_t position5 = line_t.indexOf("ppb<") - 3;
                        uint32_t position6 = line_t.indexOf("bqm3<") - 0;
                        #ifdef MeshDebug
                        Serial.println();
                        Serial.print("CO2 ");
                        Serial.println(line_t.substring(position1, position4));
                        #endif
                        r5_val1 = line_t.substring(position1, position4);
                        #ifdef MeshDebug
                        Serial.print("TVOV ");
                        Serial.println(line_t.substring(position2, position5));
                        #endif
                        r5_val2 = line_t.substring(position2, position5);
                        #ifdef MeshDebug
                        Serial.print("Radon ");
                        Serial.println(line_t.substring(position3, position6));
                        #endif
                        r5_val3 = line_t.substring(position3, position6);
                      }
                    }
                    #ifdef MeshDebug
                    Serial.println();
                    Serial.println("closing connection Room 5");
                    Serial.println("------------------------------------");
                    #endif
                    toggle_client = 0; 
                    //----------
              }
           // }
          }else{
            div05 = divhidden;
          }
        //**************************************************************************
      }
      //-------------------------------------------------------------------------------  
      



  // print the string when a newline arrives:
  if (stringComplete) {
    Serial.println(inputString);
    // clear the string:
    inputString = "";
    stringComplete = false;
  }


 // Daten nur senden, wenn Daten erhalten:
  // check if data is available
  /*
  int rxlen = Serial1.available(); // number of bytes available in Serial buffer
  if (rxlen > 17) {
  //if (rxlen > 0) {
  
    int rlen; // number of bytes to read
    if (rxlen > BUFFER_SIZE1) // check if the data exceeds the buffer size
      rlen = BUFFER_SIZE1;    // if yes, read BUFFER_SIZE bytes. The remaining will be read in the next time
    else
      rlen = rxlen;
     
    // read the incoming bytes:
    rlen = Serial1.readBytes(buf1, rlen);

    // prints the received data
    Serial.print("I received: ");
    for(int i = 0; i < rlen; i++)
      Serial.print(buf1[i],HEX);
       Serial.println("");
  }
*/


if(pauseWebpage == 0){
  if (Serial1.available() > 0) {
    // read the incoming bytes:
    msg_TGt = 0xFC;
    //int rlen = Serial1.readBytesUntil('\n', buf1, BUFFER_SIZE1);
    int rlen = Serial1.readBytesUntil(msg_TGt, buf1, BUFFER_SIZE1);

    // prints the received data
    //Serial.print(String(rlen) + "  I received: ");
    for(int i = 0; i < rlen; i++)
      //Serial.print(buf1[i]);
      //Serial.printf(" %02X",buf1[i]);
      //Serial.println("");

      


      //ser_val_01[0] = buf1[1];
      ser_val_01[0] = (byte)buf1[0];
      ser_val_01[1] = (byte)buf1[1];
      //Serial.println(ser_val_01[0]);
      //Serial.println(ser_val_01[1]);

      ser_val_02[0] = (byte)buf1[2];
      ser_val_02[1] = (byte)buf1[3];
      //Serial.println(ser_val_02[0]);
      //Serial.println(ser_val_02[1]);

      ser_val_03[0] = (byte)buf1[4];
      ser_val_03[1] = (byte)buf1[5];
      //Serial.println(ser_val_03[0]);
      //Serial.println(ser_val_03[1]);

      ser_val_04 = (byte)buf1[6];
      //Serial.println(ser_val_04);

      ser_val_05[0] = (byte)buf1[7];
      ser_val_05[1] = (byte)buf1[8];
      //Serial.println(ser_val_05[0]);
      //Serial.println(ser_val_05[1]);

      ser_val_06[0] = (byte)buf1[9];
      ser_val_06[1] = (byte)buf1[10];
      //Serial.println(ser_val_06[0]);
      //Serial.println(ser_val_06[1]);

      ser_val_07 = (byte)buf1[11];
      //Serial.println(ser_val_07);

      ser_val_08 = (byte)buf1[12];
      ser_val_09 = (byte)buf1[13];
      ser_val_10 = (byte)buf1[14];
      ser_val_11 = (byte)buf1[15];

      ser_val_12 = (byte)buf1[16];
      //Serial.println(ser_val_12);

      f_check_rec = ser_val_01[0]+ser_val_01[1]+ser_val_02[0]+ser_val_02[1]+ser_val_03[0]+ser_val_03[1]+ser_val_04+ser_val_05[0]+ser_val_05[1]+ser_val_06[0]+ser_val_06[1]+ser_val_07+ser_val_08+ser_val_09+ser_val_10+ser_val_11;
      byte low_byte = lowByte(f_check_rec);
      //Serial.println("CRC1: " + String(low_byte)); 
      //Serial.println("CRC2: " + String(ser_val_12)); 


      if (low_byte == ser_val_12){

          f_filterRemaining = word(ser_val_01[0], ser_val_01[1]);
          fval2 = f_filterRemaining;
          //Serial.println("Filter: " + String(f_filterRemaining));
        
          f_min = ser_val_02[0];
          //Serial.println("min: " + String(f_min));    
          f_pwm = ser_val_02[1];
          fval3 = f_pwm;
          //Serial.println("pwm: " + String(f_pwm));
        
          f_alarmlevl = word(ser_val_03[1], ser_val_03[0]);
          fval4 = f_alarmlevl;
          //Serial.println("Alarmlevel: " + String(f_alarmlevl));

          fval5 = ser_val_09;
          //Serial.println("Speed: " + String(ser_val_09));

          f_alarm = ser_val_04;
          fval6 = f_alarm;
          //Serial.println("alarm: " + String(f_alarm));

          f_software = word(ser_val_05[1], ser_val_05[0]);
            //fvalx = f_software;
          //Serial.println("software: " + String(f_software));

          f_opHour = word(ser_val_06[1], ser_val_06[0]);
          fval7 = f_opHour;
          //Serial.println("Operation h: " + String(f_opHour));

          f_filterMonitor = ser_val_07;
          fval8 = f_filterMonitor;
          //Serial.println("Filter Monitor: " + String(f_filterMonitor));

          f_checksum = ser_val_12;
          //fvalx = f_filterMonitor;
          //Serial.println("checksum: " + String(f_checksum));

          //Serial.println("");


              if (f_alarm == 0) {
              f_alarm_s = "off";
              divfan7 = divgrau;
              }
              else if (f_alarm == 1) {
              f_alarm_s = "no Alarm";
              divfan7 = divgreen;
              }
              else if (f_alarm == 2) {
              f_alarm_s = "Alarm";
              divfan7 = divred;
              }
              else {
              f_alarm_s = " ";
              divfan7 = divgrau;
              }


              divfan1 = divgrau;
              divfan2 = divgrau;
              divfan3 = divgrau;
              divfan4 = divgrau;
              divfan5 = divgrau;
              divfan6 = divgrau;

              if (f_filterMonitor == 0) {
              divfan1 = divgreen;
              }
              else if (f_filterMonitor == 1) {
              divfan1 = divgreen;
              divfan2 = divgreen;
              }
              else if (f_filterMonitor == 2) {
              divfan1 = divgreen;
              divfan2 = divgreen;
              divfan3 = divgreen;
              }
              else if (f_filterMonitor == 3) {
              divfan1 = divgreen;
              divfan2 = divgreen;
              divfan3 = divgreen;
              divfan4 = divgreen;
              }
              else if (f_filterMonitor == 4) {
              divfan1 = divgreen;
              divfan2 = divgreen;
              divfan3 = divgreen;
              divfan4 = divgreen;
              divfan5 = divgreen;
              }
              else if (f_filterMonitor == 5) {
              divfan1 = divgreen;
              divfan2 = divgreen;
              divfan3 = divgreen;
              divfan4 = divgreen;
              divfan5 = divgreen;
              divfan6 = divgreen;
              }


              //---------------------------------------------
                divpower01 = divpwgrau;
                divpower02 = divpwgrau;
                divpower03 = divpwgrau;
                divpower04 = divpwgrau;
                divpower05 = divpwgrau;
                divpower06 = divpwgrau;
                divpower07 = divpwgrau;
                divpower08 = divpwgrau;
                divpower09 = divpwgrau;
                divpower10 = divpwgrau;
                divpower11 = divpwgrau;
                divpower12 = divpwgrau;
                divpower13 = divpwgrau;
                divpower14 = divpwgrau;
                divpower15 = divpwgrau;
                divpower16 = divpwgrau;
                divpower17 = divpwgrau;
                divpower18 = divpwgrau;
                divpower19 = divpwgrau;
                divpower20 = divpwgrau;
             
              if (f_pwm == 5) {
                divpower01 = divpwgreen;
              }
              if (f_pwm == 10) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
              } 
              if (f_pwm == 15) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
              } 
              if (f_pwm == 20) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
              } 
              if (f_pwm == 25) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
              } 
              if (f_pwm == 30) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
              } 
              if (f_pwm == 35) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
              } 
              if (f_pwm == 40) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
              } 
              if (f_pwm == 45) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
              } 
              if (f_pwm == 50) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
              } 
              if (f_pwm == 55) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
              } 
              if (f_pwm == 60) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
                divpower12 = divpwgreen;
              } 
              if (f_pwm == 65) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
                divpower12 = divpwgreen;
                divpower13 = divpwgreen;
              } 
              if (f_pwm == 70) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
                divpower12 = divpwgreen;
                divpower13 = divpwgreen;
                divpower14 = divpwgreen;
              } 
              if (f_pwm == 75) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
                divpower12 = divpwgreen;
                divpower13 = divpwgreen;
                divpower14 = divpwgreen;
                divpower15 = divpwgreen;
              } 
              if (f_pwm == 80) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
                divpower12 = divpwgreen;
                divpower13 = divpwgreen;
                divpower14 = divpwgreen;
                divpower15 = divpwgreen;
                divpower16 = divpwgreen;
              } 
              if (f_pwm == 85) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
                divpower12 = divpwgreen;
                divpower13 = divpwgreen;
                divpower14 = divpwgreen;
                divpower15 = divpwgreen;
                divpower16 = divpwgreen;
                divpower17 = divpwgreen;
              } 
              if (f_pwm == 90) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
                divpower12 = divpwgreen;
                divpower13 = divpwgreen;
                divpower14 = divpwgreen;
                divpower15 = divpwgreen;
                divpower16 = divpwgreen;
                divpower17 = divpwgreen;
                divpower18 = divpwgreen;
              } 
              if (f_pwm == 95) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
                divpower12 = divpwgreen;
                divpower13 = divpwgreen;
                divpower14 = divpwgreen;
                divpower15 = divpwgreen;
                divpower16 = divpwgreen;
                divpower17 = divpwgreen;
                divpower18 = divpwgreen;
                divpower19 = divpwgreen;
              } 

              if (f_pwm == 100) {
                divpower01 = divpwgreen;
                divpower02 = divpwgreen;
                divpower03 = divpwgreen;
                divpower04 = divpwgreen;
                divpower05 = divpwgreen;
                divpower06 = divpwgreen;
                divpower07 = divpwgreen;
                divpower08 = divpwgreen;
                divpower09 = divpwgreen;
                divpower10 = divpwgreen;
                divpower11 = divpwgreen;
                divpower12 = divpwgreen;
                divpower13 = divpwgreen;
                divpower14 = divpwgreen;
                divpower15 = divpwgreen;
                divpower16 = divpwgreen;
                divpower17 = divpwgreen;
                divpower18 = divpwgreen;
                divpower19 = divpwgreen;
                divpower20 = divpwgreen;
              }
             //---------------------------------------------------




     // }else{
          //Serial.println("checksum not ok");
     
      }//crc


  }  //Serial1.available() > 0
}
  //------------------------------------------------------------------------------

  







}
//---  LOOP  ---
//-----------------------------------------------------


/*
  SerialEvent occurs whenever a new data comes in the hardware serial RX. This
  routine is run between each time loop() runs, so using delay inside loop can
  delay response. Multiple bytes of data may be available.
*/
/*
void serialEvent1() {
  while (Serial1.available()) {
    // get the new byte:
    char inChar = (char)Serial1.read();
    // add it to the inputString:
    inputString += inChar;
    // if the incoming character is a newline, set a flag so the main loop can
    // do something about it:
    Serial.println("..");
    if (inChar == '\n') {
      stringComplete = true;
    }
  }
}
*/


// string: string to parse
// c: delimiter
// returns number of items parsed
int split(String string, char c)
{
  String data = "";
  int bufferIndex = 0;

  for (int i = 0; i < string.length(); ++i)
  {
    char c = string[i];
    
    if (c != '.')
    {
      data += c;
      //Serial.println(data); 
    }
    else
    {
      //data += '\0';
      //Serial.println("--"); 
      //Serial.println(data); 
      strings[bufferIndex++] = data;
      data = "";
    }
  }
  strings[bufferIndex++] = data;
  return bufferIndex;
}

//****************************************************



//*************************************************
/*



#include <WiFi.h>

// Replace with your network credentials (STATION)
const char* ssid = "FRITZ!Box 6490 Holger";
const char* password = "15400240614617116002";

void initWiFi() {
  WiFi.mode(WIFI_STA);
  WiFi.begin(ssid, password);
  Serial.print("Connecting to WiFi ..");
  while (WiFi.status() != WL_CONNECTED) {
    Serial.print('.');
    delay(1000);
  }
  Serial.println(WiFi.localIP());
}

WiFiClient Client;

void setup() {
  Serial.begin(115200);
  initWiFi();
  Serial.print("RRSI: ");
  Serial.println(WiFi.RSSI());


    char servername[]="google.com";  // remote server we will connect to
    Serial.println("\nStarting connection... " + String(servername));
    // if you get a connection, report back via serial:
    if (Client.connect(servername, 80)) {
      Serial.println("connected");
      // Make a HTTP request:
      Client.println("GET /search?q=arduino HTTP/1.0");
      Client.println();
    }else{
     Serial.println("not connected!!!");
    
    }


}


void loop() {
  // put your main code here, to run repeatedly:



  if (Client.available()) {
    char c = Client.read();
    Serial.print(c);
  }

  if (!Client.connected()) {
    Serial.println();
    Serial.println("disconnecting.");
    Client.stop();
    for(;;)
      ;
  }



}

*/
//****************************************************

